{"pageProps":{"page":{"slug":"function.cubrid-pconnect-with-url.md","content":"# cubrid\\_pconnect\\_with\\_url\n\n(PECL CUBRID >= 8.3.1)\n\ncubrid\\_pconnect\\_with\\_url — Відкриває постійне з'єднання із сервером CUBRID\n\n### Опис\n\n```methodsynopsis\ncubrid_pconnect_with_url(string $conn_url, string $userid = ?, string $passwd = ?): resource\n```\n\nВстановлює постійне з'єднання із сервером CUBRID.\n\n**cubrid\\_pconnect\\_with\\_url()** діє дуже схоже на [cubrid\\_connect\\_with\\_url()](function.cubrid-connect-with-url.md) з двома основними відмінностями:\n\nПо-перше, при підключенні функція спочатку спробує знайти (постійне) посилання, яке вже відкрито з тим самим хостом, портом, ім'ям бази даних та ідентифікатором користувача. Якщо з'єднання буде знайдено, замість відкриття нового буде повернуто його ідентифікатор.\n\nПо-друге, з'єднання з SQL-сервером не буде закрито після закінчення скрипту. Натомість посилання залишиться відкритим для використання в майбутньому ([cubrid\\_close()](function.cubrid-close.md) або [cubrid\\_disconnect()](function.cubrid-disconnect.md) не закриє посилання, встановлені **cubrid\\_pconnect\\_with\\_url()**\n\nТому цей тип посилання називається \"постійним\".\n\n::= CUBRID::<db\\_name>:<db\\_user>:<db\\_password>:\\[? \\]\n\n\\[&\\]\n\n::= alhosts=<alternative\\_hosts>\\[ &rctime=\\]\n\n::= login\\_timeout=<milli\\_sec>\n\n::= query\\_timeout=<milli\\_sec>\n\n::= disconnect\\_on\\_query\\_timeout=true|false\n\n<alternative\\_hosts> ::= <standby\\_broker1\\_host>: \\[,<standby\\_broker2\\_host>:\\]\n\n:= HOSTNAME | IP\\_ADDR\n\n:= SECOND\n\n<milli\\_sec> := MILLI SECOND\n\n-   host : Ім'я хоста або IP-адреса основної бази даних\n-   db\\_name : Ім'я бази даних\n-   db\\_user : Ім'я користувача бази даних\n-   db\\_password : Пароль користувача бази даних\n-   alhosts : Задає інформацію про брокера резервного сервера, який буде використовуватися у разі недоступності основного. Якщо ви задасте кілька резервних брокерів, спроби з'єднання будуть відбуватися в тому ж порядку, як вони описані в URL.\n-   rctime : Інтервал між спробами підключення до активного брокера, у якому відбувся збій. Після виникнення помилки система з'єднається з резервним брокером, вказаним в althosts (failover), відкотить незавершені транзакції, і потім спробує з'єднатися з активним брокером основного вузла через кожні rctime. Значення за промовчанням 600 секунд.\n-   login\\_timeout : Максимальний час (мілісекунди) очікування на авторизацію. За умовчанням 0, що означає нескінченний час очікування.\n-   query\\_timeout : Максимальний час (мілісекунди) очікування на виконання запиту. Після вичерпання цього часу на сервер буде надіслано повідомлення про припинення запиту. Повернене значення запиту залежатиме від налаштування disconnect\\_on\\_query\\_timeout; навіть якщо буде надіслано повідомлення про припинення запиту, він може завершитися вдало.\n-   disconnect\\_on\\_query\\_timeout : Визначає, чи повертається помилка відразу після перевищення часу очікування запиту. За замовчуванням\\*\\*`false`\\*\\*\n\n> **Зауваження** :\n> \n> Символи `?` и `:` є спеціальними в URL-з'єднання і не можуть бути використані в паролі. Приклад некоректного пароля, який не можна використовувати в рядку з'єднання, тому що в ньому використовуються символи \"`?:`\".\n> \n> $url = \"CUBRID:localhost:33000:tdb:dba:12?:?login\\_timeout=100\";\n> \n> Пароли, содержащие`?` или `:` можуть бути надіслані окремо.\n> \n> $url = \"CUBRID:localhost:33000:tbd:::?login\\_timeout=100\";\n> \n> $conn = cubrid\\_pconnect\\_with\\_url ($url, \"dba\", \"12?\");\n> \n> Якщо логін або пароль порожні, необхідно зберігати символи \" `:` \":\n> \n> $url = \"CUBRID:localhost:33000:demodb:::\";\n\n### Список параметрів\n\n`conn_url`\n\nРядок, що містить інформацію для з'єднання.\n\n`userid`\n\nІм'я користувача бази даних.\n\n`passwd`\n\nПароль користувача.\n\n### Значення, що повертаються\n\nІдентифікатор з'єднання у разі успішного виконання або \\*\\*`false`\\*\\*в случае возникновения ошибки.\n\n### Приклади\n\n**Приклад #1 Приклад використання** cubrid\\_pconnect\\_with\\_url()\\*\\* без завдання властивостей\\*\\*\n\n```php\n<?php\n$conn_url = \"CUBRID:127.0.0.1:33000:demodb:dba::\";\n$con = cubrid_pconnect_with_url ($conn_url);\n\nif ($con) {\n   echo \"соединение успешно выполнено\";\n   cubrid_execute($con, \"create table person(id int,name char(16))\");\n   $req =cubrid_execute($con, \"insert into person values(1,'James')\");\n\n   if ($req) {\n      cubrid_close_request ($req);\n      cubrid_commit ($con);\n   } else {\n      cubrid_rollback ($con);\n   }\n   cubrid_disconnect ($con);\n}\n?>\n```\n\n**Приклад #2**cubrid\\_pconnect\\_with\\_url()**url with properties example**\n\n```php\n<?php\n$conn_url = \"CUBRID:127.0.0.1:33000:demodb:dba::?althost=10.34.63.132:33088&rctime=100\";\n$con = cubrid_pconnect_with_url ($conn_url);\n\nif ($con) {\n   echo \"соединение успешно выполнено\";\n   $req =cubrid_execute($con, \"insert into person values(1,'James')\");\n\n   if ($req) {\n      cubrid_close_request ($req);\n      cubrid_commit ($con);\n   } else {\n      cubrid_rollback ($con);\n   }\n   cubrid_disconnect ($con);\n}\n?>\n```\n\n### Дивіться також\n\n-   [cubrid\\_connect()](function.cubrid-connect.md) \\- Відкриває з'єднання з сервером CUBRID\n-   [cubrid\\_connect\\_with\\_url()](function.cubrid-connect-with-url.md) \\- Створює оточення для з'єднання із сервером CUBRID\n-   [cubrid\\_pconnect()](function.cubrid-pconnect.md) \\- Відкриває постійне з'єднання із сервером CUBRID\n-   [cubrid\\_disconnect()](function.cubrid-disconnect.md) \\- Закриває з'єднання з базою даних\n-   [cubrid\\_close()](function.cubrid-close.md) \\- Закриває з'єднання з базою даних\n","title":"cubrid\\_pconnect\\_with\\_url","contentType":2,"navigation":[{"function.cubrid-num-rows.md":"« cubrid\\_num\\_rows"},{"function.cubrid-pconnect.md":"cubrid\\_pconnect »"},{"index.md":"PHP Manual"},{"ref.cubrid.md":"Функції CUBRID"}]}},"__N_SSG":true}