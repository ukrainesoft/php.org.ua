- [«mb_ereg_match](function.mb-ereg-match.md)
- [mb_ereg_replace »](function.mb-ereg-replace.md)

- [PHP Manual](index.md)
- [Функції для роботи з багатобайтовими рядками](ref.mbstring.md)
- Виконує пошук та заміну за регулярним виразом з підтримкою
багатобайтових кодувань використовуючи callback-функцію

#mb_ereg_replace_callback

(PHP 5 u003d 5.4.1, PHP 7, PHP 8)

mb_ereg_replace_callback — Здійснює пошук та заміну за регулярним
висловлювання з підтримкою багатобайтових кодувань використовуючи
callback-функцію

### Опис

**mb_ereg_replace_callback**(
string `$pattern`,
[callable](language.types.callable.md) `$callback`,
string `$string`,
?string `$options` u003d **`null`**
): string\|false\|null

Перевіряє рядок `string` на збіг із шаблоном `pattern`, потім
замінює знайдений текст результатом функції callback.

Поведінка цієї функції майже ідентична з функцією
[mb_ereg_replace()](function.mb-ereg-replace.md), за винятком того,
що замість рядка заміни `replacement` необхідно визначати функцію
`callback`.

### Список параметрів

`pattern`
Регулярний вираз шаблон.

Мультибайтові символи можуть використовуватися в pattern.

`callback`
Функція, яка буде викликана для отримання та передачі масиву
збігів у рядок `subject`. Callback-функція має повертати рядок
для заміни.

Часто може знадобитися оголошувати функцію `callback` для
**mb_ereg_replace_callback()** лише в одному місці. В такому випадку
використовуйте [анонімні функції](functions.anonymous.md) для
визначення callback-функції всередині виклику
**mb_ereg_replace_callback()**. За такого підходу у вас буде вся
інформація про виклик в одному місці, і ви не забрудните простір імен
функції ім'ям своєї callback-функції, яке більше ніде не
використовується.

`string`
Рядок (string) для перевірки.

`options`
Опція пошуку. Детальніше дивіться
[mb_regex_set_options()](function.mb-regex-set-options.md).

### Значення, що повертаються

Результуючий рядок у разі успішного виконання або **`false`**
у разі виникнення помилки. Якщо `string` некоректна для поточної
кодування, повертається **`null`**.

### Список змін

| Версія | Опис |
|--------|---------------------------------------- -------------------------|
| 8.0.0 | `options` тепер припускає значення null. |
| 7.1.0 | Функція перевіряє, чи коректна `string` для поточного кодування. |

### Приклади

**Приклад #1 Приклад функції **mb_ereg_replace_callback()****

` <?php// цей текст використовувався в 2002// ми хочемо обновити для використання його в 2003$text u003d "День сміху - 04/01/2002
";$text.u003d "Остання Різдво було 12/24/2001
";// callback-функціяfunction next_year($matches){ // зазвичай: в $matches[0] буде повне збіг  // $matches[1] - збіг для  ' і т.д. return $matches[1].($matches[2]+1);}echo mb_ereg_replace_callback(           "(\d{2}/\d{2}/) ,             "next_year",            $text);?> `

Результат виконання цього прикладу:

День сміху - 04/01/2003
Останнє Різдво було 12/24/2002

**Приклад #2 **mb_ereg_replace_callback()** використовує анонімну
функцію**

` <?php// цей текст використовувався в 2002// ми хочемо обновити для використання його в 2003$text u003d "День сміху - 04/01/2002
";$text.u003d "Остання Різдво було 12/24/2001
";echo mb_ereg_replace_callback(            "(\d{2}/\d{2}/)(\d{4})",            function ($matches) {               return $matches[1].($matches[2]+1 );              },            $text);?> `

### Примітки

> **Примітка**:
>
> Для цієї функції буде використано внутрішнє кодування або
> кодування, встановлене функцією
> [mb_regex_encoding()](function.mb-regex-encoding.md).

### Дивіться також

- [mb_regex_encoding()](function.mb-regex-encoding.md) -
Встановлює/отримує поточне кодування для багатобайтового
регулярного вираження
- [mb_ereg_replace()](function.mb-ereg-replace.md) - Здійснює
заміну за регулярним виразом з підтримкою багатобайтових кодувань
- [Анонімні функції](functions.anonymous.md)
