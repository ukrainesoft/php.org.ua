{"pageProps":{"page":{"slug":"gearmanclient.dobackground.md","content":"# GearmanClient::doBackground\n\n(PECL gearman >= 0.5.0)\n\nGearmanClient::doBackground — Запускає виконання завдання у фоновому режимі\n\n### Опис\n\n```methodsynopsis\npublic GearmanClient::doBackground(string $function, string $workload, ?string $unique = null): string\n```\n\nЗапуск виконання завдання у фоновому режимі, повертаючи дескриптор завдання, який може бути використаний для запиту стану завдання, що виконується.\n\n### Список параметрів\n\n`function`\n\nЗареєстрована функція, що викликається робочим процесом\n\n`workload`\n\nСеріалізовані дані, що підлягають обробці\n\n`unique`\n\nУнікальний ID, який призначається певному завданню\n\n### Значення, що повертаються\n\nДескриптор завдання для надісланого завдання.\n\n### Приклади\n\n**Приклад #1 Відправляє та відстежує фонове завдання**\n\nОброблювач у цьому прикладі має штучну затримку, щоб змоделювати тривале виконання завдання. Клієнт періодично перевіряє стан завдання, що виконується.\n\n```php\n<?php\n\n/* создание объекта */\n$gmclient= new GearmanClient();\n\n/* указание сервера по умолчанию */\n$gmclient->addServer();\n\n/* запуск выполнение клиента */\n$job_handle = $gmclient->doBackground(\"reverse\", \"this is a test\");\n\nif ($gmclient->returnCode() != GEARMAN_SUCCESS)\n{\n  echo \"неуспешный код возврата\\n\";\n  exit;\n}\n\n$done = false;\ndo\n{\n   sleep(3);\n   $stat = $gmclient->jobStatus($job_handle);\n   if (!$stat[0]) // задание известно, но не выполнено\n      $done = true;\n   echo \"Выполняется: \" . ($stat[1] ? \"true\" : \"false\") . \", числитель: \" . $stat[2] . \", знаменатель: \" . $stat[3] . \"\\n\";\n}\nwhile(!$done);\n\necho \"завершено!\\n\";\n\n?>\n```\n\nВисновок наведеного прикладу буде схожим на:\n\n```\nВыполняется: true, числитель: 3, знаменатель: 14\nВыполняется: true, числитель: 6, знаменатель: 14\nВыполняется: true, числитель: 9, знаменатель: 14\nВыполняется: true, числитель: 12, знаменатель: 14\nВыполняется: false, числитель: 0, знаменатель: 0\nзавершено!\n```\n\n### Дивіться також\n\n-   [GearmanClient::doNormal()](gearmanclient.donormal.md) \\- Виконує одиночне завдання та повертає результат\n-   [GearmanClient::doHigh()](gearmanclient.dohigh.md) \\- Запускає на виконання завдання із високим пріоритетом\n-   [GearmanClient::doLow()](gearmanclient.dolow.md) \\- Запускає виконання завдання з низьким пріоритетом\n-   [GearmanClient::doHighBackground()](gearmanclient.dohighbackground.md) \\- Запускає на виконання із високим пріоритетом завдання у фоновому режимі\n-   [GearmanClient::doLowBackground()](gearmanclient.dolowbackground.md) \\- Запускає на виконання з низьким пріоритетом завдання у фоновому режимі\n","title":"GearmanClient::doBackground","contentType":2,"navigation":[{"gearmanclient.do.md":"« GearmanClient::do"},{"gearmanclient.dohigh.md":"GearmanClient::doHigh »"},{"index.md":"PHP Manual"},{"class.gearmanclient.md":"GearmanClient"}]}},"__N_SSG":true}