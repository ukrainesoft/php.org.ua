{"pageProps":{"page":{"slug":"luasandbox.setcpulimit.md","content":"# LuaSandbox::setCPULimit\n\n(PECL luasandbox >= 1.0.0)\n\nLuaSandbox::setCPULimit — Встановлює обмеження часу процесора для середовища Lua\n\n### Опис\n\n```methodsynopsis\npublic LuaSandbox::setCPULimit(float|bool $limit): void\n```\n\nВстановлює обмеження часу процесора для середовища Lua.\n\nЯкщо загальний користувальницький та системний час, що використовується середовищем після виклику методу, перевищує це обмеження, викидається виняток [LuaSandboxTimeoutError](class.luasandboxtimeouterror.md)\n\nЧас, що використовується в callback-функціях PHP, включено до ліміту.\n\nВстановлення обмеження часу для callback-функції під час роботи Lua призводить до скидання таймера або його запуску, якщо він ще не був запущений.\n\n> **Зауваження** :\n> \n> У Windows обмеження процесора ігнорується. В операційних системах, які не підтримують **`CLOCK_THREAD_CPUTIME_ID`**, таких як FreeBSD та Mac OS X, буде обмежено фактичний час, а не час процесора.\n\n### Список параметрів\n\n`limit`\n\nОбмеження як число з плаваючою точкою (float) у секундах або \\*\\*`false`\\*\\*щоб не обмежувати.\n\n### Значення, що повертаються\n\nФункція не повертає значення після виконання.\n\n### Приклади\n\n**Приклад #1 Виклик функції Lua**\n\n```php\n<?php\n\n// создание нового LuaSandbox\n$sandbox = new LuaSandbox();\n\n// установка лимита\n$sandbox->setCPULimit( 2 );\n\n// запуск кода Lua\n$sandbox->loadString( 'while true do end' )->call();\n\n?>\n```\n\nВисновок наведеного прикладу буде схожим на:\n\n```\nPHP Fatal error:  Uncaught LuaSandboxTimeoutError: The maximum execution time for this script was exceeded\n```\n\n### Дивіться також\n\n-   [LuaSandbox::getCPUUsage()](luasandbox.getcpuusage.md) \\- Повертає поточний час використання процесора у середовищі Lua\n-   [LuaSandbox::setMemoryLimit()](luasandbox.setmemorylimit.md) \\- Встановлює межу пам'яті для середовища Lua\n","title":"LuaSandbox::setCPULimit","contentType":2,"navigation":[{"luasandbox.registerlibrary.md":"« LuaSandbox::registerLibrary"},{"luasandbox.setmemorylimit.md":"LuaSandbox::setMemoryLimit »"},{"index.md":"PHP Manual"},{"class.luasandbox.md":"LuaSandbox"}]}},"__N_SSG":true}