{"pageProps":{"page":{"slug":"function.dns-get-record.md","content":"# dns\\_get\\_record\n\n(PHP 5, PHP 7, PHP 8)\n\ndns\\_get\\_record — Отримання ресурсних записів DNS хоста\n\n### Опис\n\n```methodsynopsis\ndns_get_record(    string $hostname,    int $type = DNS_ANY,    array &$authoritative_name_servers = null,    array &$additional_records = null,    bool $raw = false): array|false\n```\n\nЗдійснює вибірку DNS-записів, що відповідають властивостям хоста `hostname`\n\n### Список параметрів\n\n`hostname`\n\nПараметр`hostname` має бути коректним DNS-іменем таким як \"`www.example.com`\". Зворотний дозвіл імен хостів може бути зроблений з використанням нотації `in-addr.arpa`, однак, для цієї мети краще скористатися функцією [gethostbyaddr()](function.gethostbyaddr.md)\n\n> **Зауваження** :\n> \n> Відповідно до стандартів DNS, адреси електронної пошти задаються у форматі `user.host`(наПриклад,`hostmaster.example.com`в отличие от`hostmaster@example.com`), тому будьте уважні та додатково перевірте це значення, перш ніж використовувати його в таких функціях, як [mail()](function.mail.md)\n\n`type`\n\nПо умолчанию**dns\\_get\\_record()** шукатиме всі можливі записи, що відповідають заданому імені хоста `hostname`. Щоб звузити коло пошуку, можна встановити необов'язковий параметр `type`. Цей параметр може приймати такі значення: **`DNS_A`** **`DNS_CNAME`** **`DNS_HINFO`** **`DNS_CAA`** **`DNS_MX`** **`DNS_NS`** **`DNS_PTR`** **`DNS_SOA`** **`DNS_TXT`** **`DNS_AAAA`** **`DNS_SRV`** **`DNS_NAPTR`** **`DNS_A6`** **`DNS_ALL`** або **`DNS_ANY`**\n\n> **Зауваження** :\n> \n> Через неоднозначну поведінку libresolv на різних платформах, **`DNS_ANY`** може повернути не всі записи, повільніший **`DNS_ALL`** поверне всі записи надійніше.\n\n> **Зауваження** :\n> \n> Windows:**`DNS_CAA`** не підтримується. Підтримка \\*\\*`DNS_A6`\\*\\*не реализована.\n\n`authoritative_name_servers`\n\nПередається за посиланням і, якщо передано, буде заповнюватися ресурсними записами для *серверів, що засвідчують*(Authoritative Name Servers).\n\n`additional_records`\n\nПередається за посиланням і, якщо передано, заповнюватиметься *додатковими записами*(Additional Records).\n\n`raw`\n\n`type` буде інтерпретований як необроблений ідентифікатор типу DNS (не можна використовувати константи `DNS_*`). Значення, що повертається, міститиме ключ `data`, що необхідно проаналізувати вручну.\n\n### Значення, що повертаються\n\nЦя функція повертає масив асоціативних масивів або **`false`** у разі виникнення помилки. Кожен асоціативний масив містить *щонайменше*следующие ключи:\n\n**Основні атрибути DNS**\n\n| Атрибут | Опис |\n| --- | --- |\n| host | Запис у просторі імен DNS, на яку посилається решта даних. |\n| class | **dns\\_get\\_record()** повертає тільки записи класу Internet, відповідно цей параметр завжди прийматиме значення `IN` |\n| type | Рядок, що містить тип запису. Додаткові атрибути також містяться в результуючому масиві в залежності від типу. По одному вкладеному масиву за кожен тип. Дивіться таблицю нижче. |\n| ttl | Час життя (`\"Time To Live\"`) Залишилося для цього запису. Це *не* вихідне ttl записи. Воно дорівнює вихідному за вирахуванням часу, що минув з моменту відправки запиту на сервер. |\n\n**Інші ключі асоціативного масиву, що відповідають типу 'type'**\n\n| Тип записи | Дополнительные данные |\n| --- | --- |\n| `A` | `ip`: адреси IPv4 у десятковому форматі з роздільниками. |\n| `MX` | `pri`: Пріоритет поштового сервера Чим нижче число, тим вищий пріоритет. . `target`: FQDN поштового сервера Дивіться також [dns\\_get\\_mx()](function.dns-get-mx.md) |\n| `CNAME` | `target`: FQDN розташування в просторі імен DNS, на яке вказує запис. |\n| `NS` | `target`: FQDN - ім'я сервера, який є авторитетним для цього імені хоста. |\n| `PTR` | `target`: Розміщення без вказівки простору імен DNS, на яке вказує запис. |\n| `TXT` | `txt`: Рядок даних, пов'язаних із цим записом. |\n| `HINFO` | `cpu`: число IANA, що позначає модель процесора комп'ютера, який вказує цей запис. . `os`: число IANA, що означає операційну систему комп'ютера, який вказує цей запис. Дивіться додатково IANA [»`Operating System Names`](http://www.iana.org/assignments/operating-system-names) |\n| `CAA` | `flags`: Однобайтове бітове поле; в даний момент визначено лише біт номер 0, що називається 'critical'; інші біти зарезервовані та мають ігноруватися. . `tag`: Ім'я тега CAA (літерно-числовий рядок ASCII). . `value`: Значення CAA (бінарний рядок, можна використовувати підформати). Докладніше читайте тут: [» RFC 6844](http://www.faqs.org/rfcs/rfc6844) |\n| `SOA` | `mname`: FQDN комп'ютера, з якого отримані ресурсні записи. . `rname`: Адреса електронної пошти адміністратора домену . `serial`: Порядковий номер цієї ревізії домена, що запитується. . `refresh`: Інтервал часу (в секундах), який мають використовувати вторинні сервери під час оновлення видалених копій цього домену. . `retry`: Час очікування (у секундах) після невдалого оновлення до наступної спроби. . `expire`: Максимальний час (в секундах), протягом якого вторинний DNS-сервер повинен тримати в пам'яті дані віддалених копій доменної зони, перш ніж відповісти, коли не вдається оновити дані. . `minimum-ttl`: Мінімальний час (у секундах), протягом якого клієнт може працювати з поточною DNS-роздільною здатністю, перш ніж йому доведеться повторно запитувати цю роздільну здатність. Значення може бути замінено окремими ресурсними записами. |\n| `AAAA` | `ipv6`: адреса IPv6 |\n| `A6` | `masklen`: Довжина (у бітах), яку потрібно успадкувати від цільової адреси `chain`. . `ipv6`: Адреса для цього конкретного запису, який потрібно об'єднати з `chain`. . `chain`: Запис, який потрібно доповнити даними `ipv6` |\n| `SRV` | `pri`: (Пріоритет) менші значення мають використовуватися першими. . `weight`: Ранжування. Записам з великою вагою віддається перевага. . `targets` має вибиратися випадково. . `target`и`port`: ім'я хоста та номер порту, на якому можна знайти потрібну службу. Додаткову інформацію можна отримати за посиланням: [» RFC 2782](http://www.faqs.org/rfcs/rfc2782) |\n| `NAPTR` | `order`и`pref`: Еквівалентні `pri`и`weight` наведеним вище. . `flags` `services` `regex`и`replacement`: Параметри, визначені в [» RFC 2915](http://www.faqs.org/rfcs/rfc2915) |\n\n### список змін\n\n| Версия | Опис |\n| --- | --- |\n| 7.0.16, 7.1.2 | Додано підтримку записів типу CAA. |\n\n### Приклади\n\n**Приклад #1 Приклад використання** dns\\_get\\_record()\\*\\*\\*\\*\n\n```php\n<?php\n$result = dns_get_record(\"php.net\");\nprint_r($result);\n?>\n```\n\nВисновок наведеного прикладу буде схожим на:\n\n```\nArray\n(\n    [0] => Array\n        (\n            [host] => php.net\n            [type] => MX\n            [pri] => 5\n            [target] => pair2.php.net\n            [class] => IN\n            [ttl] => 6765\n        )\n\n    [1] => Array\n        (\n            [host] => php.net\n            [type] => A\n            [ip] => 64.246.30.37\n            [class] => IN\n            [ttl] => 8125\n        )\n\n)\n```\n\n**Приклад #2 Использование**dns\\_get\\_record()**с DNS\\_ANY**\n\nТак як досить часто потрібно визначити IP-адресу поштового сервера, після того як запис MX було дозволено, **dns\\_get\\_record()** повертає масив `additional_records` із відповідними записами. Масив `authoritative_name_servers` міститиме список посвідчувальних DNS-серверів.\n\n```php\n<?php\n/* Отправим \"ANY\" запрос к php.net,\n   создадим массивы $authns и $addtl,\n   в которые будут помещён список серверов\n   имён и дополнительные записи,\n   соответствующие этим серверам\n*/\n$result = dns_get_record(\"php.net\", DNS_ANY, $authns, $addtl);\necho \"Результат = \";\nprint_r($result);\necho \"Удостоверяющие серверы = \";\nprint_r($authns);\necho \"Дополнительные записи = \";\nprint_r($addtl);\n?>\n```\n\nВисновок наведеного прикладу буде схожим на:\n\n```\nРезультат = Array\n(\n    [0] => Array\n        (\n            [host] => php.net\n            [type] => MX\n            [pri] => 5\n            [target] => pair2.php.net\n            [class] => IN\n            [ttl] => 6765\n        )\n\n    [1] => Array\n        (\n            [host] => php.net\n            [type] => A\n            [ip] => 64.246.30.37\n            [class] => IN\n            [ttl] => 8125\n        )\n\n)\nУдостоверяющие серверы = Array\n(\n    [0] => Array\n        (\n            [host] => php.net\n            [type] => NS\n            [target] => remote1.easydns.com\n            [class] => IN\n            [ttl] => 10722\n        )\n\n    [1] => Array\n        (\n            [host] => php.net\n            [type] => NS\n            [target] => remote2.easydns.com\n            [class] => IN\n            [ttl] => 10722\n        )\n\n    [2] => Array\n        (\n            [host] => php.net\n            [type] => NS\n            [target] => ns1.easydns.com\n            [class] => IN\n            [ttl] => 10722\n        )\n\n    [3] => Array\n        (\n            [host] => php.net\n            [type] => NS\n            [target] => ns2.easydns.com\n            [class] => IN\n            [ttl] => 10722\n        )\n\n)\nДополнительные записи = Array\n(\n    [0] => Array\n        (\n            [host] => pair2.php.net\n            [type] => A\n            [ip] => 216.92.131.5\n            [class] => IN\n            [ttl] => 6766\n        )\n\n    [1] => Array\n        (\n            [host] => remote1.easydns.com\n            [type] => A\n            [ip] => 64.39.29.212\n            [class] => IN\n            [ttl] => 100384\n        )\n\n    [2] => Array\n        (\n            [host] => remote2.easydns.com\n            [type] => A\n            [ip] => 212.100.224.80\n            [class] => IN\n            [ttl] => 81241\n        )\n\n    [3] => Array\n        (\n            [host] => ns1.easydns.com\n            [type] => A\n            [ip] => 216.220.40.243\n            [class] => IN\n            [ttl] => 81241\n        )\n\n    [4] => Array\n        (\n            [host] => ns2.easydns.com\n            [type] => A\n            [ip] => 216.220.40.244\n            [class] => IN\n            [ttl] => 81241\n        )\n\n)\n```\n\n### Дивіться також\n\n-   [dns\\_get\\_mx()](function.dns-get-mx.md) \\- Псевдонім getmxrr\n-   [dns\\_check\\_record()](function.dns-check-record.md) \\- Псевдонім checkdnsrr\n","title":"dns\\_get\\_record","contentType":2,"navigation":[{"function.dns-get-mx.md":"« dns\\_get\\_mx"},{"function.fsockopen.md":"fsockopen »"},{"index.md":"PHP Manual"},{"ref.network.md":"Мережеві функції"}]}},"__N_SSG":true}