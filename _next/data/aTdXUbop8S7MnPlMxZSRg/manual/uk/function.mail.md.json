{"pageProps":{"page":{"slug":"function.mail.md","content":"# mail\n\n(PHP 4, PHP 5, PHP 7, PHP 8)\n\nmail — Надсилає електронну пошту\n\n### Опис\n\n```methodsynopsis\nmail(    string $to,    string $subject,    string $message,    array|string $additional_headers = [],    string $additional_params = \"\"): bool\n```\n\nНадсилає електронну пошту.\n\n### Список параметрів\n\n`to`\n\nОдержувач або одержувачі листа.\n\nФормат строки по правилам стандарта[» RFC 2822](http://www.faqs.org/rfcs/rfc2822). Приклади:\n\n-   [user@example.com](mailto:user@example.com)\n-   [user@example.com](mailto:user@example.com) [anotheruser@example.com](mailto:anotheruser@example.com)\n-   User[user@example.com](mailto:user@example.com)\n-   User[user@example.com](mailto:user@example.com), Another User[anotheruser@example.com](mailto:anotheruser@example.com)\n\n`subject`\n\nТема листа, що надсилається.\n\n**Застереження**\n\nТема должна удовлетворять правилам стандарта[» RFC 2047](http://www.faqs.org/rfcs/rfc2047)\n\n`message`\n\nНадіслане повідомлення.\n\nКожен рядок має бути відокремлений комбінацією символом CRLF (\\\\r\\\\n). Рядки не повинні бути довшими за 70 символів.\n\n**Застереження**\n\n(Тільки для Windows) Якщо при прямому зверненні PHP до SMTP-сервера на початку рядка виявлена ​​точка, що позначає кінець пропозиції, вона видаляється. Щоб протидіяти цьому, ці входження замінюють подвійною точкою.\n\n```php\n<?php\n\n$text = str_replace(\"\\n.\", \"\\n..\", $text);\n\n?>\n```\n\n`additional_headers` (Необов'язковий)\n\nРядок або масив, які будуть вставлені в кінець заголовка листа.\n\nНайчастіше користуються, щоб додати додаткові заголовки (From, Cc, і Bcc). Додаткові заголовки поділяють комбінацією символів CRLF (\\\\r\\\\n). Якщо у складанні заголовка беруть участь зовнішні дані, їх очищають, щоб унеможливити впровадження небажаних заголовків.\n\nЯкщо передано масив, його ключі будуть іменами заголовка, а значення значеннями.\n\n> **Зауваження** :\n> \n> Отправляемое письмо*повинно* містити заголовок `From`Его устанавливают через параметр`additional_headers`или задают значение по умолчанию в файле php.ini.\n> \n> Якщо заголовок відсутній, буде видано повідомлення про помилку на кшталт `Warning: mail(): \"sendmail_from\" not set in php.ini or custom \"From:\" header missing`Заголовок`From` також визначає заголовок `Return-Path` під час прямого надсилання через SMTP-сервер (лише Windows).\n\n> **Зауваження** :\n> \n> Якщо повідомлення не надсилаються, намагаються вказати лише символ LF (\\\\n). Деякі агенти пересилання повідомлень Unix (особливо [» qmail](http://cr.yp.to/qmail.md)) автоматично замінюють символ перекладу рядка LF на комбінацію символів CRLF (що подвоює символ повернення каретки CR, якщо було зазначено CRLF). Цей захід обирають у крайньому випадку, оскільки він не відповідає стандарту [» RFC 2822](http://www.faqs.org/rfcs/rfc2822)\n\n`additional_params` (Необов'язковий)\n\nПараметр`additional_params` задають, щоб передати додаткові прапори як аргументів командного рядка для програми, налаштованої директиві `sendmail_path` для надсилання листів. Наприклад, цим користуються при надсиланні листа агентом sendmail з аргументом `-f`, щоб встановити адресу відправника конверта.\n\nПараметр автоматично екранується функцією [escapeshellcmd()](function.escapeshellcmd.md), щоб запобігти виконанню команди. Функція [escapeshellcmd()](function.escapeshellcmd.md) виключає виконання команди, але дозволяє додаткові параметри. З міркувань безпеки рекомендовано очищати цей параметр, щоб не допустити додавання небажаних параметрів до команди командної оболонки.\n\nОскільки функція [escapeshellcmd()](function.escapeshellcmd.md) обробляє параметр автоматично, частину символів, дозволених інтернет-стандартами як адреси електронної пошти, не можна вказувати. Функція **mail()** не дозволяє такі символи, тому в програмах, в яких вони потрібні, рекомендовано використовувати альтернативи для їх надсилання (наприклад, фреймворки або бібліотеки).\n\nКористувач, від імені якого запущено веб-сервер, повинен бути доданий в конфігурацію агента sendmail як довіреного користувача, щоб запобігти додаванню заголовка X-Warning в повідомлення, коли відправник конверта встановлено через аргумент (-f). Для користувачів агента sendmail це файл /etc/mail/trusted-users.\n\n### Значення, що повертаються\n\nПовертає \\*\\*`true`\\*\\*якщо лист був прийнятий для передачі, інакше **`false`**\n\nТе, що лист було прийнято передачі, значить, що він досягне одержувача.\n\n### список змін\n\n| Версия | Опис |\n| --- | --- |\n| 7.2.0 | Параметр`additional_headers` тепер приймає масив. |\n\n### Приклади\n\n**Приклад #1 Надсилання листа.**\n\nВиклик функції **mail()** для надсилання простого листа:\n\n```php\n<?php\n\n// Сообщение\n$message = \"Line 1\\r\\nLine 2\\r\\nLine 3\";\n\n// На случай если какая-то строка письма длиннее 70 символов, вызовем функцию wordwrap()\n$message = wordwrap($message, 70, \"\\r\\n\");\n\n// Отправляем\nmail('caffeinated@example.com', 'My Subject', $message);\n\n?>\n```\n\n**Приклад #2 Надсилання листа з додатковими заголовками.**\n\nДодавання простих заголовків, які повідомляють поштовому агенту адреси From та Reply-To:\n\n```php\n<?php\n\n$to      = 'nobody@example.com';\n$subject = 'the subject';\n$message = 'hello';\n$headers = 'From: webmaster@example.com' . \"\\r\\n\" .\n    'Reply-To: webmaster@example.com' . \"\\r\\n\" .\n    'X-Mailer: PHP/' . phpversion();\n\nmail($to, $subject, $message, $headers);\n\n?>\n```\n\n**Приклад #3 Надсилання листа з додатковими заголовками, переданими масивом**\n\nУ цьому прикладі надсилається той же лист, що і в прикладі вище, але додаткові заголовки задаються масивом (доступно з PHP 7.2.0).\n\n```php\n<?php\n\n$to      = 'nobody@example.com';\n$subject = 'the subject';\n$message = 'hello';\n$headers = array(\n    'From' => 'webmaster@example.com',\n    'Reply-To' => 'webmaster@example.com',\n    'X-Mailer' => 'PHP/' . phpversion()\n);\n\nmail($to, $subject, $message, $headers);\n\n?>\n```\n\n**Приклад #4 Надсилання листа з додатковими аргументами командного рядка.**\n\nПараметр`additional_params` вказують, щоб передати додатковий аргумент програмі, налаштованій у директиві `sendmail_path`для отправки писем.\n\n```php\n<?php\n\nmail('nobody@example.com', 'the subject', 'the message', null,\n   '-fwebmaster@example.com');\n\n?>\n```\n\n**Приклад #5 Надсилання HTML-повідомлення**\n\nфункцією **mail()** можна також надіслати електронний лист у форматі HTML.\n\n```php\n<?php\n\n// Несколько получателей\n$to = 'johny@example.com, sally@example.com'; // Обратите внимание на запятую\n\n// Тема письма\n$subject = 'Birthday Reminders for August';\n\n// Текст письма\n$message = '\n<html>\n<head>\n  <title>Birthday Reminders for August</title>\n</head>\n<body>\n  <p>Here are the birthdays upcoming in August!</p>\n  <table>\n    <tr>\n      <th>Person</th><th>Day</th><th>Month</th><th>Year</th>\n    </tr>\n    <tr>\n      <td>Johny</td><td>10th</td><td>August</td><td>1970</td>\n    </tr>\n    <tr>\n      <td>Sally</td><td>17th</td><td>August</td><td>1973</td>\n    </tr>\n  </table>\n</body>\n</html>\n';\n\n// Для отправки HTML-письма должен быть установлен заголовок Content-type\n$headers[] = 'MIME-Version: 1.0';\n$headers[] = 'Content-type: text/html; charset=iso-8859-1';\n\n// Дополнительные заголовки\n$headers[] = 'To: Mary <mary@example.com>, Kelly <kelly@example.com>';\n$headers[] = 'From: Birthday Reminder <birthday@example.com>';\n$headers[] = 'Cc: birthdayarchive@example.com';\n$headers[] = 'Bcc: birthdaycheck@example.com';\n\n// Отправляем\nmail($to, $subject, $message, implode(\"\\r\\n\", $headers));\n\n?>\n```\n\n> **Зауваження** :\n> \n> Для надсилання HTML-повідомлень або інших складних електронних листів рекомендовано встановлення PEAR-пакету [» PEAR::Mail\\_Mime](https://pear.php.net/package/Mail_Mime)\n\n### Примітки\n\n> **Зауваження** :\n> \n> Реалізація SMTP (лише Windows) функції **mail()** Windows багато в чому відрізняється від реалізації в агенті sendmail. По-перше, вона не використовує локальну програму для складання листів, а працює безпосередньо з сокетами, що означає, що необхідний поштовий агент (`MTA`), що очікує з'єднань на сокеті (який може бути як на локальній, чи localhost, так і на віддаленій машині).\n> \n> По-друге, додаткові заголовки на кшталт: `From:` `Cc:` `Bcc:`и`Date:` інтерпретуються насамперед **не** поштовим агентом `MTA`, а PHP.\n> \n> Тому параметр `to` не має бути адресою виду \"Something [someone@example.com](mailto:someone@example.com)Команда mail може неправильно інтерпретувати цю адресу під час передачі даних поштовим агентом MTA.\n\n> **Зауваження** :\n> \n> Функция**mail()** не рекомендована для надсилання великої кількості листів у циклі. Функція відкриває та закриває SMTP-сокет для кожного листа, що не дуже ефективно.\n> \n> Для надсилання великої кількості повідомлень зверніть увагу на пакети [» PEAR::Mail](https://pear.php.net/package/Mail) і [» PEAR::Mail\\_Queue](https://pear.php.net/package/Mail_Queue)\n\n> **Зауваження** :\n> \n> Корисні RFC: [» RFC 1896](http://www.faqs.org/rfcs/rfc1896) [» RFC 2045](http://www.faqs.org/rfcs/rfc2045) [» RFC 2046](http://www.faqs.org/rfcs/rfc2046) [» RFC 2047](http://www.faqs.org/rfcs/rfc2047) [» RFC 2048](http://www.faqs.org/rfcs/rfc2048) [» RFC 2049](http://www.faqs.org/rfcs/rfc2049) і [» RFC 2822](http://www.faqs.org/rfcs/rfc2822)\n\n### Дивіться також\n\n-   [mb\\_send\\_mail()](function.mb-send-mail.md) \\- Надсилає закодований електронний лист\n-   [imap\\_mail()](function.imap-mail.md) \\- Надсилає повідомлення\n-   [» PEAR::Mail](https://pear.php.net/package/Mail)\n-   [» PEAR::Mail\\_Mime](https://pear.php.net/package/Mail_Mime)\n","title":"mail","contentType":2,"navigation":[{"function.ezmlm-hash.md":"« ezmlm\\_hash"},{"book.mailparse.md":"Mailparse »"},{"index.md":"PHP Manual"},{"ref.mail.md":"Пошта"}]}},"__N_SSG":true}