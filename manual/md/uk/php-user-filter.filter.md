- [«php_user_filter](class.php-user-filter.md)
- [php_user_filter::onClose »](php-user-filter.onclose.md)

- [PHP Manual](index.md)
- [php_user_filter](class.php-user-filter.md)
- Викликається, як тільки застосовується фільтр

# php_user_filter::filter

(PHP 5, PHP 7, PHP 8)

php_user_filter::filter — Викликається, як тільки використовується фільтр

### Опис

public **php_user_filter::filter**(
resource `$in`,
resource `$out`,
int `&$consumed`,
bool `$closing`
): int

Цей метод викликається щоразу, коли дані читаються з
приєднаного потоку або записуються в нього (такими функціями, як
[fread()](function.fread.md) або [fwrite()](function.fwrite.md)).

### Список параметрів

`in`
`in` - ресурс, що вказує на `bucket brigade`, яка містить один
або кілька об'єктів `bucket` містять дані, що фільтруються.

`out`
`out` - ресурс, що вказує на інший об'єкт `bucket brigade`, в який
будуть розміщуватися модифіковані бакети.

`consumed`
`consumed`, який повинен *завжди* передаватися за посиланням, повинен
збільшуватися на розмір даних, які фільтр читає та змінює. В
в більшості випадків це означає, що Ви самі збільшуватимете значення
`consumed` на `$bucket->datalen` для кожного `$bucket`.

`closing`
Якщо потік закривається (отже, це останній фільтр у ланцюжку),
аргумент `closing` набуде значення **`true`**.

### Значення, що повертаються

Метод **filter()** повинен повертати одне із трьох значень.

| Значення, що повертається | Опис |
|-------------------------------------|----------- -------------------------------------------------- -------------------------------------------------- ------------|
| **`PSFS_PASS_ON`** | Фільтр відпрацював успішно, дані доступні через аргумент `out` `bucket brigade`. |
| **`PSFS_FEED_ME`** | Фільтр відпрацював успішно, однак доступних для виведення даних немає. Потрібні дані з потоку або попереднього фільтра. |
| **`PSFS_ERR_FATAL`** (за замовчуванням) | Фільтр викликав помилку, що не обробляється, і не може продовжити виконання. |
