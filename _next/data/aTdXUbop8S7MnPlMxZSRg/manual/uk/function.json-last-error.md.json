{"pageProps":{"page":{"slug":"function.json-last-error.md","content":"# json\\_last\\_error\n\n(PHP 5 >= 5.3.0, PHP 7, PHP 8)\n\njson\\_last\\_error — Повертає останню помилку\n\n### Опис\n\n```methodsynopsis\njson_last_error(): int\n```\n\nПовертає останню помилку (якщо вона є), що сталася під час останнього кодування/декодування JSON, якщо під час виклику не використовувався прапор **`JSON_THROW_ON_ERROR`**\n\n### Список параметрів\n\nЦя функція не має параметрів.\n\n### Значення, що повертаються\n\nПовертає ціле значення, яке може бути однією з наступних констант:\n\n**Коди помилок JSON**\n\n| Константа | Значение | Доступность |\n| --- | --- | --- |\n| **`JSON_ERROR_NONE`** | Помилок немає |  |\n| **`JSON_ERROR_DEPTH`** | Досягнуто максимальної глибини стека |  |\n| **`JSON_ERROR_STATE_MISMATCH`** | Неправильний або неправильний JSON |  |\n| **`JSON_ERROR_CTRL_CHAR`** | Помилка символу керування, можливе неправильне кодування |  |\n| **`JSON_ERROR_SYNTAX`** | Синтаксична помилка |  |\n| **`JSON_ERROR_UTF8`** | Некоректні символи UTF-8, можливе неправильне кодування |  |\n| **`JSON_ERROR_RECURSION`** | Одна або кілька зациклених посилань у значенні, що кодується |  |\n| **`JSON_ERROR_INF_OR_NAN`** | Одне чи кілька значень [**`NAN`**](language.types.float.md#language.types.float.nan) або [**`INF`**](function.is-infinite.md) у кодованому значенні |  |\n| **`JSON_ERROR_UNSUPPORTED_TYPE`** | Передано значення з непідтримуваним типом |  |\n| **`JSON_ERROR_INVALID_PROPERTY_NAME`** | Ім'я властивості не може бути закодоване |  |\n| **`JSON_ERROR_UTF16`** | Некоректний символ UTF-16, можливо, некоректно закодований |  |\n\n### Приклади\n\n**Приклад #1 Приклад використання** json\\_last\\_error()\\*\\*\\*\\*\n\n```php\n<?php\n// Верная json-строка\n$json[] = '{\"Organization\": \"PHP Documentation Team\"}';\n\n// Неверная json-строка, которая вызовет синтаксическую ошибку,\n// здесь в качестве кавычек мы используем ' вместо \"\n$json[] = \"{'Organization': 'PHP Documentation Team'}\";\n\n\nforeach ($json as $string) {\n    echo 'Декодируем: ' . $string;\n    json_decode($string);\n\n    switch (json_last_error()) {\n        case JSON_ERROR_NONE:\n            echo ' - Ошибок нет';\n        break;\n        case JSON_ERROR_DEPTH:\n            echo ' - Достигнута максимальная глубина стека';\n        break;\n        case JSON_ERROR_STATE_MISMATCH:\n            echo ' - Некорректные разряды или несоответствие режимов';\n        break;\n        case JSON_ERROR_CTRL_CHAR:\n            echo ' - Некорректный управляющий символ';\n        break;\n        case JSON_ERROR_SYNTAX:\n            echo ' - Синтаксическая ошибка, некорректный JSON';\n        break;\n        case JSON_ERROR_UTF8:\n            echo ' - Некорректные символы UTF-8, возможно неверно закодирован';\n        break;\n        default:\n            echo ' - Неизвестная ошибка';\n        break;\n    }\n\n    echo PHP_EOL;\n}\n?>\n```\n\nРезультат виконання наведеного прикладу:\n\n```\nДекодируем: {\"Organization\": \"PHP Documentation Team\"} - Ошибок нет\nДекодируем: {'Organization': 'PHP Documentation Team'} - Синтаксическая ошибка, некорректный JSON\n```\n\n**Приклад #2 Совместное использование**json\\_last\\_error()**и[json\\_encode()](function.json-encode.md)**\n\n```php\n<?php\n// Некорректная последовательность UTF8\n$text = \"\\xB1\\x31\";\n\n$json  = json_encode($text);\n$error = json_last_error();\n\nvar_dump($json, $error === JSON_ERROR_UTF8);\n?>\n```\n\nРезультат виконання наведеного прикладу:\n\n```\nstring(4) \"null\"\nbool(true)\n```\n\n**Приклад #3**json\\_last\\_error()** і **`JSON_THROW_ON_ERROR`\\*\\*\\*\\*\n\n```php\n<?php\n// Некорректная последовательность UTF8, вызывающая JSON_ERROR_UTF8\njson_encode(\"\\xB1\\x31\");\n\n// Не вызовет ошибки JSON\njson_encode('okay', JSON_THROW_ON_ERROR);\n\n// Глобальное состояние не будет изменено json_encode()\nvar_dump(json_last_error() === JSON_ERROR_UTF8);\n?>\n```\n\nРезультат виконання наведеного прикладу:\n\n```\nbool(true)\n```\n\n### Дивіться також\n\n-   [json\\_last\\_error\\_msg()](function.json-last-error-msg.md) \\- Повертає рядок з повідомленням про помилку останнього дзвінка json\\_encode() або json\\_decode()\n-   [json\\_decode()](function.json-decode.md) \\- Декодує рядок JSON\n-   [json\\_encode()](function.json-encode.md) \\- Повертає JSON-подання даних\n","title":"json\\_last\\_error","contentType":2,"navigation":[{"function.json-last-error-msg.md":"« json\\_last\\_error\\_msg"},{"function.json-validate.md":"json\\_validate »"},{"index.md":"PHP Manual"},{"ref.json.md":"Функції JSON"}]}},"__N_SSG":true}