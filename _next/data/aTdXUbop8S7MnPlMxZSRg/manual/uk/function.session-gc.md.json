{"pageProps":{"page":{"slug":"function.session-gc.md","content":"# session\\_gc\n\n(PHP 7 >= 7.1.0, PHP 8)\n\nsession\\_gc — Складання сміття даних сесії\n\n### Опис\n\n```methodsynopsis\nsession_gc(): int|false\n```\n\n**session\\_gc()** використовується для виконання складання сміття (garbage collection) для даних сесії. За промовчанням PHP виконує засновану на ймовірності складання сміття сесії.\n\nСкладання сміття, що базується на ймовірності в цілому працює, але має кілька проблем. 1) На низькозавантажених сайтах дані сесії можуть бути видалені протягом бажаного часу. 2) На високозавантажених сайтах складання сміття може виконуватися надто часто. 3) Складання сміття виконується під час обробки запиту користувача, що призводить до додаткової затримки користувача.\n\nТому рекомендується виконувати складання сміття на робочих системах періодично, наприклад, використовувати завдання cron у UNIX-подібних системах. При цьому переконайтеся, що вимкнули складання сміття на основі ймовірності, встановивши [session.gc\\_probability](session.configuration.md#ini.session.gc-probability) 0.\n\n### Список параметрів\n\nЦя функція не має параметрів.\n\n### Значення, що повертаються\n\n**session\\_gc()** повертає кількість віддалених даних сесії при успішному виконанні та \\*\\*`false`\\*\\*в случае неудачи.\n\nСтарі обробники сесії не повертають кількість віддалених даних сесії, а лише прапор успіху/невдачі. У цьому випадку, число віддалених даних сесії завжди буде рівним 1, незалежно від фактичної кількості віддалених даних.\n\n### Приклади\n\n**Приклад #1 Приклад використання** session\\_gc()\\*\\* у диспетчерах завдань, таких як cron\\*\\*\n\n```php\n<?php\n// Примечание: Данный скрипт должен выполняться под тем же пользователем процесса веб-сервера.\n\n// Нужна активная сессия для инициализации доступа к хранилищу данных сессии.\nsession_start();\n\n// Принудительное выполнение сборки мусора\nsession_gc();\n\n// Очистка идентификатора сессии\nsession_destroy();\n?>\n```\n\n**Приклад #2 Приклад використання** session\\_gc()\\*\\* у скрипті, доступному користувачеві\\*\\*\n\n```php\n<?php\n// Примечание: session_gc() рекомендуется использовать через скрипт диспетчера задач,\n// но можно использовать и следующим образом.\n\n// Используется для проверки времени последней сборки мусора\n$gc_time = '/tmp/php_session_last_gc';\n$gc_period = 1800;\n\nsession_start();\n// Выполнять сборку мусора только по истечении периода,\n// поскольку вызов session_gc() при каждом запросе является пустой тратой ресурсов.\nif (file_exists($gc_time)) {\n    if (filemtime($gc_time) < time() - $gc_period) {\n        session_gc();\n        touch($gc_time);\n    }\n} else {\n    touch($gc_time);\n}\n?>\n```\n\n### Дивіться також\n\n-   [session\\_start()](function.session-start.md) \\- Стартує нову сесію, або відновлює існуючу\n-   [session\\_destroy()](function.session-destroy.md) \\- Знищує всі дані сесії\n-   [session.gc\\_probability](session.configuration.md#ini.session.gc-probability)\n","title":"session\\_gc","contentType":2,"navigation":[{"function.session-encode.md":"« session\\_encode"},{"function.session-get-cookie-params.md":"session\\_get\\_cookie\\_params »"},{"index.md":"PHP Manual"},{"ref.session.md":"Функції для роботи із сесіями"}]}},"__N_SSG":true}