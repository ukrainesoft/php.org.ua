{"pageProps":{"page":{"slug":"mysqli.poll.md","content":"# mysqli::poll\n\n# mysqli\\_poll\n\n(PHP 5 >= 5.3.0, PHP 7, PHP 8)\n\nmysqli::poll -- mysqli\\_poll — Опитування підключень\n\n### Опис\n\nОб'єктно-орієнтований стиль\n\n```methodsynopsis\npublic static mysqli::poll(    ?array &$read,    ?array &$error,    array &$reject,    int $seconds,    int $microseconds = 0): int|false\n```\n\nПроцедурний стиль\n\n```methodsynopsis\nmysqli_poll(    ?array &$read,    ?array &$error,    array &$reject,    int $seconds,    int $microseconds = 0): int|false\n```\n\nОпитування підключень. Метод може використовуватись як [статичний](language.oop5.static.md)\n\n> **Зауваження** :\n> \n> Доступно лише з модулем [mysqlnd](book.mysqlnd.md)\n\n### Список параметрів\n\n`read`\n\nСписок з'єднань для перевірки наявності результатів, які можна прочитати.\n\n`error`\n\nСписок з'єднань, на яких відбулися помилки, наприклад, не вдався запит або з'єднання було втрачено.\n\n`reject`\n\nСписок з'єднань, які були відхилені, тому що на них не було запущено асинхронний запит, з яким функція може отримати результат опитування.\n\n`seconds`\n\nМаксимальна кількість секунд очікування має бути невід'ємною.\n\n`microseconds`\n\nМаксимальна кількість мілісекунд очікування має бути невід'ємною.\n\n### Значення, що повертаються\n\nПовертає кількість готових до роботи з'єднань у разі успішного виконання, \\*\\*`false`\\*\\*в случае неудачи.\n\n### Приклади\n\n**Приклад #1 Приклад використання** mysqli\\_poll()\\*\\*\\*\\*\n\n```php\n<?php\n$link1 = mysqli_connect();\n$link1->query(\"SELECT 'test'\", MYSQLI_ASYNC);\n$all_links = array($link1);\n$processed = 0;\ndo {\n    $links = $errors = $reject = array();\n    foreach ($all_links as $link) {\n        $links[] = $errors[] = $reject[] = $link;\n    }\n    if (!mysqli_poll($links, $errors, $reject, 1)) {\n        continue;\n    }\n    foreach ($links as $link) {\n        if ($result = $link->reap_async_query()) {\n            print_r($result->fetch_row());\n            if (is_object($result))\n                mysqli_free_result($result);\n        } else die(sprintf(\"Ошибка MySQLi: %s\", mysqli_error($link)));\n        $processed++;\n    }\n} while ($processed < count($all_links));\n?>\n```\n\nРезультат виконання наведеного прикладу:\n\n```\nArray\n(\n    [0] => test\n)\n```\n\n### Дивіться також\n\n-   [mysqli\\_query()](mysqli.query.md) \\- Виконує запит до бази даних\n-   [mysqli\\_reap\\_async\\_query()](mysqli.reap-async-query.md) \\- Отримання результату асинхронного запиту\n","title":"mysqli::poll","contentType":2,"navigation":[{"mysqli.ping.md":"« mysqli::ping"},{"mysqli.prepare.md":"mysqli::prepare »"},{"index.md":"PHP Manual"},{"class.mysqli.md":"mysqli"}]}},"__N_SSG":true}