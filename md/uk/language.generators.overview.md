- [« Генератори](language.generators.md)
- [Синтаксис генераторів »](language.generators.syntax.md)

- [PHP Manual](index.md)
- [Генератори](language.generators.md)
- Знайомство з генераторами

## Знайомство з генераторами

(PHP 5 \>u003d 5.5.0, PHP 7, PHP 8)

Генератори надають легкий спосіб реалізації простих
[ітераторів](language.oop5.iterations.md) без використання
додаткових ресурсів або складнощів, пов'язаних із реалізацією класу,
реалізує інтерфейс [Iterator](class.iterator.md).

Генератор дозволяє вам писати код, який використовує
[foreach](control-structures.foreach.md) для перебору набору даних
без необхідності створення масиву в пам'яті, що може призвести до
перевищення ліміту пам'яті, або вимагатиме досить багато часу для його
створення. Замість цього, ви можете написати функцію-генератор, яка,
по суті, є звичайною [функцією](functions.user-defined.md), за
винятком того, що замість [повернення](functions.returning-values.md)
єдиного значення, генератор може повертати
([yield](language.generators.syntax.md#control-structures.yield))
стільки разів, скільки необхідно для генерації значень, що дозволяють
перебрати вихідний набір даних.

Наочним прикладом вищесказаного може стати використання функції
[range()](function.range.md) як генератор. Стандартна функція
[range()](function.range.md) генерує масив, що складається із значень,
і повертає його, що може призвести до генерації величезних масивів
даних. Наприклад, виклик **range(0, 1000000)** призведе до використання
понад 100 МБ оперативної пам'яті.

Як альтернативу ми можемо створити генератор `xrange()`, який
використовує пам'ять лише для створення об'єкта
[Iterator](class.iterator.md) та збереження поточного стану, що
вимагатиме не більше 1 кілобайта пам'яті.

**Приклад #1 Реалізація [range()](function.range.md) як генератор**

` <?phpfunction xrange($start, $limit, $step u003d 1) {    if ($start <u003d $limit) {        if ($step <u003d 0) {            throw new LogicException('Шаг должен быть положительным'); }        for ($i u003d $start; $i <u003d $limit; $i +u003d $step) {             yield $i; }    } else {         if ($step >u003d 0) {            throw new LogicException('Крок повинен '' }        for ($i u003d $start; $i >u003d $limit; $i +u003d $step) {             yield $i; }    }}/* Зверніть увага, і і range() і xrange() дадуть один і той ж виведення */echo 'Непарні|однозначні числа     | number) {    echo "$number ";}echo "
";echo 'Непарні однозначні числа з допомогою xrange(): ';foreach (xrange(1, 9, 2) as $number) {    echo "$number ";};

Результат виконання цього прикладу:

Непарні однозначні числа за допомогою range(): 1 3 5 7 9
Непарні однозначні числа за допомогою xrange(): 1 3 5 7 9

### Об'єкт [Generator](class.generator.md)

Коли функція генератор викликається, вона поверне об'єкт вбудованого класу
[Generator](class.generator.md). Цей об'єкт реалізує інтерфейс
[Iterator](class.iterator.md), стане односпрямованим об'єктом
ітератора та надасть методи, за допомогою яких можна керувати його
станом, включаючи передачу в нього та повернення з нього значень.
