{"pageProps":{"page":{"slug":"curlfile.construct.md","content":"# CURLFile::\\_\\_construct\n\n# curl\\_file\\_create\n\n(PHP 5 >= 5.5.0, PHP 7, PHP 8)\n\nCURLFile::\\_\\_construct -- curl\\_file\\_create — Створює об'єкт CURLFile\n\n### Опис\n\nОб'єктно-орієнтований стиль\n\npublic **CURLFile::\\_\\_construct**(string`$filename`, ?string`$mime_type` **`null`**, ?string`$posted_filename` **`null`**) .\n\nПроцедурний стиль\n\n```methodsynopsis\ncurl_file_create(string $filename, ?string $mime_type = null, ?string $posted_filename = null): CURLFile\n```\n\nСтворює об'єкт [CURLFile](class.curlfile.md), що використовується для завантаження файлу з використанням опції **`CURLOPT_POSTFIELDS`**\n\n### Список параметрів\n\n`filename`\n\nШлях до файлу, який буде завантажено\n\n`mime_type`\n\nMime-тип файлу.\n\n`posted_filename`\n\nІм'я файлу при надсиланні методом POST.\n\n### Значення, що повертаються\n\nПовертає об'єкт типу [CURLFile](class.curlfile.md)\n\n### список змін\n\n| Версия | Опис |\n| --- | --- |\n| 8.0.0 | `mime_type`и`posted_filename` тепер припускають значення null; раніше значенням за умовчанням був |\n\n### Приклади\n\n**Приклад #1 Приклад використання** CURLFile::\\_\\_construct()\\*\\*\\*\\*\n\nОб'єктно-орієнтований стиль\n\n```php\n<?php\n/* http://example.com/upload.php:\n<?php var_dump($_FILES); ?>\n*/\n\n// Создаём дескриптор cURL\n$ch = curl_init('http://example.com/upload.php');\n\n// Создаём объект CURLFile\n$cfile = new CURLFile('cats.jpg','image/jpeg','test_name');\n\n// Устанавливаем данные для POST\n$data = array('test_file' => $cfile);\ncurl_setopt($ch, CURLOPT_POST,1);\ncurl_setopt($ch, CURLOPT_POSTFIELDS, $data);\n\n// Запускаем дескриптор на выполнение\ncurl_exec($ch);\n?>\n```\n\nПроцедурний стиль\n\n```php\n<?php\n/* http://example.com/upload.php:\n<?php var_dump($_FILES); ?>\n*/\n\n// Создаём дескриптор cURL\n$ch = curl_init('http://example.com/upload.php');\n\n// Создаём объект CURLFile\n$cfile = curl_file_create('cats.jpg','image/jpeg','test_name');\n\n// Устанавливаем данные для POST\n$data = array('test_file' => $cfile);\ncurl_setopt($ch, CURLOPT_POST,1);\ncurl_setopt($ch, CURLOPT_POSTFIELDS, $data);\n\n// Запускаем дескриптор на выполнение\ncurl_exec($ch);\n?>\n```\n\nРезультат виконання наведеного прикладу:\n\n```\narray(1) {\n  [\"test_file\"]=>\n  array(5) {\n    [\"name\"]=>\n    string(9) \"test_name\"\n    [\"type\"]=>\n    string(10) \"image/jpeg\"\n    [\"tmp_name\"]=>\n    string(14) \"/tmp/phpPC9Kbx\"\n    [\"error\"]=>\n    int(0)\n    [\"size\"]=>\n    int(46334)\n  }\n}\n```\n\n**Приклад #2 Приклад використання** CURLFile::\\_\\_construct()\\*\\* для завантаження кількох файлів\\*\\*\n\nОб'єктно-орієнтований стиль\n\n```php\n<?php\n$request = curl_init('http://www.example.com/upload.php');\ncurl_setopt($request, CURLOPT_POST, true);\ncurl_setopt($request, CURLOPT_SAFE_UPLOAD, true);\ncurl_setopt($request, CURLOPT_POSTFIELDS, [\n    'blob[0]' => new CURLFile(realpath('first-file.jpg'), 'image/jpeg'),\n    'blob[1]' => new CURLFile(realpath('second-file.txt'), 'text/plain'),\n    'blob[2]' => new CURLFile(realpath('third-file.exe'), 'application/octet-stream'),\n]);\ncurl_setopt($request, CURLOPT_RETURNTRANSFER, true);\n\necho curl_exec($request);\n\nvar_dump(curl_getinfo($request));\n\ncurl_close($request);\n```\n\nПроцедурний стиль\n\n```php\n<?php\n// procedural\n$request = curl_init('http://www.example.com/upload.php');\ncurl_setopt($request, CURLOPT_POST, true);\ncurl_setopt($request, CURLOPT_SAFE_UPLOAD, true);\ncurl_setopt($request, CURLOPT_POSTFIELDS, [\n    'blob[0]' => curl_file_create(realpath('first-file.jpg'), 'image/jpeg'),\n    'blob[1]' => curl_file_create(realpath('second-file.txt'), 'text/plain'),\n    'blob[2]' => curl_file_create(realpath('third-file.exe'), 'application/octet-stream'),\n]);\ncurl_setopt($request, CURLOPT_RETURNTRANSFER, true);\n\necho curl_exec($request);\n\nvar_dump(curl_getinfo($request));\n\ncurl_close($request);\n```\n\nРезультат виконання наведеного прикладу:\n\n```\narray(26) {\n  [\"url\"]=>\n  string(31) \"http://www.example.com/upload.php\"\n  [\"content_type\"]=>\n  string(24) \"text/html; charset=UTF-8\"\n  [\"http_code\"]=>\n  int(200)\n  [\"header_size\"]=>\n  int(198)\n  [\"request_size\"]=>\n  int(196)\n  [\"filetime\"]=>\n  int(-1)\n  [\"ssl_verify_result\"]=>\n  int(0)\n  [\"redirect_count\"]=>\n  int(0)\n  [\"total_time\"]=>\n  float(0.060062)\n  [\"namelookup_time\"]=>\n  float(0.028575)\n  [\"connect_time\"]=>\n  float(0.029011)\n  [\"pretransfer_time\"]=>\n  float(0.029121)\n  [\"size_upload\"]=>\n  float(3230730)\n  [\"size_download\"]=>\n  float(811)\n  [\"speed_download\"]=>\n  float(13516)\n  [\"speed_upload\"]=>\n  float(53845500)\n  [\"download_content_length\"]=>\n  float(811)\n  [\"upload_content_length\"]=>\n  float(3230730)\n  [\"starttransfer_time\"]=>\n  float(0.030355)\n  [\"redirect_time\"]=>\n  float(0)\n  [\"redirect_url\"]=>\n  string(0) \"\"\n  [\"primary_ip\"]=>\n  string(13) \"0.0.0.0\"\n  [\"certinfo\"]=>\n  array(0) {\n  }\n  [\"primary_port\"]=>\n  int(80)\n  [\"local_ip\"]=>\n  string(12) \"0.0.0.0\"\n  [\"local_port\"]=>\n  int(34856)\n}\n```\n\n### Дивіться також\n\n-   [curl\\_setopt()](function.curl-setopt.md) \\- Встановлює параметр для передачі cURL\n","title":"CURLFile::\\_\\_construct","contentType":2,"navigation":[{"class.curlfile.md":"« CURLFile"},{"curlfile.getfilename.md":"CURLFile::getFilename »"},{"index.md":"PHP Manual"},{"class.curlfile.md":"CURLFile"}]}},"__N_SSG":true}