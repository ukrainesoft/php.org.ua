{"pageProps":{"page":{"slug":"splfileobject.flock.md","content":"# SplFileObject::flock\n\n(PHP 5 >= 5.1.0, PHP 7, PHP 8)\n\nSplFileObject::flock — Портоване блокування файлу\n\n### Опис\n\n```methodsynopsis\npublic SplFileObject::flock(int $operation, int &$wouldBlock = null): bool\n```\n\nБлокує або розблокує файл тим же портованим способом, що і [flock()](function.flock.md)\n\n### Список параметрів\n\n`operation`\n\n`operation` може приймати такі значення:\n\n-   \\*\\*`LOCK_SH`\\*\\*для отримання блокування, що розділяється (читання).\n-   \\*\\*`LOCK_EX`\\*\\*для отримання ексклюзивного блокування (запис).\n-   \\*\\*`LOCK_UN`\\*\\*для зняття блокування (розділюваного або ексклюзивного).\n\nТакож можна додати **`LOCK_NB`** як бітова маска до однієї з вищевказаних операцій, якщо [flock()](function.flock.md) під час спроби блокування не повинен блокуватися.\n\n`wouldBlock`\n\nБудет установлен\\*\\*`true`\\*\\*, якщо блокування буде блокуючим (код помилки EWOULDBLOCK).\n\n### Значення, що повертаються\n\nПовертає **`true`** у разі успішного виконання або \\*\\*`false`\\*\\*в случае возникновения ошибки.\n\n### Приклади\n\n**Приклад #1 Приклад використання** SplFileObject::flock()\\*\\*\\*\\*\n\n```php\n<?php\n$file = new SplFileObject(\"/tmp/lock.txt\", \"w\");\nif ($file->flock(LOCK_EX)) { // выполняем эксклюзивную блокировку\n    $file->ftruncate(0);     // очищаем файл\n    $file->fwrite(\"Что-нибудь пишем сюда\\n\");\n    $file->flock(LOCK_UN);   // снимаем блокировку\n} else {\n    echo \"Не удалось получить блокировку!\";\n}\n?>\n```\n\n### Дивіться також\n\n-   [flock()](function.flock.md) \\- Портоване консультативне блокування файлів\n","title":"SplFileObject::flock","contentType":2,"navigation":[{"splfileobject.fgetss.md":"« SplFileObject::fgetss"},{"splfileobject.fpassthru.md":"SplFileObject::fpassthru »"},{"index.md":"PHP Manual"},{"class.splfileobject.md":"SplFileObject"}]}},"__N_SSG":true}