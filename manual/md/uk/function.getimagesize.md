- [«gd_info](function.gd-info.md)
- [getimagesizefromstring »](function.getimagesizefromstring.md)

- [PHP Manual](index.md)
- [Функції GD та функції для роботи із зображеннями](ref.image.md)
- Отримання розміру зображення

# getimagesize

(PHP 4, PHP 5, PHP 7, PHP 8)

getimagesize — Отримання розміру зображення

### Опис

**getimagesize**(string `$filename`, array `&$image_info` u003d **`null`**):
array\|false

Функція **getimagesize()** визначить розмір будь-якого заданого,
підтримуваного зображення та поверне цей розмір разом з типом файлу та
текстовим рядком `height/width`, який можна буде використати
всередині тега HTML `IMG`, а також поверне відповідний тип вмісту
HTTP.

Також **getimagesize()** може повернути додаткові відомості про
зображенні через аргумент `image_info`.

**Застереження**

Функція очікує, що filename є коректним файлом зображення.
Якщо буде передано файл, який не містить зображення, він може бути
некоректно інтерпретований як зображення та функція завершиться
успішно, але масив у своїй міститиме безглузді значення.

Не використовуйте **getimagesize()** для перевірки того, що файл є
зображенням. Для цих цілей використовуйте модуль
[Fileinfo](book.fileinfo.md).

> **Примітка**: Зверніть увагу на те, що окремі частини JPC
> і JP2 зображення можуть мати різну глибину кольору. В цьому випадку в
> параметр "bits" буде стояти максимальне значення з усіх
> виявлених. Також JP2 файли можуть містити
> `кілька кодових потоків JPEG 2000`. В такому випадку
> **getimagesize()** поверне значення першого такого потоку, який
> буде виявлено функцією в корені файлу.

> **Примітка**: Відомості про іконки витягуються з іконки з найбільшим
> бітрейтом.

> **Примітка**: Зображення GIF складаються з одного або декількох
> кадри, де кожен кадр може займати лише частину зображення.
> Розмір зображення, що повертається **getimagesize()**, буде відображатися
> загальним розміром (прочитаним із дескриптора логічного екрана).

### Список параметрів

`filename`
Цей аргумент задає файл, відомості про який витягуватиметься. Це
може бути локальний чи віддалений (залежить від конфігурації) файл.
Передача даних віддаленого файлу повинна здійснюватися одним із
[Підтримуваних потоків](wrappers.md).

`image_info`
Цей необов'язковий аргумент дозволяє витягти деякі розширені
відомості із файлу зображення. На даний момент можна отримувати різні
JPG APP маркери у вигляді асоціативного масиву. Деякі програми
використовують ці маркери для вбудовування тексту на картинку. Найбільш часто
вбудовують [»IPTC](http://www.iptc.org/) відомості в APP13 маркер. Для
перетворення двійкових даних APP13 маркера на щось легкочитане
можна скористатися функцією [iptcparse()](function.iptcparse.md).

> **Примітка**:
>
> `image_info` підтримує лише файли JFIF.

### Значення, що повертаються

Повертає масив із 7 елементів. Не всі типи зображень містять
елементи з каналами (`channels`) та бітрейтом (`bits`).

Індекси 0 і 1 містять ширину та висоту зображення.

> **Примітка**:
>
> Деякі формати файлів можуть зберігати кілька зображень чи не
> містити зображення взагалі. У таких випадках **getimagesize()** не
> Ви можете визначити розмір зображення. **getimagesize()** поверне нулі в
> якість значень висоти та ширини.

Індекс 2 містить одну з констант типу зображення
[IMAGETYPE_XXX](image.constants.md).

Індекс 3 містить рядок зі значеннями ширини та висоти зображення
`heightu003d"yyy" widthu003d"xxx"`, яка може бути використана всередині IMG
тега.

`mime` - відповідний MIME-тип зображення. Ці відомості використовуються
для коректної обробки зображення на основі заголовка
`Content-type`:

**Приклад #1 **getimagesize()** та MIME типи**

` <?php$size u003d getimagesize($filename);$fp u003dfopen($filename, "rb");if ($size && $fp) {    header("Content-type: {$size['mime']] }"); fpassthru ($ fp); exit;} else {    // помилка}?> `

`channels` приймає значення 3 для RGB картинок та 4 для CMYK.

`bits` - глибина кольору, число біт кожного кольору.

Для деяких типів зображень наявність значень `channels` та `bits`
може збити з пантелику. Наприклад, GIF завжди використовує 3 канали на
піксель, але глибину кольору неможливо обчислити для анімованих GIF
зображень із загальною таблицею кольорів.

У разі помилки функція поверне **`false`**.

### Помилки

Якщо доступ до файлу `filename` неможливий, **getimagesize()** викличе
помилку рівня **`E_WARNING`**. У разі виникнення помилки читання
файлу **getimagesize()** викликає помилку рівня **`E_NOTICE`**.

### Список змін

| Версія | Опис |
|--------|---------------------------|
| 7.1.0 | Додано підтримку WebP. |

### Приклади

**Приклад #2 Приклад використання **getimagesize()****

` <?phplist($width, $height, $type, $attr) u003d getimagesize("img/flag.jpg");echo "<img srcu003d\"img/flag.jpg\" $attr altu003d\" приклад getimagesize()\" />";?> `

**Приклад #3 getimagesize (URL)**

` <?php$size u003d getimagesize("http://www.example.com/gifs/logo.gif");// якщо в імені файла є пробіли, врахуйте це належним образом$size u003d getimagesi /www.example.com/gifs/lo%20go.gif");?> `

**Приклад #4 getimagesize() повертає IPTC**

` <?php$size u003d getimagesize("testimg.jpg", $info);if (isset($info["APP13"])) {    $iptc u003d iptcparse($info["APP13"]); var_dump($iptc);}?> `

### Примітки

> **Примітка**:
>
> Ця функція не потребує бібліотеки GD.

### Дивіться також

- [image_type_to_mime_type()](function.image-type-to-mime-type.md) -
Отримання Mime-типу для типу зображення, що повертається функціями
getimagesize, exif_read_data, exif_thumbnail, exif_imagetype
- [exif_imagetype()](function.exif-imagetype.md) - Determine the
type of an image
- [exif_read_data()](function.exif-read-data.md) - Читає заголовки
EXIF із файлів зображень
- [exif_thumbnail()](function.exif-thumbnail.md) - Отримує
вбудоване прев'ю зображення
- [imagesx()](function.imagesx.md) - Отримання ширини зображення
- [imagesy()](function.imagesy.md) - Отримання висоти зображення
