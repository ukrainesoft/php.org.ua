{"pageProps":{"page":{"slug":"class.evtimer.md","content":"# Клас EvTimer\n\n(PECL ev >= 0.2.0)\n\n## Вступ\n\nСпостерігачі **EvTimer** - це звичайні відносні таймери, які створюють подію за заданий час і, опціонально, періодично повторюють її через задані інтервали часу.\n\nТаймери базуються на реальному часі, тобто якщо задати таймер з повторами раз на годину і скинути системний годинник на *Січень минулого року*, то таймер буде також спрацьовувати через (грубо) годину. \"Грубо\" тому, що відстежити стрибки часу досить складно, і деякі неточності неминучі.\n\nCallback-функція гарантовано запуститься тільки після того, як пройде перевищення заданого часу очікування (не рівно в той же момент, тому що на системах з годинником з низькою роздільною здатністю можуть спостерігатися невеликі затримки). Якщо кілька таймерів будуть готові спрацювати в ту саму ітерацію подієвого циклу, то callback-функції спостерігачів будуть запущені в порядку часу спрацьовування та з урахуванням пріоритету (але це не працює, якщо callback-функції викликають [EvLoop::run()](evloop.run.md)рекурсивно).\n\nСамі по собі таймери намагаються всіма силами уникнути накопичення помилки, тобто якщо таймер налаштований спрацьовувати кожні **`10`** секунд, то зазвичай він спрацьовує точно з **`10`** секундним інтервалом. Однак якщо скрипт не встигає за таймером, оскільки його робота займає більше **`10`** секунд, то таймер спрацює не частіше одного разу за ітерацію подієвого циклу.\n\n## Огляд класів\n\n```classsynopsis\n\n     \n    \n    \n    \n     \n      class EvTimer\n     \n     \n      extends\n       EvWatcher\n     \n     {\n    \n    /* Свойства */\n    \n     public\n      $repeat;\n\n    public\n      $remaining;\n\n    /* Наследуемые свойства */\n    public\n      $is_active;\npublic\n      $data;\npublic\n      $is_pending;\npublic\n      $priority;\n\n    /* Методы */\n    \n   public\n   __construct(    \n    float\n     $after\n   ,    \n    float\n     $repeat\n   ,    \n    callable\n     $callback\n   ,    \n    mixed\n     $data\n     = null\n   ,    \n    int\n     $priority\n     = 0\n   )\n\n    public\n   again(): void\nfinal\n   public\n   static\n   createStopped(    \n    float\n     $after\n   ,    \n    float\n     $repeat\n   ,    \n    callable\n     $callback\n   ,    \n    mixed\n     $data\n     = null\n   ,    \n    int\n     $priority\n     = 0\n   ): EvTimer\npublic\n   set(\n    float\n     $after\n   , \n    float\n     $repeat\n   ): void\n\n    /* Наследуемые методы */\n    public\n   EvWatcher::clear(): int\npublic\n   EvWatcher::feed(\n    int\n     $revents\n   ): void\npublic\n   EvWatcher::getLoop(): EvLoop\npublic\n   EvWatcher::invoke(\n    int\n     $revents\n   ): void\npublic\n   EvWatcher::keepalive(\n    bool\n     $value\n    = ?): bool\npublic\n   EvWatcher::setCallback(\n    callable\n     $callback\n   ): void\npublic\n   EvWatcher::start(): void\npublic\n   EvWatcher::stop(): void\n\n   }\n```\n\n## Властивості\n\nrepeat\n\nЯкщо одно \\*\\*`0.0`\\*\\*таймер автоматично зупиниться, коли буде перевищено час очікування. Якщо більше нуля, таймер автоматично перейде в режим нескінченного повторення через задані інтервали, поки ви його самостійно не зупините.\n\nremaining\n\nПовертає час, що залишився до спрацювання таймера. Якщо таймер активний, то цей час буде вважатися щодо часу поточного подієвого циклу, а якщо таймер не активний, то він дорівнює сконфігурованому значенню часу очікування.\n\nТобто після того, як створено екземпляр **EvTimer**с`after` рівним \\*\\*`5.0`\\*\\*и`repeat` рівним **`7.0`**, remaining поверне **`5.0`**. Коли таймер запуститься та пройде 1 секунда, remaining поверне **`4.0`**. . коли таймер закінчиться і буде перезапущено, буде \"грубо\" повернуто **`7.0`** (Зазвичай трохи менше, тому що запуск callback-функції займає час) і т.д.\n\n## Зміст\n\n-   [EvTimer::again](evtimer.again.md) \\- Перезапускає таймер спостерігача\n-   [EvTimer::\\_\\_construct](evtimer.construct.md) \\- Конструктор об'єкта спостерігача EvTimer\n-   [EvTimer::createStopped](evtimer.createstopped.md) \\- Створює зупинений спостерігач EvTimer\n-   [EvTimer::set](evtimer.set.md)— Налаштовує спостерігача\n","title":"Клас EvTimer","contentType":2,"navigation":[{"evstat.stat.md":"« EvStat::stat"},{"evtimer.again.md":"EvTimer::again »"},{"index.md":"PHP Manual"},{"book.ev.md":"Ev"}]}},"__N_SSG":true}