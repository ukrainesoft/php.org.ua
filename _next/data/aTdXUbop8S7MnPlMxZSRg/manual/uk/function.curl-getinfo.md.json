{"pageProps":{"page":{"slug":"function.curl-getinfo.md","content":"# curl\\_getinfo\n\n(PHP 4 >= 4.0.4, PHP 5, PHP 7, PHP 8)\n\ncurl\\_getinfo — Отримує інформацію про конкретну передачу\n\n### Опис\n\n```methodsynopsis\ncurl_getinfo(CurlHandle $handle, ?int $option = null): mixed\n```\n\nОтримує інформацію про останню передачу.\n\n### Список параметрів\n\n`handle`\n\nДескриптор cURL, отриманий з [curl\\_init()](function.curl-init.md)\n\n`option`\n\nКонстанта зі списку:\n\n| Опция | Опис |\n| --- | --- |\n| **`CURLINFO_CAINFO`** | Шлях до вбудованого сертифіката центру засвідчення за промовчанням |\n| **`CURLINFO_CAPATH`** | Рядок шляху до вбудованого сертифіката засвідчувального центру за промовчанням |\n| **`CURLINFO_EFFECTIVE_URL`** | Остання ефективна URL |\n| **`CURLINFO_HTTP_CODE`** | Останній код відповіді. Починаючи з cURL 7.10.8, це застарілий псевдонім опції. **`CURLINFO_RESPONSE_CODE`** |\n| **`CURLINFO_FILETIME`** | Час отримання документа по годиннику віддаленого сервера, якщо параметр **`CURLOPT_FILETIME`** включений для дескриптора cURL; якщо повертається значення -1, час отримання документа невідомо |\n| **`CURLINFO_TOTAL_TIME`** | Загальний час транзакції за секунди для останньої передачі |\n| **`CURLINFO_NAMELOOKUP_TIME`** | Час у секундах, витрачений на дозвіл імені |\n| **`CURLINFO_CONNECT_TIME`** | Час у секундах, витрачений на встановлення з'єднання |\n| **`CURLINFO_PRETRANSFER_TIME`** | Час у секундах від запуску до моменту початку передачі файлу |\n| **`CURLINFO_STARTTRANSFER_TIME`** | Час у секундах від запуску передачі до отримання першого байта |\n| **`CURLINFO_REDIRECT_COUNT`** | Число перенаправлень, якщо параметр **`CURLOPT_FOLLOWLOCATION`** включений для дескриптора cURL |\n| **`CURLINFO_REDIRECT_TIME`** | Загальний час у секундах, який був потрібний для всіх кроків перенаправлення до запуску останньої транзакції, якщо параметр **`CURLOPT_FOLLOWLOCATION`** включений для дескриптора cURL |\n| **`CURLINFO_REDIRECT_URL`** | Якщо параметр дескриптора **`CURLOPT_FOLLOWLOCATION`** відключено: URL-адресу перенаправлення, знайдену в останній транзакції, яку наступного разу потрібно запросити вручну. Якщо параметр **`CURLOPT_FOLLOWLOCATION`** увімкнено: порожнє значення. Тоді URL-адреса перенаправлення доступна в опції **`CURLINFO_EFFECTIVE_URL`** |\n| **`CURLINFO_PRIMARY_IP`** | IP-адреса останнього з'єднання |\n| **`CURLINFO_PRIMARY_PORT`** | Порт призначення останнього з'єднання |\n| **`CURLINFO_LOCAL_IP`** | Локальна (вихідна) IP-адреса останнього з'єднання |\n| **`CURLINFO_LOCAL_PORT`** | Локальний (вихідний) порт останнього з'єднання |\n| **`CURLINFO_SIZE_UPLOAD`** | Загальна кількість переданих байтів |\n| **`CURLINFO_SIZE_DOWNLOAD`** | Загальна кількість отриманих байтів |\n| **`CURLINFO_SPEED_DOWNLOAD`** | Середня швидкість отримання даних |\n| **`CURLINFO_SPEED_UPLOAD`** | Середня швидкість передачі даних |\n| **`CURLINFO_HEADER_SIZE`** | Сумарний розмір отриманих заголовків |\n| **`CURLINFO_HEADER_OUT`** | Надісланий рядок запиту. Щоб цей параметр працював, потрібно додати опцію **`CURLINFO_HEADER_OUT`** у дескриптор через виклик функції [curl\\_setopt()](function.curl-setopt.md) |\n| **`CURLINFO_REFERER`** | Заголовок реферера |\n| **`CURLINFO_REQUEST_SIZE`** | Сумарний розмір відправлених запитів, працює поки що тільки для HTTP-запитів |\n| **`CURLINFO_RETRY_AFTER`** | Інформація із заголовка `Retry-After:` або нуль, якщо допустимого заголовка не було |\n| **`CURLINFO_SSL_VERIFYRESULT`** | Результат перевірки сертифікації SSL, запитаний з параметром **`CURLOPT_SSL_VERIFYPEER`** |\n| **`CURLINFO_CONTENT_LENGTH_DOWNLOAD`** | Розмір отриманих даних, прочитаний із заголовка `Content-Length:` |\n| **`CURLINFO_CONTENT_LENGTH_UPLOAD`** | Розмір переданих даних |\n| **`CURLINFO_CONTENT_TYPE`** | Значення заголовка `Content-Type:` запитаного документа. Значення NULL вказує, що сервер не надіслав допустимий заголовок `Content-Type:` |\n| **`CURLINFO_PRIVATE`** | Закриті дані, пов'язані з поточним дескриптором cURL, які раніше були встановлені функцією [curl\\_setopt()](function.curl-setopt.md)с параметром\\*\\*`CURLOPT_PRIVATE`\\*\\* |\n| **`CURLINFO_PROXY_ERROR`** | Детальний код помилки проксі-сервера (SOCKS), коли остання передача повернула помилку **`CURLE_PROXY`**. . Значення, що повертається, дорівнюватиме значенню константи з сімейства **`CURLPX_*`**. . Код помилки дорівнюватиме значенню константи \\*\\*`CURLPX_OK`\\*\\*якщо код відповіді не був доступний |\n| **`CURLINFO_RESPONSE_CODE`** | Останній код відповіді |\n| **`CURLINFO_HTTP_CONNECTCODE`** | Код відповіді на запит CONNECT |\n| **`CURLINFO_HTTPAUTH_AVAIL`** | Бітова маска доступного методу або методів аутентифікації на основі даних попередньої відповіді |\n| **`CURLINFO_PROXYAUTH_AVAIL`** | Бітова маска доступного методу або методів аутентифікації проксі-сервера на основі даних попередньої відповіді |\n| **`CURLINFO_OS_ERRNO`** | Значення змінної Errno у разі збою з'єднання. Номер помилки залежить від ОС та особливостей системи |\n| **`CURLINFO_NUM_CONNECTS`** | Кількість з'єднань, які curl довелося створити, що успішно виконати попередню передачу |\n| **`CURLINFO_SSL_ENGINES`** | Список підтримуваних криптодвижків бібліотеки OpenSSL |\n| **`CURLINFO_COOKIELIST`** | Відомі куки |\n| **`CURLINFO_FTP_ENTRY_PATH`** | Шлях входу на FTP-сервер |\n| **`CURLINFO_APPCONNECT_TIME`** | Час у секундах від запуску до встановлення SSL- або SSH-підключення або рукостискання з віддаленим хостом |\n| **`CURLINFO_CERTINFO`** | Ланцюжок сертифікатів TLS |\n| **`CURLINFO_CONDITION_UNMET`** | Інформація про невиконані за відведений час умови |\n| **`CURLINFO_RTSP_CLIENT_CSEQ`** | Наступний CSeq-заголовок RTSP-клієнта |\n| **`CURLINFO_RTSP_CSEQ_RECV`** | Останній отриманий заголовок CSeq |\n| **`CURLINFO_RTSP_SERVER_CSEQ`** | Наступний CSeq-заголовок RTSP-сервера |\n| **`CURLINFO_RTSP_SESSION_ID`** | Ідентифікатор RTSP-сесії |\n| **`CURLINFO_CONTENT_LENGTH_DOWNLOAD_T`** | Розмір даних. Це значення зчитується з поля `Content-Length:`. . Значення дорівнює -1, якщо розмір невідомий |\n| **`CURLINFO_CONTENT_LENGTH_UPLOAD_T`** | Розмір надісланих даних. Значення дорівнює -1, якщо розмір невідомий |\n| **`CURLINFO_HTTP_VERSION`** | Версія HTTP-протоколу останнього з'єднання. Значення, що повертається, дорівнюватиме значенню константи з сімейства **`CURL_HTTP_VERSION_*`** або 0, якщо версію неможливо визначити |\n| **`CURLINFO_PROTOCOL`** | Протокол останнього з'єднання HTTP. Значення, що повертається, дорівнюватиме значенню константи з сімейства **`CURLPROTO_*`** |\n| **`CURLINFO_PROXY_SSL_VERIFYRESULT`** | Результат запитаної перевірки сертифіката (з параметром **`CURLOPT_PROXY_SSL_VERIFYPEER`**). Працює тільки для серверів HTTPS-проксі |\n| **`CURLINFO_SCHEME`** | Схема URL останнього з'єднання |\n| **`CURLINFO_SIZE_DOWNLOAD_T`** | Загальна кількість байтів, отриманих. Число буде вказано лише для останньої передачі та скидатиметься при кожній новій передачі |\n| **`CURLINFO_SIZE_UPLOAD_T`** | Загальна кількість байтів, які були передані |\n| **`CURLINFO_SPEED_DOWNLOAD_T`** | Середня швидкість отримання даних у байтах за секунду, яку curl виміряв в кінці передачі |\n| **`CURLINFO_SPEED_UPLOAD_T`** | Середня швидкість передачі даних у байтах за секунду, яку curl виміряв в кінці передачі |\n| **`CURLINFO_APPCONNECT_TIME_T`** | Час у мікросекундах, що минув від запуску до завершення SSL або SSH підключення або рукостискання з віддаленим хостом |\n| **`CURLINFO_CONNECT_TIME_T`** | Загальний час у мікросекундах, що минув від запуску до завершення підключення до віддаленого хоста або проксі-сервера |\n| **`CURLINFO_FILETIME_T`** | Час отримання документа у вигляді мітки часу Unix по годинниках віддаленого сервера, альтернатива опції **`CURLINFO_FILETIME`**, щоб дозволити системам з 32-бітними long-змінними витягувати дати за межами діапазону 32-бітних міток часу |\n| **`CURLINFO_NAMELOOKUP_TIME_T`** | Час у мікросекундах від запуску до дозволу імені |\n| **`CURLINFO_PRETRANSFER_TIME_T`** | Час у мікросекундах від запуску до моменту початку передачі файлу |\n| **`CURLINFO_REDIRECT_TIME_T`** | Загальний час у мікросекундах, який знадобився для всіх кроків перенаправлення, включаючи пошук імені, підключення, попередню основну передачу до запуску остаточної транзакції |\n| **`CURLINFO_STARTTRANSFER_TIME_T`** | Час у мікросекундах від запуску передачі до отримання першого байта |\n| **`CURLINFO_TOTAL_TIME_T`** | Загальний час попередньої передачі в мікросекундах, включаючи роздільну здатність імені, TCP-з'єднання і т.д. |\n\n### Значення, що повертаються\n\nЯкщо параметр `option` заданий, повертається його значення. В інших випадках повертається асоціативний масив з такими елементами (які відповідають значенням параметра `option`) или\\*\\*`false`\\*\\*в случае ошибки:\n\n-   «url»\n-   «content\\_type»\n-   «http\\_code»\n-   «header\\_size»\n-   «request\\_size»\n-   «filetime»\n-   «ssl\\_verify\\_result»\n-   «redirect\\_count»\n-   «total\\_time»\n-   «namelookup\\_time»\n-   «connect\\_time»\n-   «pretransfer\\_time»\n-   «size\\_upload»\n-   «size\\_download»\n-   «speed\\_download»\n-   «speed\\_upload»\n-   «download\\_content\\_length»\n-   «upload\\_content\\_length»\n-   «starttransfer\\_time»\n-   «redirect\\_time»\n-   «certinfo»\n-   «primary\\_ip»\n-   «primary\\_port»\n-   «local\\_ip»\n-   «local\\_port»\n-   «redirect\\_url»\n-   «request\\_header» (Значення буде заповнено, лише якщо функцією[curl\\_setopt()](function.curl-setopt.md)для дескриптора включено параметр\\*\\*`CURLINFO_HEADER_OUT`\\*\\*\n\nВрахуйте, що закриті дані не додаються до асоціативного масиву і витягуються окремо через опцію **`CURLINFO_PRIVATE`**\n\n### список змін\n\n| Версия | Опис |\n| --- | --- |\n| 8.3.0 | Додані опції **`CURLINFO_CAINFO`** і **`CURLINFO_CAPATH`** |\n| 8.2.0 | Додані опції **`CURLINFO_PROXY_ERROR`** **`CURLINFO_REFERER`** **`CURLINFO_RETRY_AFTER`** |\n| 8.0.0 | `handle` тепер чекає екземпляр [CurlHandle](class.curlhandle.md); раніше, очікувався ресурс (resource). |\n| 8.0.0 | Тепер параметр `option`принимает значение\\*\\*`null`\\*\\*. . раніше значенням за умовчанням був |\n| 7.3.0 | Додані опції **`CURLINFO_CONTENT_LENGTH_DOWNLOAD_T`** **`CURLINFO_CONTENT_LENGTH_UPLOAD_T`** **`CURLINFO_HTTP_VERSION`** **`CURLINFO_PROTOCOL`** **`CURLINFO_PROXY_SSL_VERIFYRESULT`** **`CURLINFO_SCHEME`** **`CURLINFO_SIZE_DOWNLOAD_T`** **`CURLINFO_SIZE_UPLOAD_T`** **`CURLINFO_SPEED_DOWNLOAD_T`** **`CURLINFO_SPEED_UPLOAD_T`** **`CURLINFO_APPCONNECT_TIME_T`** **`CURLINFO_CONNECT_TIME_T`** **`CURLINFO_FILETIME_T`** **`CURLINFO_NAMELOOKUP_TIME_T`** **`CURLINFO_PRETRANSFER_TIME_T`** **`CURLINFO_REDIRECT_TIME_T`** **`CURLINFO_STARTTRANSFER_TIME_T`** **`CURLINFO_TOTAL_TIME_T`** |\n\n### Приклади\n\n**Приклад #1 Приклад використання функції** curl\\_getinfo()\\*\\*\\*\\*\n\n```php\n<?php\n\n// Создаём дескриптор cURL\n$ch = curl_init('http://www.example.com/');\n\n// Запускаем\ncurl_exec($ch);\n\n// Проверяем наличие ошибок\nif (!curl_errno($ch)) {\n  $info = curl_getinfo($ch);\n  echo 'Прошло ', $info['total_time'], ' секунд во время запроса к ', $info['url'], \"\\n\";\n}\n\n// Закрываем дескриптор\ncurl_close($ch);\n\n?>\n```\n\n**Приклад #2 Приклад використання функції** curl\\_getinfo()**с параметром`option`**\n\n```php\n<?php\n\n// Создаём дескриптор cURL\n$ch = curl_init('http://www.example.com/');\n\n// Запускаем\ncurl_exec($ch);\n\n// Проверяем наличие ошибок\nif (!curl_errno($ch)) {\n  switch ($http_code = curl_getinfo($ch, CURLINFO_HTTP_CODE)) {\n    case 200:  # OK\n      break;\n    default:\n      echo 'Неожиданный код HTTP: ', $http_code, \"\\n\";\n  }\n}\n\n// Закрываем дескриптор\ncurl_close($ch);\n\n?>\n```\n\n### Примітки\n\n> **Зауваження** :\n> \n> Інформація, яку збирає ця функція, зберігається в дескрипторі та доступна для запуску повторної передачі. Тобто поки статистика не перевизначена внутрішньо, ця функція повертає попередню інформацію.\n","title":"curl\\_getinfo","contentType":2,"navigation":[{"function.curl-exec.md":"« curl\\_exec"},{"function.curl-init.md":"curl\\_init »"},{"index.md":"PHP Manual"},{"ref.curl.md":"Опції cURL"}]}},"__N_SSG":true}