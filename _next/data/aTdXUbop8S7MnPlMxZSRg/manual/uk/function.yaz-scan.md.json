{"pageProps":{"page":{"slug":"function.yaz-scan.md","content":"# yaz\\_scan\n\n(PHP 4 >= 4.0.5, PECL yaz >= 0.9.0)\n\nyaz\\_scan — Підготовка сканування\n\n### Опис\n\n```methodsynopsis\nyaz_scan(    resource $id,    string $type,    string $startterm,    array $flags = ?): void\n```\n\nФункція готує запит сканування для встановленого з'єднання протоколу Z39.50.\n\nЩоб надіслати запит сканування на сервер і отримати відповідь, потрібно викликати функцію [yaz\\_wait()](function.yaz-wait.md). Як запевняють [yaz\\_wait()](function.yaz-wait.md) викличте [yaz\\_error()](function.yaz-error.md)для получения ошибки и[yaz\\_scan\\_result()](function.yaz-scan-result.md)для получения результата.\n\n### Список параметрів\n\n`id`\n\nДескриптор з'єднання, повернутий [yaz\\_connect()](function.yaz-connect.md)\n\n`type`\n\nВ даний час підтримується тільки `rpn`\n\n`startterm`\n\nПочатковий елемент для сканування\n\nФорма, в якій представлений початковий елемент сканування, задається параметром `type`\n\nСинтаксис цього параметра схожий на запит RPN, який описаний для [yaz\\_search()](function.yaz-search.md). Він складається з нуля чи більше операторних налаштувань `@attr`, За якими слідує єдина лексема.\n\n`flags`\n\nЦей необов'язковий параметр визначає додаткову інформацію для керування поведінкою сканування. З масиву прапорів доступні три індекси: `number` (кількість термів, що запитуються), `position`(позиция терма) и`stepSize`(размер шага).\n\n### Значення, що повертаються\n\nФункція не повертає значення після виконання.\n\n### Приклади\n\n**Приклад #1 Функція PHP, яка сканує заголовки**\n\n```php\n<?php\nfunction scan_titles($id, $startterm)\n{\n  yaz_scan($id, \"rpn\", \"@attr 1=4 \" . $startterm);\n  yaz_wait();\n  $errno = yaz_errno($id);\n  if ($errno == 0) {\n    $ar = yaz_scan_result($id, $options);\n    echo 'Scan ok; ';\n    foreach ($options as $key => $val) {\n      echo \"$key = $val \";\n    }\n    echo '<br /><table>';\n    while (list($key, list($k, $term, $tcount)) = each($ar)) {\n      if (empty($k)) continue;\n      echo \"<tr><td>$term</td><td>$tcount</td></tr>\";\n    }\n    echo '</table>';\n  } else {\n    echo \"Сканирование не удалось. Ошибка: \" . yaz_error($id) . \"<br />\";\n  }\n}\n?>\n```\n","title":"yaz\\_scan","contentType":2,"navigation":[{"function.yaz-scan-result.md":"« yaz\\_scan\\_result"},{"function.yaz-schema.md":"yaz\\_schema »"},{"index.md":"PHP Manual"},{"ref.yaz.md":"Функції YAZ"}]}},"__N_SSG":true}