- [«assert_options](function.assert-options.md)
- [cli_get_process_title »](function.cli-get-process-title.md)

- [PHP Manual](index.md)
- [Опції PHP/інформаційні функції](ref.info.md)
- Перевіряє, чи є твердження false

# assert

(PHP 4, PHP 5, PHP 7, PHP 8)

assert — Перевіряє, чи є затвердження **`false`**

### Опис

PHP 5 та 7

**assert**([mixed](language.types.declarations.md#language.types.declarations.mixed)
`$assertion`, string `$description` u003d ?): bool

PHP 7

**assert**([mixed](language.types.declarations.md#language.types.declarations.mixed)
`$assertion`, [Throwable](class.throwable.md) `$exception` u003d ?): bool

**assert()** перевірить задане твердження `assertion` та здійснить
відповідна дія, якщо результатом перевірки виявиться
**`false`**.

#### Традиційна робота функції assert (PHP 5 та 7)

Якщо `assertion` задається у вигляді рядка, воно розглядатиметься
функцією **assert()** як PHP-код. Якщо ви передасте як
параметра `assertion` логічний вираз, то цей вираз не буде
відображатись як параметр для функції затвердження, заданої за допомогою
[assert_options()](function.assert-options.md). Цей вираз буде
перетворено на рядок перед викликом функції обробника, а у випадку
**`false`** буде використано порожній рядок.

Затвердження повинні використовуватися лише для налагодження. Їх можна
використовувати для тестування якихось умов, які у штатних
ситуаціях завжди набувають значення **`true`**, зворотне повинно
вказувати на програмні помилки. Також їх можна використовувати, щоб
переконатися у наявності будь-яких модулів або системних обмежень.

Затвердження не повинні використовуватися у звичайних операціях, таких як
перевірити вхідні параметри. Як правило, скрипт має коректно
виконуватися, якщо вимкнути перевірку тверджень.

Поведінка функції **assert()** можна змінювати за допомогою функції
[assert_options()](function.assert-options.md) або інсталяцією
.ini-налаштувань.

Функція [assert_options()](function.assert-options.md) та/або директива
**`ASSERT_CALLBACK`** дозволяють задати callback-функцію, яка буде
викликатись при провалі перевірки затвердження.

Можливість викликати callback-функції з **assert()** може бути корисною
створення автоматизованих тестових пакетів. За допомогою цих
функцій можна отримати код, переданий на перевірку разом з інформацією
про те, де цю перевірку було здійснено. Подібну інформацію можна
отримати й іншими методами, проте використання тверджень швидше та
простіше.

Callback-функція має приймати три аргументи. Перший аргумент має
містити файл, у якому твердження не пройшло перевірку. Другий
аргумент відповідає за номер рядка у цьому файлі. У третьому аргументі
буде передаватися вираз, що містить помилку (якщо таких кілька,
строкові значення, на кшталт 1 або "два", не будуть передаватися через цей
аргумент). Користувачі PHP версій 5.4.8 та вище можуть задати четвертий
необов'язковий аргумент `description`, який буде також переданий у
функцію **assert()**.

#### Очікування (тільки PHP 7)

PHP 7 **assert()** - це мовна конструкція, що дозволяє визначати
очікування: затвердження, які працюють у середовищі розробки та
тестування, але з метою оптимізації відключено на продуктовому оточенні.

Хоча функція [assert_options()](function.assert-options.md)
може як і раніше бути використана для контролю за поведінкою
програми описаним вище чином, для зворотної сумісності, але в PHP 7
код повинен використовувати дві нові конфігураційні директиви для
управління поведінкою **assert()** і не викликати функції
[assert_options()](function.assert-options.md).

[TABLE]

**Конфігураційні директиви PHP 7 для функції **assert()****

### Список параметрів

`assertion`
Твердження. У PHP 5 може бути рядком (string) для виконання або
логічним значенням (bool) для перевірки. У PHP 7 це також може бути
будь-який вираз, який повертає значення, яке буде виконано, та
результат використаний визначення успішності перевірки.

**Увага**
Використання рядка (string) у параметрі `assertion` оголошено
*ЗАСТАРІЛИМ* з PHP 7.2 та *Видалено*, починаючи з PHP 8.0.0.

`description`
Необов'язковий опис, який буде додано до повідомлення, якщо
перевірку затвердження `assertion` буде провалено. У PHP 7 використовується
опис за замовчуванням (якщо його не було передано), де буде вказано сам
виклик **assert()**.

`exception`
У PHP 7 другий параметр може бути об'єктом
[Throwable](class.throwable.md) замість рядка (string). Цей об'єкт
буде викидатися у разі невдалої перевірки затвердження при
включеної конфігураційної директиви
[assert.exception](info.configuration.md#ini.assert.exception).

### Значення, що повертаються

**`false`**, якщо перевірка провалена, **`true`** інакше.

### Список змін

| Версія | Опис |
|--------|---------------------------------------- -------------------------------------------------- -------------------------------------------------- -------------------------------------------------- -------------------------------------------------- -------------------------------------------------- ------------------------------------------------|
| 8.0.0 | Функція **assert()** більше не оцінюватиме рядкові аргументи, натомість вони будуть розглядатися як будь-який інший аргумент. Замість `assert($a u003du003d $b)` слід використовувати `assert('$a u003du003d $b')`. Директива `assert.quiet_eval` `php.ini` та константа **`ASSERT_QUIET_EVAL`** також були видалені, оскільки вони більше не мають сенсу. |
| 8.0.0 | Оголошення функції з ім'ям `assert()` всередині простору імен тепер заборонено та викликає **`E_COMPILE_ERROR`**. |
| 7.3.0 | Оголошення функції з ім'ям `assert()` усередині простору імен оголошено застарілим. Таке оголошення видає помилку рівня **`E_DEPRECATED`**. |
| 7.2.0 | Використання рядків у параметрі `assertion` оголошено застарілим і призводитиме до помилок рівня **`E_DEPRECATED`** у випадку, коли і [assert.active](info.configuration.md#ini.assert.active) та [zend.assertions ](ini.core.md#ini.zend.assertions) встановлені на значення `1`. |
| 7.0.0 | **assert()** тепер мовна конструкція, а чи не функція. `assertion` тепер може бути виразом. Другий параметр тепер інтерпретується як виняток `exception` (якщо передано об'єкт [Throwable](class.throwable.md)), або як опис `description`, що підтримується з версії PHP 5.4.8 і далі. |

### Приклади

#### Традиційна робота функції assert (PHP 5 та 7)

**Приклад #1 Обробка невдалих перевірок тверджень з використанням
власного обробника**

`<?php// Активація затверджень і відключення висновку помилокassert_options(ASSERT_ACTIVE, 1);assert_options(ASSERT_WARNING, 0);assert_options(ASSERT_QUIET_EVAL, < | <hr>Невдала перевірка ствердження:         Файл '$file'<br />         Рядок '$line'<br />                          Ях 'my_assert_handler');// Виконання перевірки затвердження, завершиться невдачеюassert('mysql_query("")');?> `

**Приклад #2 Використання власного обробника з виведенням опису**

`<?php// Активація затверджень і відключення висновку помилокassert_options(ASSERT_ACTIVE, 1);assert_options(ASSERT_WARNING, 0);assert_options(ASSERT_QUIET_EVAL, s$$$$$ null){    echo "Невдала перевірка затвердження в $file:$line: $code"; if ($desc) {        echo ": $desc"; }    echo "
";}// Підключення callback-функціїassert_options(ASSERT_CALLBACK, 'my_assert_handler');// Виконання перевірки затвердження, завершиться невдачеюassert('2 < 1');     | ?> `

Результат виконання цього прикладу:

Невдала перевірка затвердження у test.php:21: 2 < 1
Невдала перевірка затвердження в test.php:22: 2 < 1: Два більше ніж один

#### Очікування (тільки PHP 7)

**Приклад #3 Очікування без власного виключення**

` <?phpassert(true u003du003du003dfalse);echo 'Привіт!';?> `

У разі директиви [zend.assertions](ini.core.md#ini.zend.assertions),
встановленою в 0, цей код виведе:

Вітання!

У разі директив [zend.assertions](ini.core.md#ini.zend.assertions),
встановленої в 1 та
[assert.exception](info.configuration.md#ini.assert.exception),
встановленою в 0, цей приклад виведе:

Warning: assert(): assert(true u003du003d false) failed in - on line 2
Вітання!

У разі директив [zend.assertions](ini.core.md#ini.zend.assertions),
встановленої в 1 та
[assert.exception](info.configuration.md#ini.assert.exception),
встановленою в 1, цей код виведе:

Fatal error: Uncaught AssertionError: assert(true u003du003d false) in -:2
Stack trace:
#0 -(2): assert(false, 'assert(true u003du003d...')
#1 {main}
thrown in - on line 2

**Приклад #4 Очікування з власним винятком**

`<?phpclass CustomError extends AssertionError {}assert(true u003du003d false, new CustomError('True не є false!'));echo 'Привіт!';?> `

У разі директиви [zend.assertions](ini.core.md#ini.zend.assertions),
встановленою в 0, цей код виведе:

Вітання!

У разі директив [zend.assertions](ini.core.md#ini.zend.assertions),
встановленої в 1 та
[assert.exception](info.configuration.md#ini.assert.exception),
встановленою в 0, цей код виведе:

Warning: assert(): CustomError: True не є false! in -:4
Stack trace:
#0 {main} failed in - on line 4
Вітання!

У разі директив [zend.assertions](ini.core.md#ini.zend.assertions),
встановленої в 1 та
[assert.exception](info.configuration.md#ini.assert.exception),
встановленою в 1, цей код виведе:

Fatal error: Uncaught CustomError: True не false! in -:4
Stack trace:
#0 {main}
thrown in - on line 4

### Дивіться також

- [assert_options()](function.assert-options.md) - Встановлення та
отримання настройок механізму перевірки тверджень
