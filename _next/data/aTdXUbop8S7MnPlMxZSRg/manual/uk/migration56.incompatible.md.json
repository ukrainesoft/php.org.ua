{"pageProps":{"page":{"slug":"migration56.incompatible.md","content":"## Зміни, що ламають зворотну сумісність\n\nНезважаючи на те, що більша частина існуючого коду PHP 5 повинна працювати без змін, все ж таки ознайомтеся з деякими змінами, які можуть позначитися на зворотній сумісності:\n\n### Ключі масиву не будуть перезаписані при визначенні масиву як властивості класу через літерал масиву\n\nРаніше в масивах, задані як властивості класу зі змішаними явними та неявними ключами, елементи із явно заданими ключами могли мовчки перезаписуватись, якщо явний ключ перетинався з послідовним неявним ключем. Наприклад:\n\n```php\n<?php\nclass C {\n    const ONE = 1;\n    public $array = [\n        self::ONE => 'foo',\n        'bar',\n        'quux',\n    ];\n}\n\nvar_dump((new C)->array);\n?>\n```\n\nРезультат виконання наведеного прикладу в PHP 5.5:\n\n```\narray(2) {\n  [0]=>\n  string(3) \"bar\"\n  [1]=>\n  string(4) \"quux\"\n}\n```\n\nРезультат виконання наведеного прикладу в PHP 5.6:\n\n```\narray(3) {\n  [1]=>\n  string(3) \"foo\"\n  [2]=>\n  string(3) \"bar\"\n  [3]=>\n  string(4) \"quux\"\n}\n```\n\n### Суворість [json\\_decode()](function.json-decode.md)\n\nТепер [json\\_decode()](function.json-decode.md) відповідно до специфікації JSON відхиляє JSON літерали `true` `false`и`null`, задані не строго в нижньому регістрі, і відповідно встановлює [json\\_last\\_error()](function.json-last-error.md). Раніше дані, що передаються в [json\\_decode()](function.json-decode.md) і що містять виключно одне з цих значень у верхньому або змішаному регістрі приймалися.\n\nЦя зміна вплине тільки у разі передачі в [json\\_decode()](function.json-decode.md) некоректного JSON. У разі коректно сформованого JSON ніякого ефекту не буде.\n\n### Тепер потокові обгортки за промовчанням перевіряють сертифікати точок під час використання SSL/TLS\n\nВсі клієнтські потоки, що шифруються, тепер за замовчуванням включають перевірку бенкетів. За замовчуванням сертифікат бенкету перевіряється пакетом OpenSSL CA. Зазвичай нічого не потрібно робити для з'єднання з серверами з правильним SSL-сертифікатом, оскільки OpenSSL налаштований так, що вже працює з хорошими CA-пакетами.\n\nСтандартний CA пакет може бути перевизначений глобально за допомогою установки або openssl.cafile або openssl.capath рядків конфігурації, або ж на рівні кожного запиту, використовуючи опції контексту [`cafile`](context.ssl.md#context.ssl.cafile) або [`capath`](context.ssl.md#context.ssl.capath)\n\nХоча це і не рекомендується, але можна вимкнути перевірку сертифіката бенкету для запиту, встановивши [`verify_peer`](context.ssl.md#context.ssl.verify-peer)опцию контекста в\\*\\*`false`**, і можна вимкнути перевірку імені бенкету, встановивши [`verify_peer_name`](context.ssl.md#context.ssl.verify-peer-name)в**`false`\\*\\*\n\n### Тепер ресурси [GMP](book.gmp.md) є об'єктами\n\nТепер ресурси [GMP](book.gmp.md) є об'єктами. Функціональне API, реалізоване у модулі GMP, залишилося без змін. Існуючий код має запрацювати без змін, тільки якщо в ньому явно не використовувалися перевірки на ресурс [is\\_resource()](function.is-resource.md) або щось подібне.\n\n### Теперь функция[Mcrypt](book.mcrypt.md) вимагає коректні ключі та IV\n\n[mcrypt\\_encrypt()](function.mcrypt-encrypt.md) [mcrypt\\_decrypt()](function.mcrypt-decrypt.md) **mcrypt\\_cbc()** **mcrypt\\_cfb()** **mcrypt\\_ecb()** [mcrypt\\_generic()](function.mcrypt-generic.md)и**mcrypt\\_ofb()** більше не приймають ключі і IV з некоректною довжиною, а режими блокового шифру, що вимагають IV, будуть завершуватися помилкою, якщо його не передати.\n\n### Завантаження файлів за допомогою [cURL](book.curl.md)\n\nТепер завантаження з використанням синтаксису @file потребує встановлення CURLOPT\\_SAFE\\_UPLOAD в значение\\*\\*`false`\\*\\*. Натомість слід використовувати [CURLFile](class.curlfile.md)\n","title":"Зміни, що ламають зворотну сумісність","contentType":2,"navigation":[{"migration56.md":"« Міграція з PHP 5.5.x на PHP 5.6.x"},{"migration56.new-features.md":"Нові можливості \""},{"index.md":"PHP Manual"},{"migration56.md":"Міграція з PHP 5.5.x на PHP 5.6.x"}]}},"__N_SSG":true}