- [« parallel\Runtime::\_\_construct](parallel-runtime.construct.md)
- [parallel\Runtime::close »](parallel-runtime.close.md)

- [PHP Manual](index.md)
- [parallel\Runtime](class.parallel-runtime.md)
- Виконання

# parallel\Runtime::run

(0.8.0)

parallel\Runtime::run — Виконання

### Опис

public **parallel\Runtime::run**([Closure](class.closure.md) `$task`):
?Future

Планує паралельне виконання `task`.

public **parallel\Runtime::run**([Closure](class.closure.md) `$task`,
array `$argv`): ?Future

Планує паралельне виконання `task`, передаючи `argv` під час
виконання.

### Список параметрів

`task`
Замикання ([Closure](class.closure.md)) зі специфічними
характеристиками.

`argv`
Масив (array) аргументів із конкретними характеристиками, які будуть
передані `task` під час виконання.

### Характеристики задачі

Замикання, заплановані для паралельного виконання, не повинні:

- приймати чи повертати значення за посиланням
- приймати або повертати внутрішні об'єкти (див. примітки)
- виконувати обмежений набір інструкцій

У замиканнях, призначених для паралельного виконання, заборонено
наступні інструкції:

- yield
- use by-reference
- declare class
- declare named function

> **Примітка**:
>
> Вкладені замикання можуть використовувати yield або передачу значення по
> посилання, але не повинні містити оголошення класів або іменованих
> функцій.

> **Примітка**:
>
> Ніякі інструкції не заборонені у файлах, які можуть включати
> Завдання.

### Аргументи характеристик

Аргументи не повинні:

- утримувати посилання
- утримувати ресурси
- утримувати внутрішні об'єкти (дивіться примітки)

> **Примітка**:
>
> У разі ресурсів файлового потоку ресурс буде перетворено на
> файловий дескриптор і передано як ціле число (int), де це можливо,
> не підтримується у Windows.

### Примітки до внутрішніх об'єктів

Внутрішні об'єкти зазвичай використовують структуру, що настроюється, яку
не можна безпечно скопіювати за значенням, в PHP в даний час
відсутній механізм для цього (без серіалізації), і тому можуть
використовуватись тільки об'єкти, які не використовують настроювану
структуру.

Деякі внутрішні об'єкти не використовують структуру, що настроюється,
наприклад, [parallel\Events\Event](class.parallel-events-event.md) та
тому можуть використовуватись спільно.

Замикання – це особливий вид внутрішнього об'єкта, який підтримує
копіювання за значенням, тому може використовуватись спільно.

Канали відіграють ключову роль у написанні паралельного коду та при
необхідності підтримують одночасний доступ та виконання, тому
можуть використовуватись спільно.

**Увага**

Користувальницький клас, який розширює внутрішній клас, може використовувати
структуру, що налаштовується, визначену внутрішнім класом, і в цьому
у випадку вони не можуть бути безпечно скопійовані за значенням і тому не
можуть використовуватись спільно.

### Значення, що повертаються

**Увага**

Не можна ігнорувати повертається
[parallel\Future](class.parallel-future.md), якщо завдання містить
оператор return або throw.

### Винятки

**Увага**

Викидає parallel\Runtime\Error\Closed, якщо
[parallel\Runtime](class.parallel-runtime.md) було закрито.

**Увага**

Викидає parallel\Runtime\Error\IllegalFunction, якщо `task` є
замиканням, створеним із внутрішньої функції.

**Увага**

Викидає parallel\Runtime\Error\IllegalInstruction, якщо `task`
містить неприпустимі інструкції.

**Увага**

Викидає parallel\Runtime\Error\IllegalParameter, якщо `task`
приймає або `argv` містить неприпустимі змінні.

**Увага**

Викидає parallel\Runtime\Error\IllegalReturn, якщо `task`
повертається некоректно.
