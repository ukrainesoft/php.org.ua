- [« yaz_close](function.yaz-close.md)
- [yaz_database »](function.yaz-database.md)

- [PHP Manual](index.md)
- [Функції YAZ](ref.yaz.md)
- Готує з'єднання із сервером Z39.50

# yaz_connect

(PHP 4 u003d 4.0.1, PECL yaz u003d 0.9.0)

yaz_connect — Підготовка підключення до сервера Z39.50

### Опис

**yaz_connect**(string `$zurl`,
[mixed](language.types.declarations.md#language.types.declarations.mixed)
`$options` u003d ?):
[mixed](language.types.declarations.md#language.types.declarations.mixed)

Функція повертає дескриптор з'єднання у разі успішного виконання та
нуль у разі виникнення помилки.

**yaz_connect()** готує з'єднання із сервером Z39.50. Функція
неблокуюча і не намагається встановити з'єднання, а лише готує
з'єднання для подальшого виконання функцією
[yaz_wait()](function.yaz-wait.md).

> **Примітка**:
>
> [» YAZ proxy](http://www.indexdata.dk/yazproxy/) безкоштовно доступний
> Агент Z39.50.

### Список параметрів

`zurl`
Рядок, що набуває форми `host[:port][/database]`. Якщо порт опущено, то
за замовчуванням використовується 210 портів. Якщо опущено назву бази даних,
використовується база з ім'ям `Default`.

`options`
Якщо задається рядок, він розглядається як рядок аутентифікації
Z39.50 V2 (OpenAuth).

Якщо заданий масив, то вміст масиву виступає як
параметрів.

user
Ім'я користувача для автентифікації.

group
Назва групи для автентифікації.

password
Пароль для автентифікації.

cookie
Cookie для сесії (YAZ proxy).

proxy
Проксі для підключення (YAZ proxy).

persistent
Має логічний тип. Якщо приймає **`true`** - з'єднання постійне,
якщо **`false`** - непостійне з'єднання. За умовчанням з'єднання
постійне.

> **Примітка**:
>
> Якщо ви відкрили постійне з'єднання, ви не зможете закрити його
> пізніше за допомогою [yaz_close()](function.yaz-close.md).

piggyback
Має логічний тип. Якщо приймає **`true`**, то режим передачі
прямих та зворотних пакетів включений; якщо **`false`**, то цей режим
вимкнено. За замовчуванням увімкнено режим передачі прямих та зворотних пакетів.

Увімкнення режиму передачі прямих та зворотних пакетів більш ефективно та
зазвичай знижує навантаження в мережі для вперше вибраних записів. Проте
деякі сервери Z39.50 не підтримують режим прямих та зворотних пакетів
або ігнорують це налаштування. Для них цей режим має бути вимкнений.

charset
Рядок, що визначає кодування, що використовується в Z39.50 і при передачі
даних. Можливі такі значення як: ISO-8859-1, UTF-8, UTF-16.

Більшість серверів Z39.50 не підтримують цю установку (і таким
вона ігнорується). Багато серверів використовують кодування
ISO-8859-1 для запитів та повідомлень. Кодування записів у форматах
MARC21/USMARC не зачіпаються цією опцією.

preferredMessageSize
Цілочисленний параметр, що визначає максимальний розмір усіх записів,
повертаються сервером під час пошуку, в байтах. Для більш докладної
інформації дивіться стандарт
[»Z39.50](http://www.loc.gov/z3950/agency/markup/04.md#3.2.1.1.4).

> **Примітка**:
>
> Опція підтримується у версії PECL YAZ 1.0.5 та пізніших.

maximumRecordSize
Цілочисельний параметр, що визначає максимальну кількість байт
окремого запису, що повертається сервером у результаті пошуку. Даний
параметр відноситься до Exceptional-record-size у стандарті
[»Z39.50](http://www.loc.gov/z3950/agency/markup/04.md#3.2.1.1.4).

> **Примітка**:
>
> Опція підтримується у версії PECL YAZ 1.0.5 та пізніших.

### Значення, що повертаються

Дескриптор з'єднання у разі успішного виконання або **`false`**
у разі виникнення помилки.

### Список змін

| Версія | Опис |
|--------|----------------------------------|
| 4.1.0 | Було додано параметр `options`. |

### Дивіться також

- [yaz_close()](function.yaz-close.md) - Закриває з'єднання YAZ
