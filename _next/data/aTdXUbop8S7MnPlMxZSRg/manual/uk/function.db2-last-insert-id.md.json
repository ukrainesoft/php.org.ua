{"pageProps":{"page":{"slug":"function.db2-last-insert-id.md","content":"# db2\\_last\\_insert\\_id\n\n(PECL ibm\\_db2 >= 1.7.1)\n\ndb2\\_last\\_insert\\_id — Повертає автоматично згенерований ідентифікатор останнього запиту додавання, успішно виконаного в цьому з'єднанні\n\n### Опис\n\n```methodsynopsis\ndb2_last_insert_id(resource $resource): ?string\n```\n\nПовертає автоматично згенерований ідентифікатор останнього запиту додавання, успішно виконаного в цьому з'єднанні.\n\nНа результат цієї функції не впливає жодна з наступних:\n\n-   Оператор INSERT для одного рядка з VALUES для таблиці без стовпчика ідентифікаторів.\n    \n-   Оператор INSERT для кількох рядків із VALUES.\n    \n-   Оператор INSERT із повною вибіркою.\n    \n-   Оператор ROLLBACK TO SAVEPOINT\n    \n\n### Список параметрів\n\n`resource`\n\nДопустимий ресурс підключення, що повертається [db2\\_connect()](function.db2-connect.md) або [db2\\_pconnect()](function.db2-pconnect.md). Значення цього параметра може бути ресурсом оператора чи ресурсом набору результатів.\n\n### Значення, що повертаються\n\nПовертає автоматично згенерований ідентифікатор останнього запиту додавання, успішно виконаного в цьому з'єднанні.\n\n### Приклади\n\n**Приклад #1 Приклад використання** db2\\_last\\_insert\\_id()\\*\\*\\*\\*\n\nУ наступному прикладі показано, як повернути автоматично згенерований ідентифікатор останнього запиту додавання, успішно виконаного в цьому з'єднанні.\n\n```php\n<?php\n\n$database = \"SAMPLE\";\n$user = \"db2inst1\";\n$password = \"ibmdb2\";\n\n$conn = db2_connect($database, $user, $password);\nif($conn) {\n    $createTable = \"CREATE TABLE lastInsertID\n      (id integer GENERATED BY DEFAULT AS IDENTITY, name varchar(20))\";\n    $insertTable = \"INSERT INTO lastInsertID (name) VALUES ('Temp Name')\";\n\n    $stmt = @db2_exec($conn, $createTable);\n\n    /* Проверка на вставку одной строки. */\n    $stmt = db2_exec($conn, $insertTable);\n    $ret =  db2_last_insert_id($conn);\n    if($ret) {\n        echo \"Последний идентификатор : \" . $ret . \"\\n\";\n    } else {\n        echo \"Последний идентификатор отсутствует.\\n\";\n    }\n\n    db2_close($conn);\n}\nelse {\n    echo \"Ошибка соединения.\";\n}\n?>\n```\n\nРезультат виконання наведеного прикладу:\n\n```\nПоследний идентификатор : 1\n```\n","title":"db2\\_last\\_insert\\_id","contentType":2,"navigation":[{"function.db2-get-option.md":"« db2\\_get\\_option"},{"function.db2-lob-read.md":"db2\\_lob\\_read »"},{"index.md":"PHP Manual"},{"ref.ibm-db2.md":"Функції IBM DB2"}]}},"__N_SSG":true}