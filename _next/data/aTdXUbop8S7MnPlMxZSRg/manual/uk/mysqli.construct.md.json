{"pageProps":{"page":{"slug":"mysqli.construct.md","content":"# mysqli::\\_\\_construct\n\n# mysqli::connect\n\n# mysqli\\_connect\n\n(PHP 5, PHP 7, PHP 8)\n\nmysqli::\\_\\_construct -- mysqli::connect -- mysqli\\_connect — Встановлює нове з'єднання з сервером MySQL\n\n### Опис\n\nОб'єктно-орієнтований стиль\n\npublic **mysqli::\\_\\_construct**  \n?string`$hostname` **`null`**,  \n?string`$username` **`null`**,  \n?string`$password` **`null`**,  \n?string`$database` **`null`**,  \n?int`$port` **`null`**,  \n?string`$socket` **`null`**  \n) .\n\n```methodsynopsis\npublic mysqli::connect(    ?string $hostname = null,    ?string $username = null,    ?string $password = null,    ?string $database = null,    ?int $port = null,    ?string $socket = null): bool\n```\n\nПроцедурний стиль\n\n```methodsynopsis\nmysqli_connect(    ?string $hostname = null,    ?string $username = null,    ?string $password = null,    ?string $database = null,    ?int $port = null,    ?string $socket = null): mysqli|false\n```\n\nВстановлює з'єднання з працюючим сервером MySQL.\n\n### Список параметрів\n\n`hostname`\n\nМоже бути або ім'ям хоста, або IP-адресою. При передачі **`null`**, значение извлекается из[mysqli.default\\_host](mysqli.configuration.md#ini.mysqli.default-host). По можливості замість протоколу TCP/IP використовуватимуться канали. Протокол TCP/IP використовується, якщо вказано ім'я хоста і номер порту, наприклад, `localhost:3308`\n\nЯкщо перед ім'ям хоста встановити рядок `p:`, то буде відкрито постійне з'єднання. Якщо з'єднання відкрито з пулу підключень, буде автоматично викликано функцію [mysqli\\_change\\_user()](mysqli.change-user.md)\n\n`username`\n\nІм'я користувача MySQL або \\*\\*`null`\\*\\*для принятия имени пользователя на основе ini-опции[mysqli.default\\_user](mysqli.configuration.md#ini.mysqli.default-user)\n\n`password`\n\nПароль MySQL или\\*\\*`null`\\*\\*для принятия пароля на основе ini-опции[mysqli.default\\_pw](mysqli.configuration.md#ini.mysqli.default-pw)\n\n`database`\n\nБаза даних за замовчуванням, яка буде використовуватися під час виконання запитів або **`null`**\n\n`port`\n\nНомер порту для спроби підключення до сервера MySQL або \\*\\*`null`\\*\\*для принятия порта на основе ini-опции[mysqli.default\\_port](mysqli.configuration.md#ini.mysqli.default-port)\n\n`socket`\n\nСокет або іменований пайп, який необхідно використовувати або \\*\\*`null`\\*\\*для принятия сокета на основе ini-опции[mysqli.default\\_socket](mysqli.configuration.md#ini.mysqli.default-socket)\n\n> **Зауваження** :\n> \n> Передача параметра`socket` явно не буде задавати тип з'єднання при підключенні до сервера MySQL. Те, як встановлюватиметься з'єднання з MySQL-сервером, визначається параметром `hostname`\n\n### Значення, що повертаються\n\n[mysqli\\_connect()](function.mysqli-connect.md) повертає об'єкт, який представляє з'єднання з сервером MySQL або \\*\\*`false`\\*\\*в случае возникновения ошибки.\n\n[mysqli::connect()](function.mysqli-connect.md) повертає **`true`** у разі успішного виконання або **`false`** у разі виникнення помилки. До PHP 8.1.0 у разі успішного виконання поверталося значення **`null`**\n\n### Помилки\n\nЯкщо сповіщення про помилки mysqli включено (**`MYSQLI_REPORT_ERROR`**) та запитана операція не вдалася, видається попередження. Якщо, крім того, встановлено режим **`MYSQLI_REPORT_STRICT`**, натомість буде викинуто виняток [mysqli\\_sql\\_exception](class.mysqli-sql-exception.md)\n\n### список змін\n\n| Версия | Опис |\n| --- | --- |\n| 8.1.0 | Метод[mysqli::connect()](function.mysqli-connect.md) тепер повертає значення **`true`** замість **`null`** у разі успішного виконання. |\n| 7.4.0 | Усі параметри тепер припускають значення **`null`** |\n\n### Приклади\n\n**Приклад #1 Приклад використання** mysqli::\\_\\_construct()\\*\\*\\*\\*\n\nОб'єктно-орієнтований стиль\n\n```php\n<?php\n\n/* Вы должны включить отчёт об ошибках для mysqli, прежде чем пытаться установить соединение */\nmysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);\n\n$mysqli = new mysqli('localhost', 'my_user', 'my_password', 'my_db');\n\n/* Установите желаемую кодировку после установления соединения */\n$mysqli->set_charset('utf8mb4');\n\nprintf(\"Успешно... %s\\n\", $mysqli->host_info);\n?>\n```\n\nПроцедурний стиль\n\n```php\n<?php\n\n/* Вы должны включить отчёт об ошибках для mysqli, прежде чем пытаться установить соединение */\nmysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);\n\n$mysqli = mysqli_connect('localhost', 'my_user', 'my_password', 'my_db');\n\n/* Установите желаемую кодировку после установления соединения */\nmysqli_set_charset($mysqli, 'utf8mb4');\n\nprintf(\"Успешно... %s\\n\", mysqli_get_host_info($mysqli));\n```\n\nВисновок наведених прикладів буде схожим на:\n\n```\nУспешно... localhost via TCP/IP\n```\n\n**Приклад #2 Розширення класу mysqli**\n\n```php\n<?php\n\nclass FooMysqli extends mysqli {\n    public function __construct($host, $user, $pass, $db, $port, $socket, $charset) {\n        mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);\n        parent::__construct($host, $user, $pass, $db, $port, $socket);\n        $this->set_charset($charset);\n    }\n}\n\n$db = new FooMysqli('localhost', 'my_user', 'my_password', 'my_db', 3306, null, 'utf8mb4');\n```\n\n**Приклад #3 Ручна обробка помилок**\n\nЯкщо звіти про помилки вимкнуто, розробник несе відповідальність за перевірку та обробку помилок\n\nОб'єктно-орієнтований стиль\n\n```php\n<?php\n\nerror_reporting(0);\nmysqli_report(MYSQLI_REPORT_OFF);\n$mysqli = new mysqli('localhost', 'my_user', 'my_password', 'my_db');\nif ($mysqli->connect_errno) {\n    throw new RuntimeException('ошибка соединения mysqli: ' . $mysqli->connect_error);\n}\n\n/* Установите желаемую кодировку после установления соединения */\n$mysqli->set_charset('utf8mb4');\nif ($mysqli->errno) {\n    throw new RuntimeException('ошибка mysqli: ' . $mysqli->error);\n}\n```\n\nПроцедурний стиль\n\n```php\n<?php\n\nerror_reporting(0);\nmysqli_report(MYSQLI_REPORT_OFF);\n$mysqli = mysqli_connect('localhost', 'my_user', 'my_password', 'my_db');\nif (mysqli_connect_errno()) {\n    throw new RuntimeException('ошибка соединения mysqli: ' . mysqli_connect_error());\n}\n\n/* Установите желаемую кодировку после установления соединения */\nmysqli_set_charset($mysqli, 'utf8mb4');\nif (mysqli_errno($mysqli)) {\n    throw new RuntimeException('ошибка mysqli: ' . mysqli_error($mysqli));\n}\n```\n\n### Примітки\n\n> **Зауваження** :\n> \n> MySQLnd завжди має на увазі кодування, яке використовує за умовчанням сервер. Це кодування передається під час встановлення з'єднання/авторизації, які використовує mysqlnd.\n> \n> За замовчуванням Libmysqlclient використовує кодування, встановлене у файлі my.cnf або явним викликом функції [mysqli\\_options()](mysqli.options.md) до виклику функції [mysqli\\_real\\_connect()](mysqli.real-connect.md), але після виклику функції [mysqli\\_connect()](function.mysqli-connect.md)\n\n> **Зауваження** :\n> \n> Якщо використовується Об'єктно-орієнтований стиль: Якщо з'єднання встановити не вдалося, метод все одно поверне об'єкт. Перевірити успішність створення підключення можна або функцією [mysqli\\_connect\\_error()](mysqli.connect-error.md)или с помощью свойства[mysqli->connect\\_error](mysqli.connect-error.md), Як показано в прикладах.\n\n> **Зауваження** :\n> \n> Якщо необхідно задати додаткові параметри підключення, на кшталт часу очікування і т.п., замість цього методу необхідно використовувати функцію [mysqli\\_real\\_connect()](mysqli.real-connect.md)\n\n> **Зауваження** :\n> \n> Виклик конструктора без параметрів ідентичний виклику функції [mysqli\\_init()](mysqli.init.md)\n\n> **Зауваження** :\n> \n> Помилка \"Can't create TCP/IP socket (10106)\" зазвичай означає, що директива конфігурації [variables\\_order](ini.core.md#ini.variables-order) не містить символ `E`. У Windows системах, якщо оточення не скопійовано, змінне середовище `SYSTEMROOT` буде недоступна, і у PHP виникнуть проблеми із завантаженням Winsock.\n\n### Дивіться також\n\n-   [mysqli\\_real\\_connect()](mysqli.real-connect.md) \\- Встановлює з'єднання із сервером mysql\n-   [mysqli\\_options()](mysqli.options.md) \\- Встановлення налаштувань\n-   [mysqli\\_connect\\_errno()](mysqli.connect-errno.md) \\- Повертає код помилки останньої спроби з'єднання\n-   [mysqli\\_connect\\_error()](mysqli.connect-error.md) \\- Повертає опис останньої помилки підключення\n-   [mysqli\\_close()](mysqli.close.md) \\- Закриває раніше відкрите з'єднання з базою даних\n","title":"mysqli::\\_\\_construct","contentType":2,"navigation":[{"mysqli.connect-error.md":"« mysqli::$connect\\_error"},{"mysqli.debug.md":"mysqli::debug »"},{"index.md":"PHP Manual"},{"class.mysqli.md":"mysqli"}]}},"__N_SSG":true}