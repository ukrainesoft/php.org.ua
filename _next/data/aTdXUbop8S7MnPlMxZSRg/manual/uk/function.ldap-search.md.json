{"pageProps":{"page":{"slug":"function.ldap-search.md","content":"# ldap\\_search\n\n(PHP 4, PHP 5, PHP 7, PHP 8)\n\nldap\\_search — Пошук по LDAP дереву\n\n### Опис\n\n```methodsynopsis\nldap_search(    LDAP\\Connection|array $ldap,    array|string $base,    array|string $filter,    array $attributes = [],    int $attributes_only = 0,    int $sizelimit = -1,    int $timelimit = -1,    int $deref = LDAP_DEREF_NEVER,    ?array $controls = null): LDAP\\Result|array|false\n```\n\nВиконує пошук для зазначеного фільтра в директорії з межами **`LDAP_SCOPE_SUBTREE`**. Еквівалентний пошук по всьому каталогу.\n\nМожна також виконувати паралельний пошук. У цьому випадку першим аргументом має бути масив екземплярів [LDAP\\\\Connection](class.ldap-connection.md), а чи не один екземпляр. Якщо пошук не повинен використовувати один і той же базовий DN і фільтр, як аргументи можна передати масив базових DN і/або масив фільтрів. Кількість елементів у масивах має збігатися з кількістю екземплярів [LDAP\\\\Connection](class.ldap-connection.md)оскільки перші записи масивів використовуються для одного пошуку, другі — для іншого і так далі. При паралельному пошуку повертається масив екземплярів [LDAP\\\\Result](class.ldap-result.md), за исключением возникновения ошибки, когда возвращается значение\\*\\*`false`\\*\\*\n\n### Список параметрів\n\n`ldap`\n\nЕкземпляр [LDAP\\\\Connection](class.ldap-connection.md), що повертається функцією [ldap\\_connect()](function.ldap-connect.md)\n\n`base`\n\nБазове DN для каталогу.\n\n`filter`\n\nПошуковий фільтр може бути простим або розширеним, використовуючи логічні оператори у форматі, описаному в документації LDAP (див. [» Netscape Directory SDK](https://wiki.mozilla.org/Mozilla_LDAP_SDK_Programmer%27s_Guide/Searching_the_Directory_With_LDAP_C_SDK) або [» RFC4515](http://www.faqs.org/rfcs/rfc4515) для повної інформації про фільтри).\n\n`attributes`\n\nМасив необхідних атрибутів, наприклад, `array(\"mail\", \"sn\", \"cn\")`. . Зауважте, що \"dn\" завжди повертається, незалежно від того, які типи атрибутів потрібні.\n\nВикористання цього параметра набагато ефективніше, ніж стандартна дія (яка повинна повернути всі атрибути та присвоєні їм значення). Тому використання цього параметра вважається гарною практикою.\n\n`attributes_only`\n\nПовинен дорівнювати 1, якщо потрібні тільки типи атрибута. Якщо дорівнює 0, то, за умовчанням, вибираються типи атрибутів і значення.\n\n`sizelimit`\n\nДозволяє обмежити кількість вибраних записів. Встановлення цього параметра дорівнює 0 означає, що обмеження відсутнє.\n\n> **Зауваження** :\n> \n> Цей параметр НЕ може перевизначати попереднє встановлення sizelimit на стороні сервера. Хоча його можна встановити нижче.\n> \n> Деякі хости серверів каталогів будуть налаштовані так, щоб повернути не більше, ніж попередньо встановлена ​​кількість записів. Якщо це станеться, сервер вкаже, що повернув лише частковий набір результатів. Це також відбувається, якщо Ви використовуєте цей параметр, щоб обмежити кількість вибраних записів.\n\n`timelimit`\n\nВстановлює кількість секунд, що обмежує процес пошуку. Встановлення цього параметра дорівнює 0 означає, що обмеження відсутнє.\n\n> **Зауваження** :\n> \n> Цей параметр НЕ може перевизначати передустановку timelimit на стороні сервера. Хоча його можна встановити нижче.\n\n`deref`\n\nВизначає, як псевдоніми повинні бути оброблені під час пошуку. Може бути одним із наступних:\n\n-   \\*\\*`LDAP_DEREF_NEVER`\\*\\*- (за умовчанням) псевдоніми ніколи не розіменовуються.\n-   \\*\\*`LDAP_DEREF_SEARCHING`\\*\\*- псевдоніми мають бути розіменовані під час пошуку, але не при визначенні розташування базового об'єкта пошуку.\n-   \\*\\*`LDAP_DEREF_FINDING`\\*\\*- псевдоніми мають бути розіменовані щодо місця розташування базового об'єкта, але з під час пошуку.\n-   \\*\\*`LDAP_DEREF_ALWAYS`\\*\\*- псевдоніми мають розіменовуватися завжди.\n\n`controls`\n\nМассив[керуючих констант LDAP](ldap.controls.md)для отправки в запросе.\n\n### Значення, що повертаються\n\nПовертає екземпляр [LDAP\\\\Result](class.ldap-result.md), масив екземплярів [LDAP\\\\Result](class.ldap-result.md)или\\*\\*`false`\\*\\*в случае возникновения ошибки.\n\n### список змін\n\n| Версия | Опис |\n| --- | --- |\n| 8.1.0 | Параметр`ldap` тепер чекає екземпляр [LDAP\\\\Connection](class.ldap-connection.md); раніше очікувався ресурс ([resource](language.types.resource.md) `ldap link` |\n| 8.1.0 | Повертає екземпляр [LDAP\\\\Result](class.ldap-result.md); раніше повертався ресурс ([resource](language.types.resource.md) |\n| 8.0.0 | `controls` тепер припускає значення null; раніше значення за умовчанням було `[]` |\n| 7.3.0 | Додано підтримку параметра `controls` |\n\n### Приклади\n\nПриклад нижче отримує організаційну одиницю, прізвище, ім'я та адресу електронної пошти для всіх людей у ​​My Company, де прізвище або ім'я містять підрядок $person. Цей приклад використовує логічний фільтр, щоб сказати серверу, що потрібно шукати більше інформації, ніж в одному атрибуті.\n\n**Приклад #1 LDAP пошук**\n\n```php\n<?php\n// $ds допустимый экземпляр LDAP\\Connection\n\n// $person всё или часть имени человека, н-р \"Jo\"\n\n$dn = \"o=My Company, c=US\";\n$filter=\"(|(sn=$person*)(givenname=$person*))\";\n$justthese = array(\"ou\", \"sn\", \"givenname\", \"mail\");\n\n$sr=ldap_search($ds, $dn, $filter, $justthese);\n\n$info = ldap_get_entries($ds, $sr);\n\necho $info[\"count\"].\" записей возвращено\\n\";\n?>\n```\n","title":"ldap\\_search","contentType":2,"navigation":[{"function.ldap-sasl-bind.md":"« ldap\\_sasl\\_bind"},{"function.ldap-set-option.md":"ldap\\_set\\_option »"},{"index.md":"PHP Manual"},{"ref.ldap.md":"Функції LDAP"}]}},"__N_SSG":true}