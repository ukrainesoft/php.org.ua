{"pageProps":{"page":{"slug":"ldap.controls.md","content":"# Керуючі об'єкти LDAP\n\nКеруючі об'єкти - це спеціальні об'єкти, які можуть бути передані спільно із запитом до LDAP для зміни його поведінки на час виконання запиту. Також це можуть бути об'єкти, що надсилаються сервером спільно з відповіддю на запит, зазвичай як відповіді на керуючі об'єкти, що прийшли з запитом, для надання додаткової інформації.\n\n> **Зауваження** :\n> \n> Не всі об'єкти керування підтримуються всіма серверами LDAP. Щоб визначити, які з них підтримуються вашим сервером, виконайте запит кореневого DSE шляхом читання порожнього dn з фільтром (objectClass=\\*\n> \n> **Приклад #1 Тестування підтримки управління пагінацією результату**\n> \n> ```php\n> <?php\n> \n> // $ds - коректний ідентифікатор з'єднання із сервером каталогів\n> \n> $result = ldap_read($ds, '', '(objectClass=*)', ['supportedControl']);\n> if (!in_array(LDAP_CONTROL_PAGEDRESULTS, ldap_get_entries($ds, $result)[0]['supportedcontrol'])) {\n>   die(\"Цей сервер не підтримує управління пагінацією\");\n> }\n> \n> ?>\n> ```\n\nПочинаючи з PHP 7.3, ви можете надсилати керуючі об'єкти паралельно із запитом для всіх функцій запитів, які приймають параметр serverctrls. Якщо існує \"ext\" версія функції, то для отримання повного доступу до всіх об'єктів відповіді та можливості розібрати відповідь за допомогою [ldap\\_parse\\_result()](function.ldap-parse-result.md), Використовуйте саме її.\n\nПараметр serverctrls повинен містити масив, що містить масив для кожного об'єкта, що посилається, з наступними ключами:\n\noid (string)\n\nOID об'єкта, що управляє. Використовуйте константи LDAP\\_CONTROL\\_Смотрите[константи LDAP](ldap.constants.md)\n\niscritical (bool)\n\nЯкщо об'єкт, що управляє, повинен бути позначений як критичний. Запит завершиться помилкою, якщо подібний об'єкт не підтримується сервером, або якщо його неможливо застосувати. Зверніть увагу, що деякі об'єкти завжди повинні бути позначені як критичні, як описано у відповідному RFC. За замовчуванням **`false`**\n\nvalue ([mixed](language.types.declarations.md#language.types.declarations.mixed)) .\n\nЯкщо застосовно, то значення об'єкта, що управляє. Докладніше читайте далі.\n\nБільшість значень надсилаються на сервер закодованими BER. Ви можете займатися кодуванням самостійно, або використовувати масиви з коректними ключами, і тоді все відбудеться автоматично. Керовані об'єкти, що підтримуються:\n\n-   \\*\\*`LDAP_CONTROL_PAGEDRESULTS`\\*\\*Очікувані ключі\\[size\\]и\\[cookie\\]\n    \n-   \\*\\*`LDAP_CONTROL_ASSERT`\\*\\*Очікуваний ключ - filter\n    \n-   \\*\\*`LDAP_CONTROL_VALUESRETURNFILTER`\\*\\*Очікуваний ключ - filter\n    \n-   \\*\\*`LDAP_CONTROL_PRE_READ`\\*\\*Очікуваний ключ - attrs\n    \n-   \\*\\*`LDAP_CONTROL_POST_READ`\\*\\*Очікуваний ключ - attrs\n    \n-   \\*\\*`LDAP_CONTROL_SORTREQUEST`\\*\\*Очікується масив масивів із ключами: attr,\\[oid\\] \\[reverse\\]\n    \n-   \\*\\*`LDAP_CONTROL_VLVREQUEST`\\*\\*Очікувані ключі: before, after, attrvalue | (offset, count),\\[context\\]\n    \n\nДля наступних об'єктів, що управляють, значення не потрібні:\n\n-   **`LDAP_CONTROL_PASSWORDPOLICYREQUEST`**\n    \n-   **`LDAP_CONTROL_MANAGEDSAIT`**\n    \n-   **`LDAP_CONTROL_DONTUSECOPY`**\n    \n\nОб'єкт **`LDAP_CONTROL_PROXY_AUTHZ`** - Унікальний випадок, так як його значення не потрібно кодувати BER, так що ви можете використовувати звичайний рядок.\n\nЯкщо керуючі об'єкти передані у функцію [ldap\\_parse\\_result()](function.ldap-parse-result.md), значення будуть перетворені на масив, якщо підтримуються. Підтримується таке:\n\n-   \\*\\*`LDAP_CONTROL_PASSWORDPOLICYRESPONSE`\\*\\*Ключі: expire, grace,\\[error\\]\n    \n-   \\*\\*`LDAP_CONTROL_PAGEDRESULTS`\\*\\*Ключі: size, cookie\n    \n-   \\*\\*`LDAP_CONTROL_PRE_READ`\\*\\*Ключі: dn та імена атрибутів LDAP\n    \n-   \\*\\*`LDAP_CONTROL_POST_READ`\\*\\*Ключі: dn та імена атрибутів LDAP\n    \n-   \\*\\*`LDAP_CONTROL_SORTRESPONSE`\\*\\*Ключі: errcode,\\[attribute\\]\n    \n-   \\*\\*`LDAP_CONTROL_VLVRESPONSE`\\*\\*Ключі: target, count, errcode, context\n","title":"Керуючі об'єкти LDAP","contentType":2,"navigation":[{"ldap.using.md":"« Використання дзвінків PHP LDAP"},{"ldap.examples.md":"Приклади »"},{"index.md":"PHP Manual"},{"book.ldap.md":"LDAP"}]}},"__N_SSG":true}