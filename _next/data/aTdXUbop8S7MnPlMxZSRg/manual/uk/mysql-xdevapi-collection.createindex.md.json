{"pageProps":{"page":{"slug":"mysql-xdevapi-collection.createindex.md","content":"# Collection::createIndex\n\n(No version information available, might only be in Git)\n\nCollection::createIndex — Створює індекс для колекції\n\n### Опис\n\n```methodsynopsis\npublic mysql_xdevapi\\Collection::createIndex(string $index_name, string $index_desc_json): void\n```\n\nСтворює індекс для колекції.\n\nВидається виняток, якщо індекс із таким ім'ям вже існує, або якщо визначення індексу сформовано неправильно.\n\n### Список параметрів\n\n`index_name`\n\nІм'я індексу, який потрібно створити. Має бути коректним ім'ям індексу, допустимим для SQL-запиту `CREATE INDEX`\n\n`index_desc_json`\n\nВизначення індексу для створення. Містить масив об'єктів IndexField, і кожен об'єкт описує один елемент документа для додавання до індексу, а також необов'язковий рядок для типу індексу, який може бути INDEX (за замовчуванням) або SPATIAL.\n\nОдин опис IndexField складається з наступних полів:\n\n-   `field`: рядок, повний шлях документа до елемента документа чи поля для індексації\n    \n-   `type`: рядок, один із підтримуваних типів стовпців SQL для зіставлення поля. Для числових типів можна додати необов'язкове ключове слово UNSIGNED. Для типу TEXT може бути додана довжина для індексації.\n    \n-   `required`: логічне значення (необов'язкове) true, якщо поле має бути обов'язковим у документі. За замовчуванням використовується значення\\*\\*`false`**, за исключением типа`GEOJSON`, де за замовчуванням використовується значення**`true`\\*\\*\n    \n-   `options`: ціле число, (необов'язкове) прапори спеціальних опцій для використання при декодуванні даних`GEOJSON`\n    \n-   `srid`: ціле число (необов'язкове) значення srid для використання при декодуванні даних`GEOJSON`\n    \n\nПомилково включати інші поля, не описані вище, до документів IndexDefinition або IndexField.\n\n### Значення, що повертаються\n\n### Приклади\n\n**Приклад #1 Приклад використання** mysql\\_xdevapi\\\\Collection::createIndex()\\*\\*\\*\\*\n\n```php\n<?php\n$session = mysql_xdevapi\\getSession(\"mysqlx://user:password@localhost\");\n$session->sql(\"DROP DATABASE IF EXISTS addressbook\")->execute();\n$session->sql(\"CREATE DATABASE addressbook\")->execute();\n\n$schema     = $session->getSchema(\"addressbook\");\n$collection = $schema->createCollection(\"people\");\n\n// Создание текстового индекса\n$collection->createIndex(\n  'myindex1',\n  '{\"fields\": [{\n    \"field\": \"$.name\",\n    \"type\": \"TEXT(25)\",\n    \"required\": true}],\n    \"unique\": false}'\n);\n\n// Пространственный индекс\n$collection->createIndex(\n  'myindex2',\n  '{\"fields\": [{\n    \"field\": \"$.home\",\n    \"type\": \"GEOJSON\",\n    \"required\": true}],\n    \"type\": \"SPATIAL\"}'\n);\n\n// Индекс с несколькими полями\n$collection->createIndex(\n  'myindex3',\n  '{\"fields\": [\n    {\n      \"field\": \"$.name\",\n      \"type\": \"TEXT(20)\",\n      \"required\": true\n    },\n    {\n      \"field\": \"$.age\",\n      \"type\": \"INTEGER\"\n    },\n    {\n      \"field\": \"$.job\",\n      \"type\": \"TEXT(30)\",\n      \"required\": false\n    }\n  ],\n  \"unique\": true\n  }'\n);\n```\n","title":"Collection::createIndex","contentType":2,"navigation":[{"mysql-xdevapi-collection.count.md":"« Collection::count"},{"mysql-xdevapi-collection.dropindex.md":"Collection::dropIndex »"},{"index.md":"PHP Manual"},{"class.mysql-xdevapi-collection.md":"mysql\\_xdevapi\\\\Collection"}]}},"__N_SSG":true}