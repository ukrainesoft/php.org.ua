{"pageProps":{"page":{"slug":"function.ssh2-connect.md","content":"# ssh2\\_connect\n\n(PECL ssh2 >= 0.9.0)\n\nssh2\\_connect — Підключення до SSH-сервера\n\n### Опис\n\n```methodsynopsis\nssh2_connect(    string $host,    int $port = 22,    array $methods = ?,    array $callbacks = ?): resource|false\n```\n\nВстановлює з'єднання з сервером SSH.\n\nПосле соединения, пользователь должен проверить ключ сервера, используя функцию[ssh2\\_fingerprint()](function.ssh2-fingerprint.md), і після цього авторизуватись, використовуючи пароль або відкритий ключ.\n\n### Список параметрів\n\n`host`\n\n`port`\n\n`methods`\n\nПараметр`methods` може бути асоціативним масивом, що містить до чотирьох записів, наведених нижче.\n\n**Параметр`methods` може бути асоціативним масивом, що містить від одного до чотирьох параметрів**\n\n| Индекс | Что обозначает | Допустимые значения\\* |\n| --- | --- | --- |\n| kex | Список методів обміну ключами, розділених комою, як перевагу. | `diffie-hellman-group1-sha1` `diffie-hellman-group14-sha1`, и`diffie-hellman-group-exchange-sha1` |\n| hostkey | Список методів ключів хоста, розділених комою, як перевагу. | `ssh-rsa`и`ssh-dss` |\n| client\\_to\\_server | Асоціативний масив, що містить налаштування шифрування, стиснення та методу імітівставки (\"message authentication code\" або MAC) для повідомлень, надісланих клієнтом серверу. |  |\n| server\\_to\\_client | Асоціативний масив, що містить налаштування шифрування, стиснення та методу імітівставки (\"message authentication code\" або MAC) для повідомлень, надісланих сервером клієнту. |  |\n\n\\* - Значення, що підтримуються, залежать від методів, що підтримуються базовою бібліотекою. Детальніше читайте документацію з [» libssh2](http://libssh2.org/)\n\n**`client_to_server`и`server_to_client` можуть бути асоціативними масивами, що містять будь-який або всі нижчеперелічені параметри.**\n\n| Индекс | Что обозначает | Допустимые значения\\* |\n| --- | --- | --- |\n| crypt | Список методів шифрування, розділених комою, як перевагу. | `rijndael-cbc@lysator.liu.se` `aes256-cbc` `aes192-cbc` `aes128-cbc` `3des-cbc` `blowfish-cbc` `cast128-cbc` `arcfour`и`none**` |\n| comp | Список методів стиснення, розділених комою, як перевагу. | `zlib`и`none` |\n| mac | Список методів MAC, розділених комою, у порядку переваги. | `hmac-sha1` `hmac-sha1-96` `hmac-ripemd160` `hmac-ripemd160@openssh.com`и`none**` |\n\n> **Зауваження** **Метод шифрування`none`і MAC**\n> \n> В цілях безпеки `none` відключений у базовій бібліотеці [» libssh2](http://libssh2.org/), якщо ви не дозволили його самостійно на етапі збирання, використовуючи відповідні ключі ./configure. Дивіться документацію з базової бібліотеки для більш детальної інформації.\n\n`callbacks`\n\n`callbacks` може бути асоціативним масивом, що містить будь-який або всі нижчеперелічені параметри\n\n**Параметри callback-функції**\n\n| Индекс | Что обозначает | Прототип |\n| --- | --- | --- |\n| ignore | Ім'я функції, що викликається після отримання пакета **`SSH2_MSG_IGNORE`** | void ignore\\_cb($message) |\n| debug | Ім'я функції, що викликається після отримання пакета **`SSH2_MSG_DEBUG`** | void debug\\_cb($message, $language, $always\\_display) |\n| macerror | Ім'я функції, що викликається, якщо пакет отримано, але MAC не вдався. Якщо callback-функція поверне **`true`**, розбіжність буде проігноровано, інакше з'єднання буде обірвано. | bool macerror\\_cb($packet) |\n| disconnect | Ім'я функції, що викликається після отримання пакета **`SSH2_MSG_DISCONNECT`** | void disconnect\\_cb($reason, $message, $language) |\n\n### Значення, що повертаються\n\nПовертає ресурс у разі успішного виконання або \\*\\*`false`\\*\\*в случае возникновения ошибки.\n\n### Приклади\n\n**Приклад #1 Приклад**ssh2\\_connect()\\*\\*\\*\\*\n\nВідкриємо з'єднання, примусово використовуючи такі налаштування: 3des-cbc під час відправлення пакетів, шифр aes будь-якої сили при отриманні пакетів, без стиснення в обох напрямках та обмін ключами Group1.\n\n```php\n<?php\n/* Оповещаем пользователя, если сервер прервал соединение */\nfunction my_ssh_disconnect($reason, $message, $language) {\n  printf(\"Сервер отключился с кодом причины [%d] и сообщением: %s\\n\",\n         $reason, $message);\n}\n\n$methods = array(\n  'kex' => 'diffie-hellman-group1-sha1',\n  'client_to_server' => array(\n    'crypt' => '3des-cbc',\n    'comp' => 'none'),\n  'server_to_client' => array(\n    'crypt' => 'aes256-cbc,aes192-cbc,aes128-cbc',\n    'comp' => 'none'));\n\n$callbacks = array('disconnect' => 'my_ssh_disconnect');\n\n$connection = ssh2_connect('shell.example.com', 22, $methods, $callbacks);\nif (!$connection) die('Не удалось установить соединение');\n?>\n```\n\n### Дивіться також\n\n-   [ssh2\\_fingerprint()](function.ssh2-fingerprint.md) \\- Отримання відбитка віддаленого сервера\n-   [ssh2\\_auth\\_none()](function.ssh2-auth-none.md) - Аутентифікація як \"none\"\n-   [ssh2\\_auth\\_password()](function.ssh2-auth-password.md) \\- Аутентифікація через SSH із використанням звичайного пароля\n-   [ssh2\\_auth\\_pubkey\\_file()](function.ssh2-auth-pubkey-file.md) \\- Аутентифікація з відкритим ключем\n-   [ssh2\\_disconnect()](function.ssh2-disconnect.md) \\- Закрити з'єднання з віддаленим сервером SSH\n","title":"ssh2\\_connect","contentType":2,"navigation":[{"function.ssh2-auth-pubkey-file.md":"« ssh2\\_auth\\_pubkey\\_file"},{"function.ssh2-disconnect.md":"ssh2\\_disconnect »"},{"index.md":"PHP Manual"},{"ref.ssh2.md":"Функції SSH2"}]}},"__N_SSG":true}