- [« Анонімні функції](functions.anonymous.md)
- [Callback-функції як об'єкти першого класу
»](functions.first_class_callable_syntax.md)

- [PHP Manual](index.md)
- [Функції](language.functions.md)
- Стрілочні функції

## Стрілочні функції

Стрілецькі функції з'явилися в PHP 7.4, як більш лаконічний синтаксис
для [анонімних функцій](functions.anonymous.md).

І анонімні, і стрілочні функції реалізовані з використанням класу
[[Closure](class.closure.md)](class.closure.md).

Основний вид запису стрілочних функцій: `fn (argument_list) u003d> expr`.

Стрілецькі функції підтримують ті ж можливості, що і [анонімні
функції](functions.anonymous.md), за винятком того, що
використання змінних із батьківської області завжди виконується
автоматично.

Коли змінна, що використовується у виразі, визначена у батьківській
області вона буде неявно захоплена за значенням. У наступному прикладі
функції $fn1 і $fn2 поводяться однаково.

**Приклад #1 Стрілецькі функції захоплюють змінні за значенням
автоматично**

` <?php$y u003d 1;$fn1 u003d fn($x) u003d> $x + $y;// еквівалентно використання $y за призначенням:$fn2 u003d function ($x) use ($y x + $y;};var_export($fn1(3));?> `

Результат виконання цього прикладу:

4

Це також працює у вкладених стрілочних функціях:

**Приклад #2 Стрілецькі функції захоплюють змінні за значенням
автоматично, навіть коли вони вкладені**

` <?php$z u003d 1;$fn u003d fn($x) u003d> fn($y) u003d> $x * $y + $z;// Виведе 51var_export($fn(5)(10)); ?> `

Подібно до анонімних функцій, синтаксис стрілочних функцій допускає
довільні сигнатури функцій, включаючи типи параметрів та повертаються
значень, значення за замовчуванням, змінні, а також передачу та повернення
за посиланням. Нижче наведено коректні приклади стрілочних функцій:

**Приклад #3 Приклади використання стрілочних функцій**

` <?phpfn(array $x) u003d> $x;static fn(): int u003d> $x;fn($x u003d 42) u003d> $x;fn(&$x) u003d> $x;fn&( $x) u003d> $x;fn($x, ...$rest) u003d> $rest;?> `

Стрілецькі функції використовують прив'язку змінних за значенням. Це
приблизно еквівалентно виконання `use($x)` для кожної змінної `$x`,
використовується всередині стрілочної функції. Прив'язка за значенням означає,
що неможливо змінити будь-які значення із зовнішньої області. Замість
цього можна використовувати [анонімні функції](functions.anonymous.md)
для прив'язок за посиланнями.

**Приклад #4 Значення із зовнішньої області видимості не можуть бути змінені
стрілковими функціями**

` <?php$x u003d 1;$fn u003d fn() u003d> $x++; // Нічого не змінить$fn();var_export($x); // Виведе 1?> `

### Список змін

| Версія | Опис |
|--------|------------------------------------|
| 7.4.0 | Стали доступні стрілочні функції. |

### Примітки

> **Примітка**: Можна використовувати
> [func_num_args()](function.func-num-args.md),
> [func_get_arg()](function.func-get-arg.md) та
> [func_get_args()](function.func-get-args.md) у стрілочній функції.
