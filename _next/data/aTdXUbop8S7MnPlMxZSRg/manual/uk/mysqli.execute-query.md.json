{"pageProps":{"page":{"slug":"mysqli.execute-query.md","content":"# mysqli::execute\\_query\n\n# mysqli\\_execute\\_query\n\n(PHP 8 >= 8.2.0)\n\nmysqli::execute\\_query -- mysqli\\_execute\\_query — Підготовка, зв'язування параметрів та виконання SQL-запиту\n\n### Опис\n\nОб'єктно-орієнтований стиль\n\n```methodsynopsis\npublic mysqli::execute_query(string $query, ?array $params = null): mysqli_result|bool\n```\n\nПроцедурний стиль\n\n```methodsynopsis\nmysqli_execute_query(mysqli $mysql, string $query, ?array $params = null): mysqli_result|bool\n```\n\nПідготовляє SQL-запит, пов'язує параметри та виконує його. Метод **mysqli::execute\\_query()** є скороченням для [mysqli::prepare()](mysqli.prepare.md) [mysqli\\_stmt::bind\\_param()](mysqli-stmt.bind-param.md) [mysqli\\_stmt::execute()](mysqli-stmt.execute.md) і [mysqli\\_stmt::get\\_result()](mysqli-stmt.get-result.md)\n\nШаблон запиту може мати нуль або більше маркерів параметрів зі знаком питання (`?` ), які також називаються заповнювачами. Значення параметрів мають бути представлені у вигляді масиву (array), переданого у параметр `params`\n\nПідготовлений запит створюється під капотом, але він ніколи не виводиться за межі функції. Неможливо отримати доступ до властивостей запиту, як це можна зробити з об'єктом [mysqli\\_stmt](class.mysqli-stmt.md). Через це обмеження інформація про стан копіюється в об'єкт [mysqli](class.mysqli.md)и доступна с помощью его методов, наПриклад,[mysqli\\_affected\\_rows()](mysqli.affected-rows.md) або [mysqli\\_error()](mysqli.error.md)\n\n> **Зауваження** :\n> \n> В случае, когда функции**mysqli\\_execute\\_query()** передається запит, довжина якого перевищує `max_allowed_packet` сервера, коди помилок, що повертаються, різняться в залежності від операційної системи. Поведінка така:\n> \n> -   У Linux повертається код помилки 1153. Повідомлення про помилку означає, що отримано пакет розміром більше`max_allowed_packet`(got a packet bigger than`max_allowed_packet`bytes).\n>     \n> -   Windows повертається код помилки 2006. Повідомлення про помилку означає, що сервер недоступний (server has gone away).\n>     \n\n### Список параметрів\n\n`mysql`\n\nТільки для процедурного стилю: об'єкт [mysqli](class.mysqli.md), який повернула функція [mysqli\\_connect()](function.mysqli-connect.md)или функция[mysqli\\_init()](mysqli.init.md)\n\n`query`\n\nЗапит у вигляді рядка. Він повинен складатися з одного SQL-запиту.\n\nSQL-запит може містити нуль або більше маркерів параметрів, представлених символами знака питання (`?` ) у відповідних позиціях.\n\n> **Зауваження** :\n> \n> Ці мітки можна вбудовувати лише у певні місця у виразі. Наприклад, вони дозволені у списку `VALUES()` вирази `INSERT` (щоб задати значення стовпців для рядка), або в операціях порівняння речення `WHERE` для завдання порівнюваного значення. Однак вони не дозволені як ідентифікатори (наприклад, імена таблиць або стовпців).\n\n`params`\n\nНеобов'язковий список у вигляді масиву (array) з такою кількістю елементів, скільки пов'язаних параметрів у SQL-запиті. Кожне значення сприймається як рядок (string).\n\n### Значення, що повертаються\n\nПовертає **`false`** у разі виникнення помилки. Для успішних запитів, що створюють набір результатів, таких як `SELECT, SHOW, DESCRIBE`или`EXPLAIN`, повертає об'єкт [mysqli\\_result](class.mysqli-result.md). Для інших успішних запитів повертається **`true`**\n\n### Приклади\n\n**Приклад #1 Приклад використання** mysqli::execute\\_query()\\*\\*\\*\\*\n\nОб'єктно-орієнтований стиль\n\n```php\n<?php\n\nmysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);\n$mysqli = new mysqli('localhost', 'my_user', 'my_password', 'world');\n\n$query = 'SELECT Name, District FROM City WHERE CountryCode=? ORDER BY Name LIMIT 5';\n$result = $mysqli->execute_query($query, ['DEU']);\nforeach ($result as $row) {\n    printf(\"%s (%s)\\n\", $row[\"Name\"], $row[\"District\"]);\n}\n```\n\nПроцедурний стиль\n\n```php\n<?php\n\nmysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);\n$link = mysqli_connect(\"localhost\", \"my_user\", \"my_password\", \"world\");\n\n$query = 'SELECT Name, District FROM City WHERE CountryCode=? ORDER BY Name LIMIT 5';\n$result = mysqli_execute_query($link, $query, ['DEU']);\nforeach ($result as $row) {\n    printf(\"%s (%s)\\n\", $row[\"Name\"], $row[\"District\"]);\n}\n```\n\nВисновок наведених прикладів буде схожим на:\n\n```\nAachen (Nordrhein-Westfalen)\nAugsburg (Baijeri)\nBergisch Gladbach (Nordrhein-Westfalen)\nBerlin (Berliini)\nBielefeld (Nordrhein-Westfalen)\n```\n\n### Дивіться також\n\n-   [mysqli\\_prepare()](mysqli.prepare.md) \\- готує SQL вираз до виконання\n-   [mysqli\\_stmt\\_execute()](mysqli-stmt.execute.md) \\- Виконує підготовлене затвердження\n-   [mysqli\\_stmt\\_bind\\_param()](mysqli-stmt.bind-param.md) \\- Прив'язка змінних до параметрів запиту, що готується.\n-   [mysqli\\_stmt\\_get\\_result()](mysqli-stmt.get-result.md) \\- Отримує результат із підготовленого запиту у вигляді об'єкта mysqli\\_result\n","title":"mysqli::execute\\_query","contentType":2,"navigation":[{"mysqli.error.md":"« mysqli::$error"},{"mysqli.field-count.md":"mysqli::$field\\_count »"},{"index.md":"PHP Manual"},{"class.mysqli.md":"mysqli"}]}},"__N_SSG":true}