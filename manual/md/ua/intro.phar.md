- [«Phar](book.phar.md)
- [Встановлення та налаштування »](phar.setup.md)

- [PHP Manual](index.md)
- [Phar] (book.phar.md)
-   Вступ

# Вступ

Модуль phar надає можливість помістити цілий PHP-додаток у
один-єдиний файл з ім'ям phar (PHP Archive) для простого
поширення та установки. Крім цього, модуль phar надає
метод абстракції формату файлу для створення та обробки архівів tar та
zip через клас [PharData](class.phardata.md), приблизно як PDO
забезпечує єдиний інтерфейс доступу до різних баз даних. В
на відміну від PDO, який не може конвертувати між різними базами
даних, Phar може конвертувати дані між форматами tar, zip та phar
всього одним рядком коду. Дивіться
[Phar::convertToExecutable()](phar.converttoexecutable.md) для
приклад.

Що таке phar? Phar-архіви найкраще можна охарактеризувати як
зручний спосіб групування кількох файлів на один. Також phar архів
надає можливість розповсюджувати цілий PHP-додаток в одному
єдиному файлі і запускати його прямо з цього файлу без
необхідності розпаковувати його на диск. Крім того, phar-архіви можуть
виконуватися PHP з тією ж легкістю, що і будь-які інші файли, як
командного рядка, а також через веб-сервер. Phar - це як флеш-накопичувач
для PHP-програм.

Phar реалізує цю функціональність через потоки (book.stream.md).
Зазвичай, щоб використовувати в PHP-скрипті зовнішній файл, ви б
скористалися, наприклад, [include](function.include.md):

**Приклад #1 Використання зовнішнього файла**

`<?php include '/path/to/external/file.php'; ?> `

PHP може розглядати це як перетворення
`/path/to/external/file.php` в обгортку потоку
`file:///path/to/external/file.php`, а насправді він використовує
потокові функції обгортки простого файлового потоку для доступу до всіх
локальних файлів.

Щоб використовувати файл `file.php`, що знаходиться усередині phar-архіву
`/path/to/myphar.phar`, використовується синтаксис дуже схожий на
синтаксис `file://` вище.

**Приклад #2 Використання файлу всередині phar-архіву**

`<?php include 'phar:///path/to/myphar.phar/file.php'; ?> `

Насправді, можна розглядати phar-архів як би це був
зовнішній диск, використовуючи будь-які [fopen()](function.fopen.md)-подібні
функції, [opendir()](function.opendir.md) та
[mkdir()](function.mkdir.md)-подібні функції для читання, зміни,
або створення нових файлів та директорій усередині phar-архіву. Це дозволяє
цілому PHP-додатку поширюватися в одному файлі і запускатися прямо
із цього файлу.

Найчастіше використовуване застосування для phar-архіву - це
розповсюдження цілої програми в одному файлі. Наприклад, установник
PEAR, який постачається разом з PHP, є phar-архівом. Для
використання phar-архіву, що розповсюджується таким способом, архів може
бути виконаний через консоль або через веб-сервер.

Phar-архіви можуть поширюватися як архіви `tar` та `zip`, або як
формат файлу `phar`, призначений спеціально для
модуля phar. Кожен формат файлу має як переваги, так і
недоліки. Формати tar та zip можуть бути прочитані або витягнуті будь-який
сторонньої утилітою, яка може працювати з цими форматами. Але щоб
PHP міг їх запускати, йому буде потрібний модуль phar. Файли в
phar-форматі налаштовуються та унікальні для модуля phar, і можуть бути
створені лише ним або PEAR-пакетом
[» PHP_Archive](https://pear.php.net/package/PHP_Archive). Але їх
перевага в тому, що програми, створені в цьому форматі, будуть
працювати, навіть якщо модуль phar не увімкнено.

Іншими словами, навіть якщо модуль phar відключено, phar-архів все одно
може бути виконаний або підключений. Доступ до окремих файлів в архіві
можливий тільки з модулем phar, якщо архів не був створений з
за допомогою PHP_Archive.

Модуль phar також здатний конвертувати phar-архів з tar в zip або в
phar-формат однією командою:

**Приклад #3 Конвертування phar-архіву з формату phar у формат tar**

`<?php $phar u003d new Phar('myphar.phar'); $pgzu003du003d$phar->convertToExecutable(Phar::TAR, Phar::GZ); // створить myphar.phar.tar.gz ?> `

Phar може стискати окремі файли або архів повністю за допомогою
[gzip](book.zlib.md)-компресії або
[bzip2](book.bzip2.md)-компресії, а також автоматично перевіряти
цілісність архіву, використовуючи сигнатури MD5, SHA-1, SHA-256 або SHA-512.

Нарешті, модуль Phar дбає про вашу безпеку і відключає доступ
на запис для виконуваних phar-архівів за замовчуванням, а також вимагає
відключення на системному рівні налаштування `phar.readonly` у php.ini для
створення чи зміни phar-архівів. Звичайні нездійсненні архіви tar і
zip завжди можуть бути створені або змінені за допомогою класу
[PharData](class.phardata.md).

Якщо ви створюєте програму з метою розповсюдження, ви, можливо,
захочете прочитати розділ [Як створювати
Phar-архіви] (phar.creating.md). Якщо вам потрібно більше інформації про
відмінності між трьома підтримуваними форматами файлів phar, вам слід
прочитати розділ [Phar, Tar та Zip](phar.fileformat.md).

Якщо ви використовуєте phar-додаток, то корисні поради знаходяться в
розділ [Як використати phar-архіви](phar.using.md).

Слово `phar` - це скорочення від `PHP` та `Archive`, і воно частково
засноване на `jar` (Java Archive), знайомому Java-розробникам.

Реалізація Phar-архівів базується на PEAR-пакеті
[» PHP_Archive](https://pear.php.net/package/PHP_Archive), та деталі
Продажі схожі, хоча модуль Phar набагато потужніший. Крім того, модуль
Phar дозволяє більшості PHP-програм запускатися без змін,
тоді як phar-архіви, що базуються на PHP_Archive, часто вимагають
суттєвих змін для роботи.
