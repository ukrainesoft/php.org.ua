{"pageProps":{"page":{"slug":"function.imap-mail-compose.md","content":"# imap\\_mail\\_compose\n\n(PHP 4, PHP 5, PHP 7, PHP 8)\n\nimap\\_mail\\_compose — Створює MIME-повідомлення на основі заданих обгортки та тіла\n\n### Опис\n\n```methodsynopsis\nimap_mail_compose(array $envelope, array $bodies): string|false\n```\n\nСтворює MIME-повідомлення на основі обгортки `envelope` і тіла `bodies`\n\n### Список параметрів\n\n`envelope`\n\nАсоціативний масив із полями заголовка. Допустимі ключі: `\"remail\"` `\"return_path\"` `\"date\"` `\"from\"` `\"reply_to\"` `\"in_reply_to\"` `\"subject\"` `\"to\"` `\"cc\"` `\"bcc\"`и`\"message_id\"`, які встановлюють відповідні заголовки повідомлень у заданий рядок (string). Для встановлення додаткових заголовків підтримується ключ `\"custom_headers\"`, який містить асоціативний масив інших заголовків, наприклад, `[\"User-Agent: My Mail Client\"]`\n\n`bodies`\n\nІндексований масив тел. Перше тіло – це основна частина повідомлення; подальші тіла обробляються тільки якщо воно з типом **`TYPEMULTIPART`**; ці тіла становлять тіла частин.\n\n**Структура масиву тіла**\n\n| Ключ | Тип | Опис |\n| --- | --- | --- |\n| `type` | int | Тип MIME. Один з **`TYPETEXT`**(по умолчанию),**`TYPEMULTIPART`** **`TYPEMESSAGE`** **`TYPEAPPLICATION`** **`TYPEAUDIO`** **`TYPEIMAGE`** **`TYPEMODEL`** або **`TYPEOTHER`** |\n| `encoding` | int | Значение`Content-Transfer-Encoding`. . Одне з **`ENC7BIT`** (default), **`ENC8BIT`** **`ENCBINARY`** **`ENCBASE64`** **`ENCQUOTEDPRINTABLE`** або **`ENCOTHER`** |\n| `charset` | string | Параметр charset типу MIME. |\n| `type.parameters` | array | Асоціативний масив (array) імен параметрів `Content-Type` та їх значень. |\n| `subtype` | string | Підтип MIME, наприклад, `'jpeg'`для\\*\\*`TYPEIMAGE`\\*\\* |\n| `id` | string | Значение`Content-ID` |\n| `description` | string | Значение`Content-Description` |\n| `disposition.type` | string | Значение`Content-Disposition`, наПриклад,`'attachment'` |\n| `disposition` | array | Асоціативний масив (array) імен параметрів `Content-Disposition` та їх значень. |\n| `contents.data` | string | Корисне навантаження. |\n| `lines` | int | Розмір корисного навантаження у рядках. |\n| `bytes` | int | Розмір корисного навантаження у байтах. |\n| `md5` | string | Контрольна сума MD5 корисного навантаження. |\n\n### Значення, що повертаються\n\nПовертає MIME-повідомлення у вигляді рядка (string) або \\*\\*`false`\\*\\*в случае возникновения ошибки.\n\n### Приклади\n\n**Приклад #1 Приклад використання** imap\\_mail\\_compose()\\*\\*\\*\\*\n\n```php\n<?php\n\n$envelope[\"from\"]= \"joe@example.com\";\n$envelope[\"to\"]  = \"foo@example.com\";\n$envelope[\"cc\"]  = \"bar@example.com\";\n\n$part1[\"type\"] = TYPEMULTIPART;\n$part1[\"subtype\"] = \"mixed\";\n\n$filename = \"/tmp/imap.c.gz\";\n$fp = fopen($filename, \"r\");\n$contents = fread($fp, filesize($filename));\nfclose($fp);\n\n$part2[\"type\"] = TYPEAPPLICATION;\n$part2[\"encoding\"] = ENCBINARY;\n$part2[\"subtype\"] = \"octet-stream\";\n$part2[\"description\"] = basename($filename);\n$part2[\"contents.data\"] = $contents;\n\n$part3[\"type\"] = TYPETEXT;\n$part3[\"subtype\"] = \"plain\";\n$part3[\"description\"] = \"description3\";\n$part3[\"contents.data\"] = \"contents.data3\\n\\n\\n\\t\";\n\n$body[1] = $part1;\n$body[2] = $part2;\n$body[3] = $part3;\n\necho nl2br(imap_mail_compose($envelope, $body));\n\n?>\n```\n","title":"imap\\_mail\\_compose","contentType":2,"navigation":[{"function.imap-lsub.md":"« imap\\_lsub"},{"function.imap-mail-copy.md":"imap\\_mail\\_copy »"},{"index.md":"PHP Manual"},{"ref.imap.md":"Функції IMAP"}]}},"__N_SSG":true}