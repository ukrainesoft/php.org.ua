{"pageProps":{"page":{"slug":"function.eio-readdir.md","content":"# eio\\_readdir\n\n(PECL eio >= 0.0.1dev)\n\neio\\_readdir - Читає вміст директорії\n\n### Опис\n\n```methodsynopsis\neio_readdir(    string $path,    int $flags,    int $pri,    callable $callback,    string $data = NULL): resource\n```\n\nЧитає вміст директорії (за допомогою системних викликів `opendir` `readdir`и`closedir`) і або повертає імена файлів, або передає масив як аргумент `result` у функцію `callback`Поведение метода зависит от значения параметра`flags`\n\n### Список параметрів\n\n`path`\n\nШлях до директорії.\n\n`flags`\n\nКомбінація констант *EIO\\_READDIR\\_\\**\n\n`pri`\n\nПріоритет запитів: **`EIO_PRI_DEFAULT`** **`EIO_PRI_MIN`** **`EIO_PRI_MAX`**, или\\*\\*`null`**. Якщо передано **`null`**, то`pri`устанавливается в**`EIO_PRI_DEFAULT`\\*\\*\n\n`callback`\n\nФункция`callback` викликається після завершення запиту. Вона повинна задовольняти наступний прототип:\n\n```php\nvoid callback(mixed $data, int $result[, resource $req]);\n```\n\n`data`\n\nє даними користувача, переданими в запиті.\n\n`result`\n\nмістить результуюче значення, що залежить від запиту; зазвичай це значення, яке повертається відповідним системним викликом.\n\n`req`\n\nє опціональним запитуваним ресурсом, який може використовуватися з такими функціями як [eio\\_get\\_last\\_error()](function.eio-get-last-error.md)\n\n`data`\n\nДані, які потрібно передати функції `callback`\n\n### Значення, що повертаються\n\n**eio\\_readdir()** повертає ресурс запиту у разі успішного виконання або **`false`** у разі виникнення помилки. Також може ставити значення аргументу `result` функції `callback`в зависимости от значения параметра`flags` :\n\n**`EIO_READDIR_DENTS`**(int)\n\nФлаг**eio\\_readdir()**. Якщо заданий, як аргумент callback-функції передаватиметься масив з такими ключами: `'names'` - масив імен директорії `'dents'` - масив структур типу `struct eio_dirent`, кожна з яких є масивом з ключами: `'name'` - Ім'я директорії; `'type'`\\- одна из констант*EIO\\_DT\\_\\** `'inode'`\\- номер узла inode, если доступен, либо пустое значение;\n\n**`EIO_READDIR_DIRS_FIRST`**(int)\n\nЯкщо цей прапор задано, першими повертатимуться імена директорій, потім імена файлів. Порядок проходження імен у кожній групі буде оптимальним для застосування функції stat.\n\n**`EIO_READDIR_STAT_ORDER`**(int)\n\nЯкщо цей прапор задано, імена файлів та директорій повертатимуться в порядку, зручному для збору статистики (`stat`) кожного з об'єктів. Якщо отриманий список імен передбачається передавати у функцію [stat()](function.stat.md), порядок проходження імен забезпечить найшвидшу роботу функції.\n\n**`EIO_READDIR_FOUND_UNKNOWN`**(int)\n\nТипи вузлів:\n\n**`EIO_DT_UNKNOWN`**(int)\n\nНевідомий тип вузла (дуже часто). Необхідна обробка функцією [stat()](function.stat.md)\n\n**`EIO_DT_FIFO`**(int)\n\nТип вузла - FIFO\n\n**`EIO_DT_CHR`**(int)\n\nТип вузла\n\n**`EIO_DT_MPC`**(int)\n\nТип вузла - складовий символьний пристрій (v7+coherent)\n\n**`EIO_DT_DIR`**(int)\n\nТип вузла - директорія\n\n**`EIO_DT_NAM`**(int)\n\nТип вузла - файл зі спеціальним Xenix найменуванням\n\n**`EIO_DT_BLK`**(int)\n\nТип вузла\n\n**`EIO_DT_MPB`**(int)\n\nСкладовий блоковий пристрій (v7+coherent)\n\n**`EIO_DT_REG`**(int)\n\nТип вузла\n\n**`EIO_DT_NWK`**(int)\n\n**`EIO_DT_CMP`**(int)\n\nСпеціальний тип вузла для мереж HP-UX\n\n**`EIO_DT_LNK`**(int)\n\nТип вузла - посилання\n\n**`EIO_DT_SOCK`**(int)\n\nТип вузла - сокет\n\n**`EIO_DT_DOOR`**(int)\n\nТип вузла - Solaris door\n\n**`EIO_DT_WHT`**(int)\n\nТип вузла\n\n**`EIO_DT_MAX`**(int)\n\nМаксимальне значення типу вузла\n\n### Приклади\n\n**Приклад #1 Приклад використання** eio\\_readdir()\\*\\*\\*\\*\n\n```php\n<?php\n/* Вызывается, когда отработает eio_readdir() */\nfunction my_readdir_callback($data, $result) {\n    echo \"Вызвана функция \", __FUNCTION__, \"\\n\";\n    echo \"данные: \"; var_dump($data);\n    echo \"результат: \"; var_dump($result);\n    echo \"\\n\";\n}\n\neio_readdir(\"/var/spool/news\", EIO_READDIR_STAT_ORDER | EIO_READDIR_DIRS_FIRST,\n  EIO_PRI_DEFAULT, \"my_readdir_callback\");\neio_event_loop();\n?>\n```\n\nВисновок наведеного прикладу буде схожим на:\n\n```\nВызвана функция my_readdir_callback\nданные: NULL\nрезультат: array(2) {\n [\"names\"]=>\n  array(7) {\n   [0]=>\n    string(7) \"archive\"\n    [1]=>\n    string(8) \"articles\"\n    [2]=>\n    string(8) \"incoming\"\n    [3]=>\n    string(7) \"innfeed\"\n    [4]=>\n    string(8) \"outgoing\"\n    [5]=>\n    string(8) \"overview\"\n    [6]=>\n    string(3) \"tmp\"\n  }\n [\"dents\"]=>\n  array(7) {\n   [0]=>\n    array(3)\n    {\n     [\"name\"]=>\n      string(7)\n      \"archive\"\n      [\"type\"]=>\n      int(4)\n      [\"inode\"]=>\n      int(393265)\n    }\n   [1]=>\n    array(3)\n    {\n     [\"name\"]=>\n      string(8)\n      \"articles\"\n      [\"type\"]=>\n      int(4)\n      [\"inode\"]=>\n      int(393266)\n    }\n   [2]=>\n    array(3)\n    {\n     [\"name\"]=>\n      string(8)\n      \"incoming\"\n      [\"type\"]=>\n      int(4)\n      [\"inode\"]=>\n      int(393267)\n    }\n   [3]=>\n    array(3)\n    {\n     [\"name\"]=>\n      string(7)\n      \"innfeed\"\n      [\"type\"]=>\n      int(4)\n      [\"inode\"]=>\n      int(393269)\n    }\n   [4]=>\n    array(3)\n    {\n     [\"name\"]=>\n      string(8)\n      \"outgoing\"\n      [\"type\"]=>\n      int(4)\n      [\"inode\"]=>\n      int(393270)\n    }\n   [5]=>\n    array(3)\n    {\n     [\"name\"]=>\n      string(8)\n      \"overview\"\n      [\"type\"]=>\n      int(4)\n      [\"inode\"]=>\n      int(393271)\n    }\n   [6]=>\n    array(3)\n    {\n     [\"name\"]=>\n      string(3)\n      \"tmp\"\n      [\"type\"]=>\n      int(4)\n      [\"inode\"]=>\n      int(393272)\n    }\n  }\n}\n```\n","title":"eio\\_readdir","contentType":2,"navigation":[{"function.eio-readahead.md":"« eio\\_readahead"},{"function.eio-readlink.md":"eio\\_readlink »"},{"index.md":"PHP Manual"},{"ref.eio.md":"Eio Функції"}]}},"__N_SSG":true}