{"pageProps":{"page":{"slug":"ref.pdo-mysql.md","content":"# Функції MySQL (PDO\\_MYSQL)\n\n## Вступ\n\nPDO\\_MYSQL – це драйвер, який реалізує інтерфейс [PHP Data Objects (PDO)](intro.pdo.md) та дає PHP доступ до баз даних MySQL.\n\nДрайвер PDO\\_MYSQL за умовчанням використовує емульовану підготовку.\n\n**MySQL 8**\n\nПри запуску PHP до версії 7.1.16 або PHP з версії 7.2 до 7.2.4 як плагін шифрування паролів за промовчанням для сервера MySQL 8 встановлюють *mysql\\_native\\_password*, інакше буде видана помилка на кшталт *The server requested authentication method unknown to the client\\[caching\\_sha2\\_password\\]*, даже когда плагин*caching\\_sha2\\_password*не задан.\n\nПричина цього в тому, що на сервері MySQL 8 як плагін за замовчуванням вказано caching\\_sha2\\_password, який не розпізнається старими версіями PHP (модулем mysqlnd). Замість нього у файлі конфігурації сервера my.cnf вказують `default_authentication_plugin=mysql_native_password`Плагин*caching\\_sha2\\_password* отримав повну підтримку з PHP 7.4.4. У попередніх версіях PHP його підтримує модуль [mysql\\_xdevapi](book.mysql-xdevapi.md)\n\n**Увага**\n\nОбережно: MySQL таблиці підсистеми зберігання даних не підтримують транзакції. Якщо в коді, який працює з транзакційною базою даних, вказана таблиця, що не підтримує транзакції, MySQL вдасть, що транзакцію успішно розпочато. І ще, кожен виконаний DDL-запит буде неявно фіксувати незавершені транзакції - тобто завершувати відкриті транзакції і виконувати стек незавершених запитів.\n\n> **Зауваження** :\n> \n> Драйвер MySQL неправильно обробляє біт \\*\\*`PDO::PARAM_INPUT_OUTPUT`\\*\\*в методе[PDOStatement::bindParam()](pdostatement.bindparam.md); хоча такі параметри і можна використовувати, вони не оновлюються (тобто фактичний висновок ігнорується).\n\n## Установка\n\nЗазвичай інсталяційні пакети Unix мають у собі бінарні пакети PHP. Незважаючи на те, що ці бінарні пакети зазвичай зібрані за допомогою модуля MySQL, може знадобитися установка бібліотек модулів окремо. Перевірте дистрибутив на наявність потрібних бібліотек через пакетний менеджер.\n\nК Прикладу, на Ubuntu установка пакета`php5-mysql` встановлює модулі ext/mysql, ext/mysqli та PDO\\_MYSQL. На CentOS пакет`php-mysql` також встановлює ці три модулі.\n\nТакож ви завжди можете скомпілювати необхідні модулі самостійно. Складання PHP із вихідних кодів дозволить вам зібрати саме ті модулі MySQL, які вам потрібні, а також вибрати потрібну клієнтську бібліотеку для кожного модуля.\n\nИспользуйте**\\--with-pdo-mysql\\[=DIR\\]** для встановлення модуля PDO MySQL, де необов'язковий параметр `[=DIR]` вказує директорію, де встановлено MySQL. За замовчуванням використовується бібліотека [mysqlnd](book.mysqlnd.md). . Більш детальний розбір на вибір бібліотеки можна почитати в розділі \"[Вибір бібліотеки MySQL](mysqlinfo.library.choosing.md)\".\n\nДодатковий параметр **\\--with-mysql-sock\\[=DIR\\]** вказує розташування unix-сокету MySQL для всіх модулів MySQL, включаючи PDO\\_MYSQL. Якщо параметр не вказано, пошук здійснюється в директоріях за промовчанням.\n\nДодатковий параметр **\\--with-zlib-dir\\[=DIR\\]** використовується як префікс шляху до libz.\n\n```\n$ ./configure --with-pdo-mysql --with-mysql-sock=/var/mysql/mysql.sock\n```\n\nПідтримка SSL вмикається, використовуючи відповідну [константу PDO\\_MySQL](ref.pdo-mysql.md#pdo-mysql.constants), яка еквівалентна виклику [» API MySQL-функції mysql\\_ssl\\_set() в C](http://dev.mysql.com/doc/mysql/en/mysql-ssl-set.md). До того ж, SSL не може бути включений за допомогою **PDO::setAttribute**тому, що з'єднання вже існує. Дивіться документацію MySQL про [» підключення до MySQL з SSL](https://dev.mysql.com/doc/en/using-encrypted-connections.md)\n\n## Обумовлені константи\n\nНаведені нижче константи визначені цим драйвером і будуть доступні лише у випадку, якщо PHP був зібраний за допомогою цього модуля, або модуль був динамічно завантажений під час виконання. Крім того, ці залежні від драйвера константи повинні бути використані лише разом із цим драйвером. Використання атрибутів, специфічних для деякого драйвера з іншим драйвером, може викликати несподівану поведінку. Якщо ваш код виконується з кількома драйверами, можна використовувати функцію [PDO::getAttribute()](pdo.getattribute.md)для получения атрибута\\*\\*`PDO::ATTR_DRIVER_NAME`\\*\\*для проверки драйвера.\n\n**`PDO::MYSQL_ATTR_USE_BUFFERED_QUERY`**(bool)\n\nЗа замовчуванням всі запити виконуються в [буферизованому режимі](mysqlinfo.concepts.buffering.md). Якщо цей атрибут встановлено на значення **`false`** для об'єкту [PDO](class.pdo.md), драйвер MySQL використовуватиме небуферизований режим.\n\n**Приклад #1 Встановлення небуферизованого режиму MySQL**\n\n```php\n<?php\n$pdo = new PDO(\"mysql:host=localhost;dbname=world\", 'my_user', 'my_password');\n$pdo->setAttribute(PDO::MYSQL_ATTR_USE_BUFFERED_QUERY, false);\n\n$unbufferedResult = $pdo->query(\"SELECT Name FROM City\");\nforeach ($unbufferedResult as $row) {\n    echo $row['Name'] . PHP_EOL;\n}\n?>\n```\n\n**`PDO::MYSQL_ATTR_LOCAL_INFILE`**(int)\n\nувімкнути `LOAD LOCAL INFILE`\n\nЗверніть увагу, що ця константа може бути використана тільки в масиві `driver_options` під час створення дескриптора нової бази даних.\n\n**`PDO::MYSQL_ATTR_LOCAL_INFILE_DIRECTORY`**(string)\n\nДозволяє обмежити завантаження LOCAL DATA файлами, розташованими у вказаному каталозі. Доступно з версії PHP 8.1.0.\n\nЗверніть увагу, що ця константа може використовуватися лише у масиві `driver_options` під час створення нового дескриптора бази даних.\n\n**`PDO::MYSQL_ATTR_INIT_COMMAND`**(string)\n\nКоманда, яку потрібно виконати при підключенні до MySQL-сервера. Також буде автоматично виконана під час перепідключення.\n\nЗверніть увагу, що ця константа може бути використана тільки в масиві `driver_options` під час створення дескриптора нової бази даних.\n\n**`PDO::MYSQL_ATTR_READ_DEFAULT_FILE`**(int)\n\nЧитання іменованих параметрів із файлу my.cnf. Ця опція недоступна, якщо використовується mysqlnd, тому що mysqlnd не читає конфігураційні файли MySQL.\n\n**`PDO::MYSQL_ATTR_READ_DEFAULT_GROUP`**(int)\n\nЧитання іменованої групи параметрів з файлу my.cnf або файлу, визначеного в константі **`MYSQL_READ_DEFAULT_FILE`**. Ця опція недоступна, якщо використовується mysqlnd, тому що mysqlnd не читає конфігураційні файли MySQL.\n\n**`PDO::MYSQL_ATTR_MAX_BUFFER_SIZE`**(int)\n\nМаксимальний розмір буфера. За промовчанням дорівнює 1 Мб. Ця константа не підтримується під час компіляції разом з mysqlnd.\n\n**`PDO::MYSQL_ATTR_DIRECT_QUERY`**(int)\n\nВиконувати прямі запити, не використовувати підготовлені конструкції.\n\n**`PDO::MYSQL_ATTR_FOUND_ROWS`**(int)\n\nПовертає кількість знайдених рядків, а не кількість змінених рядків.\n\n**`PDO::MYSQL_ATTR_IGNORE_SPACE`**(int)\n\nДозволяє прогалини після імен функцій. Робить усі імена функцій зарезервованими словами.\n\n**`PDO::MYSQL_ATTR_COMPRESS`**(int)\n\nУвімкнути стиснення мережного з'єднання.\n\n**`PDO::MYSQL_ATTR_SSL_CA`**(int)\n\nШлях до файлу SSL-сертифіката.\n\n**`PDO::MYSQL_ATTR_SSL_CAPATH`**(int)\n\nШлях до директорії, що містить SSL-сертифікати довірених центрів (CA), що зберігаються у форматі PEM.\n\n**`PDO::MYSQL_ATTR_SSL_CERT`**(int)\n\nШлях до файлу із SSL-сертифікатом.\n\n**`PDO::MYSQL_ATTR_SSL_CIPHER`**(int)\n\nСписок з одного або більше допустимих шифрів для використання у SSL-шифруванні у форматі, який розуміє OpenSSL. Наприклад: `DHE-RSA-AES256-SHA:AES128-SHA`\n\n**`PDO::MYSQL_ATTR_SSL_KEY`**(int)\n\nШлях до файлу із ключем SSL.\n\n**`PDO::MYSQL_ATTR_SSL_VERIFY_SERVER_CERT`**(int)\n\nНадає спосіб вимкнення перевірки SSL-сертифіката сервера.\n\nІснує починаючи з PHP 7.0.18 та PHP 7.1.4.\n\n**`PDO::MYSQL_ATTR_MULTI_STATEMENTS`**(int)\n\nЕсли установлено как\\*\\*`false`\\*\\*, забороняє запуск множинних запитів, як для [PDO::prepare()](pdo.prepare.md), так і для [PDO::query()](pdo.query.md)\n\nЗверніть увагу, що ця константа може бути використана тільки в масиві `driver_options` під час створення нового дескриптора БД.\n\n## Налаштування під час виконання\n\nПоведінка цих функцій залежить від установок у php.ini.\n\n**Опції конфігурації PDO\\_MYSQL**\n\n| Имя | По умолчанию | Место изменения |\n| --- | --- | --- |\n| [pdo\\_mysql.default\\_socket](ref.pdo-mysql.md#ini.pdo-mysql.default-socket) | \"/tmp/mysql.sock\" | **`INI_SYSTEM`** |\n| [pdo\\_mysql.debug](ref.pdo-mysql.md#ini.pdo-mysql.debug) | NULL | **`INI_SYSTEM`** |\n\nДодаткова інформація та опис режимів INI\\_\\* дано у розділі «[Місця встановлення параметрів конфігурації](configuration.changes.modes.md)».\n\nКоротке пояснення конфігураційних директив.\n\n`pdo_mysql.default_socket`string\n\nВстановлює сокет домену UNIX. Цю опцію необхідно вказати під час компіляції, якщо сокет домену знайдено під час конфігурації. Це налаштування лише для Unix.\n\n`pdo_mysql.debug`bool\n\nДозволяє налагодження для PDO\\_MYSQL. Це налаштування доступне лише, якщо PDO\\_MYSQL скомпільований з \"mysqlnd\" та в режимі налагодження PDO.\n\n## Зміст\n\n-   [PDO\\_MYSQL DSN](ref.pdo-mysql.connection.md)— З'єднання з базою даних MySQL\n","title":"Функції MySQL (PDO\\_MYSQL)","contentType":2,"navigation":[{"ref.pdo-informix.connection.md":"« PDO\\_INFORMIX DSN"},{"ref.pdo-mysql.connection.md":"PDO\\_MYSQL DSN »"},{"index.md":"PHP Manual"},{"pdo.drivers.md":"Драйвери PDO"}]}},"__N_SSG":true}