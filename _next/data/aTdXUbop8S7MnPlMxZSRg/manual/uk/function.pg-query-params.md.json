{"pageProps":{"page":{"slug":"function.pg-query-params.md","content":"# pg\\_query\\_params\n\n(PHP 5 >= 5.1.0, PHP 7, PHP 8)\n\npg\\_query\\_params — Посилає параметризований запит на сервер, параметри передаються окремо від тексту запиту SQL\n\n### Опис\n\n```methodsynopsis\npg_query_params(PgSql\\Connection $connection = ?, string $query, array $params): PgSql\\Result|false\n```\n\nПосилає параметризований запит на сервер і чекає на результат. Параметри надсилаються окремо від рядка запиту.\n\n**pg\\_query\\_params()** подібна до функції [pg\\_query()](function.pg-query.md), але надає додатковий функціонал: параметри запиту можна надсилати окремо від рядка запиту . **pg\\_query\\_params()** підтримується на з'єднаннях із серверами PostgreSQL версій 7.4 та вище. Функція не працюватиме із серверами ранніх версій.\n\nЯкщо використовуються параметри `params`, вони замінюють псевдозмінні $1, $2 і т.д. у рядку запиту `query`. Один і той же параметр може бути вказаний більше одного разу в `query`; у цьому випадку будуть використані однакові значення . `params`определяют текущие значения параметров. Значение\\*\\*`null`\\*\\* у масиві параметрів означатиме SQL `NULL`в запросе.\n\nГлавное преимущество\\*\\*pg\\_query\\_params()\\*\\*перед[pg\\_query()](function.pg-query.md) полягає в тому, що значення параметрів можуть передаватися окремо від рядка запиту `query`. Це дає можливість уникнути стомлюючу і схильну до помилок процедуру екранування спецсимволів і укладання значень у лапки. Однак, на відміну від [pg\\_query()](function.pg-query.md), ця функція підтримує лише один SQL запит у рядку, що передається. (Він може містити крапку з комою, але не більше однієї непустої SQL-команди.)\n\n### Список параметрів\n\n`connection`\n\nЕкземпляр [PgSql\\\\Connection](class.pgsql-connection.md). Якщо параметр `connection` не вказано, буде вибрано стандартне з'єднання. Стандартне з'єднання — це останнє з'єднання, яке встановила функція [pg\\_connect()](function.pg-connect.md) або [pg\\_pconnect()](function.pg-pconnect.md)\n\n**Увага**\n\nПочинаючи з версії PHP 8.1.0, використання стандартного з'єднання застаріло.\n\n`query`\n\nПараметризований запит SQL. Повинен містити лише один вираз (кілька виразів розділених крапкою з комою не підтримуються). Якщо в запит будуть передаватися параметри, вони замінять псевдозмінні $1, $2 і т.д.\n\nКористувацькі дані завжди повинні передаватися як параметри, і не передаватися в рядок запиту безпосередньо, де вони можуть призвести до можливих атак через [SQL-ін'єкції](security.database.sql-injection.md) і призводить до помилок, якщо дані містять лапки. Якщо з якихось причин ви не можете використовувати параметр, переконайтеся, що дані користувача [правильно екрановані](function.pg-escape-string.md)\n\n`params`\n\nМасив значень параметрів запиту для заміни псевдозмінних $1, $2 і т.д. у вихідному рядку запиту. Кількість елементів масиву має точно збігатися з кількістю псевдозмінних.\n\nЗначення призначені для `bytea` полів не можна передавати у параметрах. Використовуйте функцію [pg\\_escape\\_bytea()](function.pg-escape-bytea.md) або функції великих об'єктів.\n\n### Значення, що повертаються\n\nЕкземпляр [PgSql\\\\Result](class.pgsql-result.md) у разі успішного виконання або \\*\\*`false`\\*\\*в случае возникновения ошибки.\n\n### список змін\n\n| Версия | Опис |\n| --- | --- |\n| 8.1.0 | Повертає екземпляр [PgSql\\\\Result](class.pgsql-result.md); раніше повертався ресурс ([resource](language.types.resource.md) |\n| 8.1.0 | Параметр`connection` тепер чекає екземпляр [PgSql\\\\Connection](class.pgsql-connection.md); раніше очікувався ресурс ([resource](language.types.resource.md) |\n\n### Приклади\n\n**Приклад #1 Приклад використання** pg\\_query\\_params()\\*\\*\\*\\*\n\n```php\n<?php\n// Подключение к базе данных \"mary\"\n$dbconn = pg_connect(\"dbname=mary\");\n\n// Найдём все магазины с названием \"Joe's Widgets\". Стоит отметить, что нет необходимости экранировать\n// спецсимволы в строке \"Joe's Widgets\"\n$result = pg_query_params($dbconn, 'SELECT * FROM shops WHERE name = $1', array(\"Joe's Widgets\"));\n\n// Для сравнения то же самое, используя функцию pg_query\n$str = pg_escape_string(\"Joe's Widgets\");\n$result = pg_query($dbconn, \"SELECT * FROM shops WHERE name = '{$str}'\");\n\n?>\n```\n\n### Дивіться також\n\n-   [pg\\_query()](function.pg-query.md) \\- Виконує запит\n","title":"pg\\_query\\_params","contentType":2,"navigation":[{"function.pg-put-line.md":"« pg\\_put\\_line"},{"function.pg-query.md":"pg\\_query »"},{"index.md":"PHP Manual"},{"ref.pgsql.md":"Функції PostgreSQL"}]}},"__N_SSG":true}