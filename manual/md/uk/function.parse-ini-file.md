- [« move_uploaded_file](function.move-uploaded-file.md)
- [parse_ini_string »](function.parse-ini-string.md)

- [PHP Manual](index.md)
- [Функції файлової системи](ref.filesystem.md)
- Обробляє конфігураційний файл

#parse_ini_file

(PHP 4, PHP 5, PHP 7, PHP 8)

parse_ini_file — Обробляє файл конфігурації

### Опис

**parse_ini_file**(string `$filename`, bool `$process_sections` u003d
**`false`**, int `$scanner_mode` u003d **`INI_SCANNER_NORMAL`**):
array\|false

**parse_ini_file()** завантажує ini-файл, вказаний у аргументі
`filename`, і повертає його налаштування у вигляді асоціативного масиву.

Структура ini-файлу подібна до структури `php.ini`.

### Список параметрів

`filename`
Ім'я ini-файлу, що обробляється. Якщо використовується відносний шлях
оцінюється щодо поточного робочого каталогу, а потім
[include_path](ini.core.md#ini.include-path).

`process_sections`
Встановивши параметр `process_sections` у **`true`**, ви отримуєте
багатовимірний масив, який включає як назву окремих налаштувань,
і секції. За промовчанням `process_sections` дорівнює **`false`**

`scanner_mode`
Може приймати такі значення: **`INI_SCANNER_NORMAL`** (за
замовчуванням) або **`INI_SCANNER_RAW`**. Якщо вказано значення
**`INI_SCANNER_RAW`**, то значення опцій не будуть оброблятися.

З версії PHP 5.6.1 можна також задати **`INI_SCANNER_TYPED`**. В цьому
режими типів boolean, null і integer будуть, по можливості, зберігатися.
Рядкові значення ``true'', ``on'' і ``yes'' будуть перетворені на
**`true`**. ``false``, ``off'`, ``no'' і `'none'' в **`false`**.
``null'` перетворюється на **`null`**. Крім цього, всі числові рядки
будуть, наскільки можна, перетворені до цілим числам.

### Значення, що повертаються

У разі успішного виконання налаштування повертаються у вигляді
асоціативний масив (array). У разі виникнення помилки
повертається **`false`**.

### Приклади

**Приклад #1 Вміст `sample.ini`**

; Це приклад файлу налаштувань
; Коментарі починаються з ';', як у php.ini

[first_section]
one u003d 1
five u003d 5
animal u003d BIRD

[second_section]
path u003d "/usr/local/bin"
URL u003d "http://www.example.com/~username"

[third_section]
phpversion[] u003d "5.0"
phpversion[] u003d "5.1"
phpversion[] u003d "5.2"
phpversion[] u003d "5.3"

urls[svn] u003d "http://svn.php.net"
urls[git] u003d "http://git.php.net"

**Приклад #2 Приклад використання функції **parse_ini_file()****

[Константи](language.constants.md) (але не "магічні константи" на кшталт
**`__FILE__`**) також можуть оброблятися в ini-файлах, так що якщо ви
оголосіть константу як значення для ini-файла до виклику
**parse_ini_file()**, то константа буде коректно оброблена. Тільки
значення опцій будуть оброблятися і значення має бути просто
константою. Наприклад:

` <?phpdefine('BIRD', 'Птиця додо');// Обробляємо без секцій$ini_array u003d parse_ini_file("sample.ini");print_r($ini_array);// Обробляємо з секціями$ini_array .ini", true);print_r($ini_array);?> `

Результатом виконання цього прикладу буде щось подібне:

Array
(
[one] u003d> 1
[five] u003d> 5
[animal] u003d> Птах додо
[path] u003d> /usr/local/bin
[URL] u003d> http://www.example.com/~username
[phpversion] u003d> Array
(
[0] u003d> 5.0
[1] u003d> 5.1
[2] u003d> 5.2
[3] u003d> 5.3
)

[urls] u003d> Array
(
[svn] u003d> http://svn.php.net
[git] u003d> http://git.php.net
)

)
Array
(
[first_section] u003d> Array
(
[one] u003d> 1
[five] u003d> 5
[animal] u003d> Птах додо
)

[second_section] u003d> Array
(
[path] u003d> /usr/local/bin
[URL] u003d> http://www.example.com/~username
)

[third_section] u003d> Array
(
[phpversion] u003d> Array
(
[0] u003d> 5.0
[1] u003d> 5.1
[2] u003d> 5.2
[3] u003d> 5.3
)

[urls] u003d> Array
(
[svn] u003d> http://svn.php.net
[git] u003d> http://git.php.net
)

)

)

**Приклад #3 Обробка файлу php.ini функцією **parse_ini_file()****

` <?php// Проста функція для порівняння результатівfunction yesno($expression){   return($expression ? 'Так' : 'Ні');}// Отримуємо шлях к| ();// Обрабатываем php.ini$ini u003d parse_ini_file($ini_path);// Выводим и сравниваем значения, учтите, что использование get_cfg_var()// даст одинаковые результаты для используемых здесь значений parsed (загруженное из файла) и loaded ( використовуване в даний момент)echo '(parsed) magic_quotes_gpc u003d ' . yesno($ini['magic_quotes_gpc']) . PHP_EOL;echo '(loaded) magic_quotes_gpc u003d ' . yesno(get_cfg_var('magic_quotes_gpc')) . PHP_EOL;?> `

Результатом виконання цього прикладу буде щось подібне:

(parsed) magic_quotes_gpc u003d Так
(loaded) magic_quotes_gpc u003d Так

**Приклад #4 Інтерполяція значень**

Крім оцінки констант, деякі символи мають особливе значення в
значення ini-файли. Крім того, змінні середовища та раніше визначені
параметри конфігурації (дивіться
[get_cfg_var()](function.get-cfg-var.md)) можуть бути прочитані з
використанням синтаксису `${}`.

; | використовується для побитового АБО
three u003d 2 | 3

; & використовується для бітового AND
four u003d 6&5

; ^ використовується для побитового XOR
five u003d 3^6

; ~ використовується для побитового заперечення
negative_two u003d ~1

; () використовується для угруповання
seven u003d (8|7)&(6|5)

path u003d ${PATH}
also_five u003d ${five}

**Приклад #5 Екранування символів**

Деякі символи мають особливе значення у рядках з подвійними лапками та
повинні бути екрановані префіксом зворотної косої межі. Насамперед,
це подвійна лапка ```` як маркера кордону і сама зворотна коса
риса `\ (якщо за нею слідує один із спеціальних символів):

quoted u003d "Вона сказала \"Саме моя точка зору\"." ; Результатом є рядок із лапками.
hint u003d "Використовуйте \\", щоб уникнути подвійних лапок" ; Результат: Використовуйте \", щоб уникнути подвійних лапок

Для шляхів, подібних до Windows, зроблено виняток: можна не екранувати
зворотну косу межу в кінці, якщо за рядком у лапках слідує розрив
рядки:

save_path u003d "C:\Temp\"

Якщо потрібно екранувати подвійні лапки, за якими слід перенести
рядки у багаторядковому значенні, можна використовувати конкатенацію
значень наступним чином (за одним рядком у подвійних лапках
безпосередньо слідує інша):

long_text u003d "Lorem \"ipsum\"""
dolor" ; Результат: Lorem "ipsum"
 dolor

Інший символ зі спеціальним значенням – це `$` (знак долара). Він
повинен бути екранований, якщо за ним слідує відкрита фігурна дужка:

code u003d "\${test}"

Екрануючі символи не підтримуються в режимі **`INI_SCANNER_RAW`** (в
цьому режимі всі символи обробляються "як є").

Зверніть увагу, що синтаксичний аналізатор ini не підтримує
стандартні послідовності екранування (`
`` `` і т.д.). При
необхідності виконайте постобробку результату **parse_ini_file()** з
за допомогою функції [stripcslashes()](function.stripcslashes.md).

### Примітки

> **Примітка**:
>
> Ця функція не має жодного відношення до файлу `php.ini`. До моменту
> Виконання вашого скрипта, він вже оброблений. Ця функція може бути
> використовується для завантаження настройок вашої власної програми.

> **Примітка**:
>
> Якщо значення ini-файлу містить інші символи, крім літер та цифр,
> воно має полягати у подвійні лапки (").

> **Примітка**: Існує зарезервовані слова, які не можна
> використовувати як ключі в ini-файлах. Такими словами є:
> `null`, `yes`, `no`, `true`, `false`, `on`, `off`, `none`. Значення
> `null`, `off`, `no` і `false` перетворюються на `````, а значення `on`,
> `yes` та `true` в `"1"` , але тільки якщо не використовується режим
> **`INI_SCANNER_TYPED`**. Символи `?{}|&~!()^"` не повинні
> використовуватися в ключах і мати якийсь особливий сенс у значеннях.

> **Примітка**:
>
> Записи без рівня знання ігноруються. Наприклад, "foo" ігнорується,
> тоді як "bar u003d" обробляється та додається з порожнім значенням.
> Наприклад, у MySQL є опція "no-auto-rehash", що встановлюється в
> `my.cnf`, яка не має значення та ігнорується.

> **Примітка**:
>
> ini-файли зазвичай обробляються веб-серверами як простий текст,
> таким чином, за запитом надсилаються браузерам. Це означає, що в
> З метою безпеки ви повинні або зберігати свої ini-файли поза кореневим
> каталог документів, або переналаштувати веб-сервер, щоб вони не
> обслуговувалися. Невиконання будь-якої з цих вимог може створити
> загрозу безпеці.

### Дивіться також

- [parse_ini_string()](function.parse-ini-string.md) - Розбирає
рядок конфігурації
