{"pageProps":{"page":{"slug":"function.cubrid-commit.md","content":"# cubrid\\_commit\n\n(PECL CUBRID >= 8.3.0)\n\ncubrid\\_commit — Підтвердження транзакції\n\n### Опис\n\n```methodsynopsis\ncubrid_commit(resource $conn_identifier): bool\n```\n\nФункция**cubrid\\_commit()** використовується для підтвердження змін, здійснених у транзакції у з'єднанні `conn_identifier`, після виклику функції **cubrid\\_commit()**, з'єднання з сервером буде закрито, але обробник з'єднання все ще буде коректним.\n\nУ CUBRID PHP режим авто-комміту для транзакцій за замовчуванням вимкнено. Ви можете дозволити або заборонити його за допомогою функції [cubrid\\_set\\_autocommit()](function.cubrid-set-autocommit.md). Дізнатися поточний статус можна функцією [cubrid\\_get\\_autocommit()](function.cubrid-get-autocommit.md). Перед тим, як розпочати транзакцію, переконайтеся, що авто-коміт заборонено.\n\n### Список параметрів\n\n`conn_identifier`\n\nІдентифікатор з'єднання.\n\n### Значення, що повертаються\n\nПовертає **`true`** у разі успішного виконання або \\*\\*`false`\\*\\*в случае возникновения ошибки.\n\n### Приклади\n\n**Приклад #1 Приклад використання** cubrid\\_commit()\\*\\*\\*\\*\n\n```php\n<?php\n$conn = cubrid_connect(\"localhost\", 33000, \"demodb\", \"dba\");\n\n@cubrid_execute($conn, \"DROP TABLE publishers\");\n\n$sql = <<<EOD\nCREATE TABLE publishers(\npub_id CHAR(3),\npub_name VARCHAR(20),\ncity VARCHAR(15),\nstate CHAR(2),\ncountry VARCHAR(15)\n)\nEOD;\ncubrid_set_autocommit($conn,false);\nif (!cubrid_execute($conn, $sql)) {\n    printf(\"Error facility: %d\\nError code: %d\\nError msg: %s\\n\", cubrid_error_code_facility(), cubrid_error_code(), cubrid_error_msg());\n\n    cubrid_disconnect($conn);\n    exit;\n}\n\n$req = cubrid_prepare($conn, \"INSERT INTO publishers VALUES(?, ?, ?, ?, ?)\");\n\n$id_list = array(\"P01\", \"P02\", \"P03\", \"P04\");\n$name_list = array(\"Abatis Publishers\", \"Core Dump Books\", \"Schadenfreude Press\", \"Tenterhooks Press\");\n$city_list = array(\"New York\", \"San Francisco\", \"Hamburg\", \"Berkeley\");\n$state_list = array(\"NY\", \"CA\", NULL, \"CA\");\n$country_list = array(\"USA\", \"USA\", \"Germany\", \"USA\");\n\nfor ($i = 0, $size = count($id_list); $i < $size; $i++) {\n    cubrid_bind($req, 1, $id_list[$i]);\n    cubrid_bind($req, 2, $name_list[$i]);\n    cubrid_bind($req, 3, $city_list[$i]);\n    cubrid_bind($req, 4, $state_list[$i]);\n    cubrid_bind($req, 5, $country_list[$i]);\n\n    if (!($ret = cubrid_execute($req))) {\n        break;\n    }\n}\n\nif (!$ret) {\n    cubrid_rollback($conn);\n} else {\n    cubrid_commit($conn);\n\n    $req = cubrid_execute($conn, \"SELECT * FROM publishers\");\n    while ($result = cubrid_fetch_assoc($req)) {\n        printf(\"%-3s %-20s %-15s %-3s %-15s\\n\",\n            $result[\"pub_id\"], $result[\"pub_name\"], $result[\"city\"], $result[\"state\"], $result[\"country\"]);\n    }\n}\n\ncubrid_disconnect($conn);\n?>\n```\n\nРезультат виконання наведеного прикладу:\n\n```\nP01 Abatis Publishers    New York        NY  USA\nP02 Core Dump Books      San Francisco   CA  USA\nP03 Schadenfreude Press  Hamburg             Germany\nP04 Tenterhooks Press    Berkeley        CA  USA\n```\n\n### Дивіться також\n\n-   [cubrid\\_rollback()](function.cubrid-rollback.md) \\- Відкат транзакції\n-   [cubrid\\_get\\_autocommit()](function.cubrid-get-autocommit.md) \\- Повертає налаштування авто-комміту для з'єднання\n-   [cubrid\\_set\\_autocommit()](function.cubrid-set-autocommit.md) \\- Встановлює режим авто-комміту для з'єднання\n","title":"cubrid\\_commit","contentType":2,"navigation":[{"function.cubrid-column-types.md":"« cubrid\\_column\\_types"},{"function.cubrid-connect-with-url.md":"cubrid\\_connect\\_with\\_url »"},{"index.md":"PHP Manual"},{"ref.cubrid.md":"Функції CUBRID"}]}},"__N_SSG":true}