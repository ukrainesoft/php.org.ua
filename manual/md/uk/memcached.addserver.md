- [« Memcached::addByKey](memcached.addbykey.md)
- [Memcached::addServers »](memcached.addservers.md)

- [PHP Manual](index.md)
- [Memcached](class.memcached.md)
- Додає сервер у пул

# Memcached::addServer

(PECL memcached \>u003d 0.1.0)

Memcached::addServer — Додає сервер до пулу

### Опис

public **Memcached::addServer**(string `$host`, int `$port`, int
`$weight` u003d 0): bool

**Memcached::addServer()** додає вказаний сервер у пул. При цьому
з'єднання встановлено не буде, але якщо ви використовуєте налаштування
консистентного розподілу ключів (за допомогою
**`Memcached::DISTRIBUTION_CONSISTENT`** або
**`Memcached::OPT_LIBKETAMA_COMPATIBLE`**), деякі внутрішні
структури даних буде оновлено. Таким чином, якщо вам потрібно
додати кілька серверів, краще використовувати
[Memcached::addServers()](memcached.addservers.md) т.я. оновлення
даних відбувається одноразово.

Один і той самий сервер може зустрічатися в пулі кілька разів, тому що
жодних перевірок на дублювання входжень немає. Але це не є доцільним;
натомість потрібно використовувати параметр `weight` для підвищення
пріоритету сервера.

### Список параметрів

`host`
Ім'я хоста memcache сервера. Якщо ім'я хоста буде недійсним,
функції, що працюють з даними, встановлять результуючий код
**`Memcached::RES_HOST_LOOKUP_FAILURE`**. У версії 2.0.0b1
параметр може також визначати шлях до unix сокет файлу, наприклад,
`/path/to/memcached.sock` для використання сокету домену UNIX (UDS), в
даному випадку `port` повинен бути встановлений у `0`.

`port`
Порт, на якому працює сервер memcache. Зазвичай це `11211` порт. В
версії 2.0.0b1, встановіть цей параметр у `0`, при використанні сокету
домену UNIX (UDS).

`weight`
Ваговий коефіцієнт для заданого сервера по відношенню до загальної ваги
всіх серверів у пулі. Це налаштування управляє ймовірністю сервера
бути вибраним для використання. Вона використовується лише у випадку
консистентного розподілу і зазвичай відповідає кількості пам'яті,
доступний для memcache на сервері.

### Значення, що повертаються

Повертає **`true`** у разі успішного виконання або **`false`** у
у разі виникнення помилки.

### Приклади

**Приклад #1 Приклад використання **Memcached::addServer()****

`<?php$m u003d new Memcached();/* Додає 2 сервера в пул, ймовірність бути обраним   у другого сервера в 2 рази вище. */$m->addServer('mem1.domain.com', 11211, 33);$m->addServer('mem2.domain.com', 11211, 67);?> `

### Дивіться також

- [Memcached::addServers()](memcached.addservers.md) - Додає
кілька серверів у пул
- [Memcached::resetServerList()](memcached.resetserverlist.md) -
Очищає список серверів
