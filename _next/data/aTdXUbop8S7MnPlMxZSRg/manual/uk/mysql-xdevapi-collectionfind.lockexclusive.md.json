{"pageProps":{"page":{"slug":"mysql-xdevapi-collectionfind.lockexclusive.md","content":"# CollectionFind::lockExclusive\n\n(No version information available, might only be in Git)\n\nCollectionFind::lockExclusive — Виконує операцію з EXCLUSIVE LOCK\n\n### Опис\n\n```methodsynopsis\npublic mysql_xdevapi\\CollectionFind::lockExclusive(int $lock_waiting_option = ?): mysql_xdevapi\\CollectionFind\n```\n\nНакладає на документ виняткове блокування. Доки документ заблоковано, інші транзакції не можуть оновлювати документ, виконувати вирази `SELECT ... LOCK IN SHARE MODE` чи читати дані на окремих рівнях ізоляції транзакцій. Узгоджені читання ігнорують будь-які блокування, встановлені для записів, які існують у поданні читання.\n\nЩоб не було проблем з конкурентним доступом, має сенс викликати цей метод спільно з методом **mysql\\_xdevapi\\\\Collection::modify()**. Фактично, ця функція використовує блокування рядків для серіалізації доступу до рядків.\n\n### Список параметрів\n\n`lock_waiting_option`\n\nДополнительная опция ожидания. Значение по умолчанию —\\*\\*`MYSQLX_LOCK_DEFAULT`\\*\\*. Допустимі значення визначені константами:\n\n-   **`MYSQLX_LOCK_DEFAULT`**\n    \n-   **`MYSQLX_LOCK_NOWAIT`**\n    \n-   **`MYSQLX_LOCK_SKIP_LOCKED`**\n    \n\n### Значення, що повертаються\n\nПовертає об'єкт класу CollectionFind, з яким можна буде працювати далі.\n\n### Приклади\n\n**Приклад #1 Приклад использования метода**mysql\\_xdevapi\\\\CollectionFind::lockExclusive()\\*\\*\\*\\*\n\n```php\n<?php\n$session = mysql_xdevapi\\getSession(\"mysqlx://user:password@localhost\");\n\n$schema     = $session->getSchema(\"addressbook\");\n$collection = $schema->createCollection(\"people\");\n\n$session->startTransaction();\n\n$result = $collection\n  ->find(\"age > 50\")\n  ->lockExclusive()\n  ->execute();\n\n// ... выполняем операцию с объектом\n\n// Завершаем транзакцию и разблокируем документ\n$session->commit();\n?>\n```\n","title":"CollectionFind::lockExclusive","contentType":2,"navigation":[{"mysql-xdevapi-collectionfind.limit.md":"« CollectionFind::limit"},{"mysql-xdevapi-collectionfind.lockshared.md":"CollectionFind::lockShared »"},{"index.md":"PHP Manual"},{"class.mysql-xdevapi-collectionfind.md":"mysql\\_xdevapi\\\\CollectionFind"}]}},"__N_SSG":true}