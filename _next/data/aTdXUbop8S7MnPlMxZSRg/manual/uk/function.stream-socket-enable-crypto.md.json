{"pageProps":{"page":{"slug":"function.stream-socket-enable-crypto.md","content":"# stream\\_socket\\_enable\\_crypto\n\n(PHP 5 >= 5.1.0, PHP 7, PHP 8)\n\nstream\\_socket\\_enable\\_crypto — Вмикає або вимикає шифрування на вже підключеному сокеті\n\n### Опис\n\n```methodsynopsis\nstream_socket_enable_crypto(    resource $stream,    bool $enable,    ?int $crypto_method = null,    ?resource $session_stream = null): int|bool\n```\n\nВмикає або вимикає шифрування на потоці.\n\nПісля налаштування шифрування, криптографія може бути увімкнена або вимкнена динамічно за допомогою передачі значення \\*\\*`true`** або **`false`\\*\\*параметру`enable`\n\n### Список параметрів\n\n`stream`\n\nПотоковий ресурс.\n\n`enable`\n\nУвімкнути/вимкнути криптографію на потоці.\n\n`crypto_method`\n\nУвімкнути шифрування на потоці. Допустимі методи\n\n-   **`STREAM_CRYPTO_METHOD_SSLv2_CLIENT`**\n-   **`STREAM_CRYPTO_METHOD_SSLv3_CLIENT`**\n-   **`STREAM_CRYPTO_METHOD_SSLv23_CLIENT`**\n-   **`STREAM_CRYPTO_METHOD_ANY_CLIENT`**\n-   **`STREAM_CRYPTO_METHOD_TLS_CLIENT`**\n-   **`STREAM_CRYPTO_METHOD_TLSv1_0_CLIENT`**\n-   **`STREAM_CRYPTO_METHOD_TLSv1_1_CLIENT`**\n-   **`STREAM_CRYPTO_METHOD_TLSv1_2_CLIENT`**\n-   **`STREAM_CRYPTO_METHOD_TLSv1_3_CLIENT`**(починаючи з PHP 7.4.0)\n-   **`STREAM_CRYPTO_METHOD_SSLv2_SERVER`**\n-   **`STREAM_CRYPTO_METHOD_SSLv3_SERVER`**\n-   **`STREAM_CRYPTO_METHOD_SSLv23_SERVER`**\n-   **`STREAM_CRYPTO_METHOD_ANY_SERVER`**\n-   **`STREAM_CRYPTO_METHOD_TLS_SERVER`**\n-   **`STREAM_CRYPTO_METHOD_TLSv1_0_SERVER`**\n-   **`STREAM_CRYPTO_METHOD_TLSv1_1_SERVER`**\n-   **`STREAM_CRYPTO_METHOD_TLSv1_2_SERVER`**\n-   **`STREAM_CRYPTO_METHOD_TLSv1_3_SERVER`**(починаючи з PHP 7.4.0)\n\nЯкщо не вказано, буде використано параметр `crypto_method`из SSL контекста потока.\n\n`session_stream`\n\nВикористовувати в потоці налаштування з `session_stream`\n\n### Значення, що повертаються\n\nПовертає **`true`** у разі успішного виконання, **`false`**, если не удалось установить шифрование или , якщо недостатньо даних і ви повинні спробувати ще раз (тільки для неблокуючих сокетів).\n\n### список змін\n\n| Версия | Опис |\n| --- | --- |\n| 8.0.0 | `session_stream` тепер допускає значення null. |\n\n### Приклади\n\n**Приклад #1 Приклад використання** stream\\_socket\\_enable\\_crypto()\\*\\*\\*\\*\n\n```php\n<?php\n$fp = stream_socket_client(\"tcp://myproto.example.com:31337\", $errno, $errstr, 30);\nif (!$fp) {\n    die(\"Не могу соединиться: $errstr ($errno)\");\n}\n\n/* Включить шифрование для этапа входа в систему */\nstream_socket_enable_crypto($fp, true, STREAM_CRYPTO_METHOD_SSLv23_CLIENT);\nfwrite($fp, \"USER бог\\r\\n\");\nfwrite($fp, \"PASS секрет\\r\\n\");\n\n/* Отключить шифрование для всего остального */\nstream_socket_enable_crypto($fp, false);\n\nwhile ($motd = fgets($fp)) {\n    echo $motd;\n}\n\nfclose($fp);\n?>\n```\n\nВисновок наведеного прикладу буде схожим на:\n\n### Дивіться також\n\n-   [Функції OpenSSL](ref.openssl.md)\n-   [Список підтримуваних транспортних протоколів](transports.md)\n","title":"stream\\_socket\\_enable\\_crypto","contentType":2,"navigation":[{"function.stream-socket-client.md":"« stream\\_socket\\_client"},{"function.stream-socket-get-name.md":"stream\\_socket\\_get\\_name »"},{"index.md":"PHP Manual"},{"ref.stream.md":"Функції для роботи з потоками"}]}},"__N_SSG":true}