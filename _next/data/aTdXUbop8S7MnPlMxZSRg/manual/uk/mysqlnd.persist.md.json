{"pageProps":{"page":{"slug":"mysqlnd.persist.md","content":"# Постійне з'єднання\n\n**Використання постійних з'єднань**\n\nЯкщо `mysqli` використовується з `mysqlnd`,\\\\ під час створення постійного з'єднання воно генерує на сервері запит `COM_CHANGE_USER` `mysql_change_user()`). Це гарантує, що при підключенні буде повторно зроблено авторизацію.\n\nОскільки через дзвінки `COM_CHANGE_USER` збільшуються накладні витрати, можна відключити таку поведінку під час компіляції. У такому разі повторне використання постійного з'єднання генеруватиме виклик `COM_PING` `mysql_ping`), для перевірки можливості повторного використання з'єднання.\n\nГенерація виклику `COM_CHANGE_USER` може бути вимкнена прапором компіляції `MYSQLI_NO_CHANGE_USER_ON_PCONNECT`НаПриклад:\n\n```\nshell# CFLAGS=\"-DMYSQLI_NO_CHANGE_USER_ON_PCONNECT\" ./configure --with-mysql=/usr/local/mysql/ --with-mysqli=/usr/local/mysql/bin/mysql_config --with-pdo-mysql=/usr/local/mysql/bin/mysql_config --enable-debug && make clean && make -j6\n```\n\nАбо альтернативний варіант:\n\n```\nshell# export CFLAGS=\"-DMYSQLI_NO_CHANGE_USER_ON_PCONNECT\"\nshell# configure --whatever-option\nshell# make clean\nshell# make\n```\n\nЗверніть увагу, що тільки `mysqli` спільно з `mysqlnd` використовують `COM_CHANGE_USER`. Інші комбінації модуль-драйвер використовують `COM_PING` при первісному використанні постійного з'єднання.\n","title":"Постійне з'єднання","contentType":2,"navigation":[{"mysqlnd.incompatibilities.md":"« Несумісності"},{"mysqlnd.stats.md":"Статистика »"},{"index.md":"PHP Manual"},{"book.mysqlnd.md":"Mysqlnd"}]}},"__N_SSG":true}