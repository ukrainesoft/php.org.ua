- [«socket_recv](function.socket-recv.md)
- [socket_recvmsg »](function.socket-recvmsg.md)

- [PHP Manual](index.md)
- [Функції сокету](ref.sockets.md)
- Отримує дані із сокету, незалежно від того, під'єднаний він чи
ні

# socket_recvfrom

(PHP 4 \>u003d 4.1.0, PHP 5, PHP 7, PHP 8)

socket_recvfrom — Отримує дані із сокету, незалежно від того,
під'єднаний він чи ні

### Опис

**socket_recvfrom**(
[Socket](class.socket.md) `$socket`,
string `&$data`,
int `$length`,
int `$flags`,
string `&$address`,
int `&$port` u003d **`null`**
): int\|false

Функція **socket_recvfrom()** отримує `length` байт даних у `data` з
адреси `address` на порту `port` (якщо сокет не типу **`AF_UNIX`**)
використовуючи сокет `socket`. Функція **socket_recvfrom()** може бути
використана для вилучення даних як з підключених, так і не
підключених сокетів. Додатково, один або більше прапорів можуть бути
вказано для того, щоб змінити поведінку функції.

Параметри address і port повинні бути передані за посиланням. Якщо сокет
не орієнтований на з'єднання, `address` повинен бути встановлений як
адресу інтернет-протоколу віддаленого хоста, або як шлях до сокету UNIX.
Якщо сокет не орієнтований на з'єднання, `address` має бути
**`null`**. Додатково `port` повинен містити порт віддаленого хоста
для не підключених сокетів типу **`AF_INET`** та **`AF_INET6`**.

> **Примітка**: Ця функція безпечна для обробки даних у двійковій
> Формі.

### Список параметрів

`socket`
Параметр `socket` має бути екземпляром [Socket](class.socket.md),
попередньо створеним з допомогою функції socket_create().

`data`
Отримані дані будуть передані до змінної, вказаної за допомогою
параметра 'data'.

`length`
З віддаленого хоста буде отримано до length байт.

`flags`
Значення параметра `flags` може бути будь-якою комбінацією наступних
прапорів, об'єднаних за допомогою бінарного оператора OR (`|`) operator.

| Підкреслити | Опис |
|--------------------|---------------------------- -------------------------------------------------- -------------------------------------------------- -------------------------------------------------- ------------------|
| **`MSG_OOB`** | Обробляти позасмугові (out-of-band) дані. |
| **`MSG_PEEK`** | Отримувати дані із початку черги, не видаляючи їх. |
| **`MSG_WAITALL`** | Блокувати виконання скрипту доти, доки щонайменше `length` не буде отримано. Однак, якщо буде отримано сигнал або віддалений хост від'єднається, функція може повернути менше даних. |
| **`MSG_DONTWAIT`** | Якщо цей прапор встановлений, функція повернеться навіть якщо зазвичай блокуватиме виконання скрипта. |

**Можливі значення для параметра `flags`**

`address`
Якщо сокет типу **`AF_UNIX`**, `address` - це шлях до файлу. В іншому
випадку, для неприєднаних сокетів, параметр `address` - це IP-адреса,
віддаленого хоста, або **`null`**, якщо сокет орієнтований на з'єднання.

`port`
Цей аргумент застосовний тільки до сокетів **`AF_INET`** та **`AF_INET6`**,
та вказує віддалений порт, з якого будуть отримані дані. Якщо
сокет орієнтований на з'єднання, `port` буде **`null`**.

### Значення, що повертаються

**socket_recvfrom()** повертає кількість отриманих байт або
**`false`**, якщо сталася помилка. Фактичний код помилки може бути
отримано за допомогою виклику функції
[socket_last_error()](function.socket-last-error.md). Цей код помилки
може бути переданий функції
[socket_strerror()](function.socket-strerror.md) для отримання
текстового опису помилки.

### Список змін

| Версія | Опис |
|--------|---------------------------------------- -------------------------------------------------- ----|
| 8.0.0 | `socket` тепер екземпляр класу [Socket] (class.socket.md); раніше був ресурсом (resource). |

### Приклади

**Приклад #1 Приклад використання **socket_recvfrom()****

` <?php$socket u003d socket_create(AF_INET, SOCK_DGRAM, SOL_UDP);socket_bind($socket, '127.0.0.1', 1223);$from u003d '';$port u003d 0;so$_rec , 0, $from, $port);echo "Отримано $buf з віддаленої адреси $from і віддаленого порту $port" . PHP_EOL;?> `

Цей приклад відкриє UDP-сокет на порту 1223 за адресою 127.0.0.1 та
виведе максимум 12 символів, отриманих із віддаленого хоста.

### Дивіться також

- [socket_recv()](function.socket-recv.md) - Отримує дані з
приєднаного сокету
- [socket_send()](function.socket-send.md) - Надсилає дані в
приєднаний сокет
- [socket_sendto()](function.socket-sendto.md) - Відправляє
повідомлення в сокет, незалежно від того, під'єднаний він чи ні
- [socket_create()](function.socket-create.md) - Створює сокет
(кінцеву точку для обміну інформацією)
