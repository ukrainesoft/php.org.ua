{"pageProps":{"page":{"slug":"yar.examples.md","content":"# Приклади\n\n**Приклад #1 Приклад сервера Yar**\n\n```php\n<?php\n\n/* Предположим, что это страница может быть доступна по http://example.com/operator.php */\n\nclass Operator {\n\n    /**\n     * Складываем два операнда\n     * @param interge\n     * @return interge\n     */\n    public function add($a, $b) {\n        return $this->_add($a, $b);\n    }\n\n    /**\n     * Вычитаем\n     */\n    public function sub($a, $b) {\n        return $a - $b;\n    }\n\n    /**\n     * Умножаем\n     */\n    public function mul($a, $b) {\n        return $a * $b;\n    }\n\n    /**\n     * Защищённый метод\n     * @param interge\n     * @return interge\n     */\n    protected function _add($a, $b) {\n        return $a + $b;\n    }\n}\n\n$server = new Yar_Server(new Operator());\n$server->handle();\n?>\n```\n\n**Приклад #2 Звертаємось до сервера з браузера (запит GET)**\n\nВисновок наведеного прикладу буде схожим на:\n\n![Інформація про сервер Yar](images/4fd86c7f1b197d1d954ad0f4b033dc93-yar.png)\n\n**Приклад #3 Приклад клієнта Yar**\n\n```php\n<?php\n$client = new yar_client(\"http://example.com/operator.php\");\n\n/* вызываем напрямую */\nvar_dump($client->add(1, 2));\n\n/* вызываем через метод call */\nvar_dump($client->call(\"add\", array(3, 2)));\n\n\n/* невозможно вызвать __add */\nvar_dump($client->_add(1, 2));\n?>\n```\n\nВисновок наведеного прикладу буде схожим на:\n\n```\nint(3)\nint(5)\nPHP Fatal error:  Uncaught exception 'Yar_Server_Exception' with message 'call to api Operator::_add() failed' in *\n```\n\n**Приклад #4 Приклад конкуруючих клієнтів Yar**\n\n```php\n<?php\nfunction callback($ret, $callinfo) {\n    echo $callinfo['method'] , \" result: \", $ret , \"\\n\";\n}\n\n/* регистрируем асинхронные вызовы к удалённым сервисам */\nYar_Concurrent_Client::call(\"http://example.com/operator.php\", \"add\", array(1, 2), \"callback\");\nYar_Concurrent_Client::call(\"http://example.com/operator.php\", \"sub\", array(2, 1), \"callback\");\nYar_Concurrent_Client::call(\"http://example.com/operator.php\", \"mul\", array(2, 2), \"callback\");\n\n/* посылаем все запросы и ждём ответа */\nYar_Concurrent_Client::loop();\n?>\n```\n\nВисновок наведеного прикладу буде схожим на:\n\n```\nmul result: 4\nsub result: 1\nadd result: 3\n```\n","title":"Приклади","contentType":2,"navigation":[{"yar.constants.md":"« Зумовлені константи"},{"class.yar-server.md":"Yar\\_Server »"},{"index.md":"PHP Manual"},{"book.yar.md":"Yar"}]}},"__N_SSG":true}