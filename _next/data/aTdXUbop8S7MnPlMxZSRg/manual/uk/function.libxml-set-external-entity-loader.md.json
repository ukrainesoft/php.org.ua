{"pageProps":{"page":{"slug":"function.libxml-set-external-entity-loader.md","content":"# libxml\\_set\\_external\\_entity\\_loader\n\n(PHP 5 >= 5.4.0, PHP 7, PHP 8)\n\nlibxml\\_set\\_external\\_entity\\_loader — Змінити завантажувач за умовчанням для зовнішніх об'єктів\n\n### Опис\n\n```methodsynopsis\nlibxml_set_external_entity_loader(?callable $resolver_function): bool\n```\n\nЗміна стандартного завантажувача для зовнішніх об'єктів. Можна використовувати для придушення розширення довільних зовнішніх сутностей, щоб уникнути XXE-атак, навіть якщо для відповідної операції встановлено значення **`LIBXML_NOENT`**. Зазвичай це краще, ніж виклик [libxml\\_disable\\_entity\\_loader()](function.libxml-disable-entity-loader.md)\n\n### Список параметрів\n\n`resolver_function`\n\nCallback-функція ([callable](language.types.callable.md)) з наступною сигнатурою:\n\n```methodsynopsis\nresolver(?string $public_id, string $system_id, array $context): resource|string|null\n```\n\n`public_id`\n\nГромадський ідентифікатор.\n\n`system_id`\n\nСистемний ідентифікатор.\n\n`context`\n\nМасив із чотирьох елементів: `\"directory\"` `\"intSubName\"` `\"extSubURI\"`и`\"extSubSystem\"`\n\nЦя callback-функція повинна повертати ресурс ([resource](language.types.resource.md)) або рядок (string) з якого можна відкрити ресурс. Якщо повертається **`null`**, роздільна здатність посилання на сутність завершиться помилкою.\n\n### Значення, що повертаються\n\nПовертає **`true`** у разі успішного виконання або \\*\\*`false`\\*\\*в случае возникновения ошибки.\n\n### Приклади\n\n**Приклад #1 Приклад використання** libxml\\_set\\_external\\_entity\\_loader()\\*\\*\\*\\*\n\n```php\n<?php\n$xml = <<<XML\n<!DOCTYPE foo PUBLIC \"-//FOO/BAR\" \"http://example.com/foobar\">\n<foo>bar</foo>\nXML;\n\n$dtd = <<<DTD\n<!ELEMENT foo (#PCDATA)>\nDTD;\n\nlibxml_set_external_entity_loader(\n    function ($public, $system, $context) use($dtd) {\n        var_dump($public);\n        var_dump($system);\n        var_dump($context);\n        $f = fopen(\"php://temp\", \"r+\");\n        fwrite($f, $dtd);\n        rewind($f);\n        return $f;\n    }\n);\n\n$dd = new DOMDocument;\n$r  = $dd->loadXML($xml);\n\nvar_dump($dd->validate());\n?>\n```\n\nРезультат виконання наведеного прикладу:\n\n```\nstring(10) \"-//FOO/BAR\"\nstring(25) \"http://example.com/foobar\"\narray(4) {\n    [\"directory\"]    => NULL\n    [\"intSubName\"]   => NULL\n    [\"extSubURI\"]    => NULL\n    [\"extSubSystem\"] => NULL\n}\nbool(true)\n```\n\n### Дивіться також\n\n-   [libxml\\_disable\\_entity\\_loader()](function.libxml-disable-entity-loader.md) \\- Вимкнення можливості завантаження сутностей із зовнішніх джерел\n-   [libxml\\_get\\_external\\_entity\\_loader()](function.libxml-get-external-entity-loader.md) \\- Отримує поточний зовнішній завантажувач сутностей\n","title":"libxml\\_set\\_external\\_entity\\_loader","contentType":2,"navigation":[{"function.libxml-get-last-error.md":"« libxml\\_get\\_last\\_error"},{"function.libxml-set-streams-context.md":"libxml\\_set\\_streams\\_context »"},{"index.md":"PHP Manual"},{"ref.libxml.md":"Функції libxml"}]}},"__N_SSG":true}