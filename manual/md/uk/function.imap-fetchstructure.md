- [« imap_fetchmime](function.imap-fetchmime.md)
- [imap_fetchtext »](function.imap-fetchtext.md)

- [PHP Manual](index.md)
- [Функції IMAP](ref.imap.md)
- Прочитати структуру вказаного повідомлення

# imap_fetchstructure

(PHP 4, PHP 5, PHP 7, PHP 8)

imap_fetchstructure — Прочитати структуру вказаного повідомлення

### Опис

**imap_fetchstructure**([IMAP\Connection](class.imap-connection.md)
`$imap`, int `$message_num`, int `$flags` u003d 0): stdClass\|false

Витягує інформацію про структуру вказаного повідомлення.

### Список параметрів

`imap`
Примірник [IMAP\Connection](class.imap-connection.md).

`message_num`
Номер повідомлення

`flags`
Якщо задано як **`FT_UID`**, то в `message_num` повинні бути `UID`
повідомлень, а не їх номери.

### Значення, що повертаються

Повертає об'єкт із властивостями, переліченими в таблиці нижче або
**`false`** у разі виникнення помилки.

| | |
|---------------|--------------------------------- -------------------------------------------------- -------------------------------------------------- ----------|
| тип | Первинний тип тіла
| encoding | Кодування тіла
| якщосубтипу | **`true`**, якщо є рядок підтипу |
| subtype | MIME-підтип |
| ifdescription | **`true`**, якщо є рядок опису |
| description | Контент рядка опису |
| ifid | **`true`**, якщо є рядок ідентифікатор |
| ID | Рядок ідентифікатор |
| lines | Кількість рядків |
| bytes | Кількість байт |
| якщорозклад | **`true`**, якщо є рядок розташування |
| disposition | Рядок розташування |
| якщопараметри | **`true`**, якщо є масив `dparameters` |
| dparameters | Масив об'єктів, кожен з яких має властивості ``attribute'` та ``value'`, що відповідають параметрам `Content-disposition` заголовка MIME. |
| якщопараметри | **`true`**, якщо є масив параметрів |
| параметри | Масив об'єктів, кожен з яких має властивості ``attribute'` та ``value'`. |
| parts | Масив об'єктів ідентичних структурою з верхньорівневим об'єктом, кожен із яких відповідає MIME частини тіла. |

**Об'єкт, що повертається **imap_fetchstructure()****

| Значення | Тип | Константа
|----------|-------------|-----------------|
| 0 | Text | TYPETEXT |
| 1 | multipart | TYPEMULTIPART |
| 2 | message | TYPEMESSAGE |
| 3 | application | TYPEAPPLICATION |
| 4 | audio | TYPEAUDIO |
| 5 | image | TYPEIMAGE |
| 6 | відео | TYPEVIDEO |
| 7 | model | TYPEMODEL |
| 8 | інші | TYPEOTHER |

**Первинний тип тіла (значення можуть відрізнятися залежно від
використовуваної бібліотеки, тому рекомендується використовувати константи)**

| Значення | Тип | Константа
|----------|------------------|------------------- -|
| 0 | 7bit | ENC7BIT |
| 1 | 8bit | ENC8BIT |
| 2 | Binary | ENCBINARY |
| 3 | Base64 | ENCBASE64 |
| 4 | Quoted-Printable | ENCQUOTEDPRINTABLE |
| 5 | інші | ENCOTHER |

**Кодування (значення можуть відрізнятися залежно від використовуваної
бібліотеки, тому рекомендується використовувати константи)**

### Список змін

| Версія | Опис |
|--------|---------------------------------------- -------------------------------------------------- -------------------------------------------------- ---------------|
| 8.1.0 | Параметр `imap` тепер чекає на екземпляр [IMAP\Connection](class.imap-connection.md); раніше очікувався ресурс ([resource](language.types.resource.md)). |

### Дивіться також

- [imap_fetchbody()](function.imap-fetchbody.md) - Вийняти
конкретну секцію тіла повідомлення
- [imap_bodystruct()](function.imap-bodystruct.md) - Прочитати
структуру вказаної секції тіла заданого повідомлення
