- [« Рядки](language.types.string.md)
- [Массиви »](language.types.array.md)

- [PHP Manual](index.md)
- [Типи](language.types.md)
- Числові рядки

## Числові рядки

У PHP, рядок (string) вважається числовим, якщо його можна
інтерпретувати як ціле (int) число або як число з плаваючою точкою
(float).

Формально з PHP 8.0.0:

WHITESPACES \s*
LNUM [0-9]+
DNUM ([0-9] *) [\.] {LNUM}) | ({LNUM}[\.][0-9]*)
EXPONENT_DNUM (({LNUM} | {DNUM}) [eE][+-]? {LNUM})
INT_NUM_STRING {WHITESPACES} [+-]? {LNUM} {WHITESPACES}
FLOAT_NUM_STRING {WHITESPACES} [+-]? ({DNUM} | {EXPONENT_DNUM}) {WHITESPACES}
NUM_STRING ({INT_NUM_STRING} | {FLOAT_NUM_STRING})

У PHP також є концепція *префіксного* числового рядка. Це
рядок, який починається як числовий і продовжується будь-якими іншими
символи.

### Рядки, що використовуються в числових контекстах

Коли рядок необхідно використовувати як число (наприклад
арифметичні операції, декларація цілісного типу і т.д.),
використовується наступний алгоритм дій:

1. Якщо рядок числовий, представляє ціле число і не перевищує
максимально допустимого значення для типу int (визначеного в
**`PHP_INT_MAX`**), то вона наводиться до типу int. Інакше вона
наводиться до типу float.
2. Якщо в заданому контексті можна використовувати префіксну
числовий рядок, то якщо початок рядка представляє ціле число і
не перевищує максимально допустимого значення типу int
(визначеного в **`PHP_INT_MAX`**), вона наводиться до типу int.
Інакше вона наводиться до типу float. Також, у цьому випадку, видається
помилка рівня **`E_WARNING`**.
3. Якщо рядок не числовий - викидається виняток
[TypeError](class.typeerror.md).

### Поведінка до PHP 8.0.0

До PHP 8.0.0, рядок вважався числовим лише у випадку, якщо він
*починалася* з пробільних символів. Якщо вона *завершалася* пробільними
символами - вона вважалася префіксною числовою.

До PHP 8.0.0, коли рядок необхідно використовувати як число,
використовувався той самий алгоритм, що й описаний вище, але з деякими
відмінностями:

- Використання префіксного числового рядка викликало помилку рівня
**`E_NOTICE`**, а не **`E_WARNING`**.
- Якщо рядок не був числовим, викликалася помилка рівня
**`E_WARNING`**, а сам рядок наводився до числа `0`.

До PHP 7.1.0 не викликалася помилка рівня ні **`E_NOTICE`**, ні
**`E_WARNING`**.

` <?php$foo u003d 1 + "10.5"; // $foo вважається за число з плаваючою точкою (11.5)$foo u003d 1 + "-1.3e3"; // $foo вважається за число з плаваючою точкою (-1299)$foo u003d 1 + "bob-1.3e3"; //TypeError починаючи с PHP 8.0.0. У більш ранніх версіях $foo вважалося за ціле число (1)$foo u003d 1 + "bob3"; // TypeError починаючи з PHP 8.0.0, У більш ранніх версіях $foo вважалося за ціле число (1)$foo u003d 1 + "10 Small Pigs"; //$foo - ціле (11). У PHP 8.0.0 створюється помилка рівня E_WARNING, а в більш ранніх версіях рівня E_NOTICE$foo u003d 4 + "10.2 Little Piggies"; //$foo - число з плаваючою точкою (14.2). У PHP 8.0.0 створюється помилка рівня E_WARNING, а у більш ранніх версіях рівня E_NOTICE$foo u003d "10.0 pigs " + 1; // $foo - число з плаваючою точкою(11). В PHP 8.0.0 створюється помилка рівня E_WARNING, а у більш ранніх версіях рівня E_NOTICE$foo u003d "10.0 pigs " + 1.0; // $foo - число з плаваючою точкою(11). У PHP 8.0.0 створюється помилка рівня E_WARNING, а в більш ранніх версіях рівня E_NOTICE?> `
