- [« Варіант 4: PHP поза деревом
веб-документів](security.cgi-bin.shell.md)
- [Безпека сесій»] (security.sessions.md)

- [PHP Manual](index.md)
- [Безпека](security.md)
- Якщо PHP встановлено як модуль Apache

# Якщо PHP встановлено як модуль Apache

Якщо PHP використовується як модуль Apache, він успадковує права
користувача, з якими було запущено веб-сервер (зазвичай це користувач
"nobody"). Це впливає на забезпечення безпеки та реалізацію
авторизації. Наприклад, якщо ви використовуєте PHP для доступу до бази
даних, яка не має вбудованого механізму розмежування доступу,
вам доведеться забезпечити доступ до БД для користувача 'nobody'. У такому
у разі шкідливого сценарію може отримати доступ до бази даних і
модифікувати її, навіть не знаючи логіну та паролю. Цілком можлива
ситуація, при якій веб-павук неправильними запитами на сторінку
адміністратора бази даних може знищити всі ваші бази даних. Ви
можете уникнути такої ситуації за допомогою авторизації Apache або
розробивши власну модель доступу, використовуючи LDAP файли `.htaccess`
або будь-які інші технології, впроваджуючи відповідний код у ваші
PHP-скрипти.

Досить часто використовуються такі налаштування безпеки, за яких
PHP (мається на увазі користувач, з правами якого виконується Apache)
має мінімальні привілеї, наприклад, відсутня можливість запису в
користувацькі директорії за допомогою PHP. Або, наприклад, відсутня
можливість працювати з базою даних. При цьому система безпеки не
дозволяє записувати як "хороші", так і "погані" файли, або провести
"хороші" чи "погані" транзакції.

Поширеною помилкою є запуск Apache із правами
суперкористувача або будь-яке інше розширення повноважень веб-сервера.

Розширення привілеїв веб-сервера до повноважень суперкористувача
загрожує працездатності усієї системи, тому такі команди, як
sudo, chroot та інші способи запуску з правами суперкористувача повинні
виконуватися виключно тими, хто професійно розуміється на
питання безпеки.

Існує кілька простих рішень. Використовуючи
[open_basedir](ini.core.md#ini.open-basedir), ви можете обмежити
дерево доступних директорій для PHP. Ви також можете визначити область
доступу Apache, обмеживши всі дії, що здійснюються з Інтернету
користувальницькими чи несистемними файлами.
