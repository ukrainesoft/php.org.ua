{"pageProps":{"page":{"slug":"mysql-xdevapi-collectionfind.lockshared.md","content":"# CollectionFind::lockShared\n\n(No version information available, might only be in Git)\n\nCollectionFind::lockShared — Виконує операцію з SHARED LOCK\n\n### Опис\n\n```methodsynopsis\npublic mysql_xdevapi\\CollectionFind::lockShared(int $lock_waiting_option = ?): mysql_xdevapi\\CollectionFind\n```\n\nДозволяє розділяти документи між кількома транзакціями, які блокуються в режимі спільного доступу.\n\nІнші сеанси можуть читати рядки, але не можуть змінювати їх, доки ваша транзакція не буде зафіксована.\n\nЯкщо один із цих рядків був змінений іншою транзакцією, яка ще не зафіксована, запит почекає завершення цієї транзакції, а потім використовує зафіксовані значення.\n\n### Список параметрів\n\n`lock_waiting_option`\n\nДополнительная опция ожидания. По умолчанию имеет значение\\*\\*`MYSQLX_LOCK_DEFAULT`\\*\\*. Допустимі значення представлені константами:\n\n-   **`MYSQLX_LOCK_DEFAULT`**\n    \n-   **`MYSQLX_LOCK_NOWAIT`**\n    \n-   **`MYSQLX_LOCK_SKIP_LOCKED`**\n    \n\n### Значення, що повертаються\n\nПовертає об'єкт класу CollectionFind, з яким можна буде працювати далі.\n\n### Приклади\n\n**Приклад #1 Приклад использования метода**mysql\\_xdevapi\\\\CollectionFind::lockShared()\\*\\*\\*\\*\n\n```php\n<?php\n$session = mysql_xdevapi\\getSession(\"mysqlx://user:password@localhost\");\n\n$schema     = $session->getSchema(\"addressbook\");\n$collection = $schema->createCollection(\"people\");\n\n$session->startTransaction();\n\n$result = $collection\n  ->find(\"age > 50\")\n  ->lockShared()\n  ->execute();\n\n// ... читаем объект в режиме совместного доступа\n\n// Завершаем транзакцию и разблокируем документ\n$session->commit();\n?>\n```\n","title":"CollectionFind::lockShared","contentType":2,"navigation":[{"mysql-xdevapi-collectionfind.lockexclusive.md":"« CollectionFind::lockExclusive"},{"mysql-xdevapi-collectionfind.offset.md":"CollectionFind::offset »"},{"index.md":"PHP Manual"},{"class.mysql-xdevapi-collectionfind.md":"mysql\\_xdevapi\\\\CollectionFind"}]}},"__N_SSG":true}