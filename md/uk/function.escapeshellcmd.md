- [« escapeshellarg](function.escapeshellarg.md)
- [exec »] (function.exec.md)

- [PHP Manual](index.md)
- [Функції запуску програм](ref.exec.md)
- Екранувати метасимволи командного рядка

# escapeshellcmd

(PHP 4, PHP 5, PHP 7, PHP 8)

escapeshellcmd — Екранувати метасимволи командного рядка

### Опис

**escapeshellcmd**(string `$command`): string

Команда **escapeshellcmd()** екранує будь-які символи у рядку, які
можуть бути використані для обману команди оболонки при виконанні
довільних команд. Ця функція повинна бути використана, щоб
переконатися, що будь-які дані, що вводяться користувачем, будуть екрановані
перед передачею їх функцій [exec()](function.exec.md) або
[system()](function.system.md) або оператору ["зворотний
апостроф"](language.operators.execution.md).

Наступні символи будуть екрановані за допомогою зворотного сліша:
`` &#;`|*?~<>^()[]{}$\ ``, `\x0A` і `\xFF`. Символи ``` та ````
екрануються лише тому випадку, якщо вони зустрічаються не попарно. В
Windows все цим символам, плюс `!` та `%` передує символ каретки
(`^`).

### Список параметрів

`command`
Команда, яка буде екранована.

### Значення, що повертаються

Екранований рядок.

### Приклади

**Приклад #1 Приклад використання **escapeshellcmd()****

` <?php// Ми навмисно допускаємо тут довільна кількість аргументів.$command u003d './configure '.$_POST['configure_options'];$escaped_command u003d escapeshellcmd($command);

**Увага**

Функцію **escapeshellcmd()** слід використовувати над усією командною
рядком, але вона все ще дозволяє атакуючому передати довільне
кількість аргументів. Для екранування одного аргументу замість неї
необхідно використовувати функцію
[escapeshellarg()](function.escapeshellarg.md).

**Увага**

Прогалини не будуть екрановані за допомогою **escapeshellcmd()**, що може
бути проблематичним у Windows з такими шляхами, як:
`C:\Program Files\ProgramName\program.exe`. Можна зменшити проблему,
використовуючи наступний фрагмент коду:

`` <?php$cmd u003d preg_replace('`(?<!^) `', '^ ', escapeshellcmd($cmd)); ``

### Дивіться також

- [escapeshellarg()](function.escapeshellarg.md) - Екранувати
рядок для того, щоб вона могла бути використана як аргумент
командного рядка
- [exec()](function.exec.md) - Виконати зовнішню програму
- [popen()](function.popen.md) - Відкриває файловий покажчик
процесу
- [system()](function.system.md) - Виконати зовнішню програму та
відобразити висновок
- [Оператор виконання](language.operators.execution.md)
