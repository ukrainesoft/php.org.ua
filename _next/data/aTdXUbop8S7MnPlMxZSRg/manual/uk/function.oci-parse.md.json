{"pageProps":{"page":{"slug":"function.oci-parse.md","content":"# oci\\_parse\n\n(PHP 5, PHP 7, PHP 8, PECL OCI8 >= 1.1.0)\n\noci\\_parse — Підготовка запиту до виконання\n\n### Опис\n\n```methodsynopsis\noci_parse(resource $connection, string $sql): resource|false\n```\n\nГотує `sql` до виконання, використовуючи з'єднання `connection` і повертає ідентифікатор виразу, який може бути використаний далі функціями[oci\\_bind\\_by\\_name()](function.oci-bind-by-name.md),[oci\\_execute()](function.oci-execute.md) та іншими.\n\nІдентифікатори виразів можуть бути звільнені функцією [oci\\_free\\_statement()](function.oci-free-statement.md)или установкой переменной в\\*\\*`null`\\*\\*\n\n### Список параметрів\n\n`connection`\n\nІдентифікатор з'єднання Oracle, отриманий із функцій [oci\\_connect()](function.oci-connect.md) [oci\\_pconnect()](function.oci-pconnect.md) або [oci\\_new\\_connect()](function.oci-new-connect.md)\n\n`sql`\n\nЗапит SQL або PL/SQL.\n\nSQL-запити *не повинні* закінчуватися точкою з комою (\";\"). PL/SQL-запити *повинні* закінчуватися точкою з комою (\";\").\n\n### Значення, що повертаються\n\nПовертає дескриптор виразу у разі успішного виконання або \\*\\*`false`\\*\\*в случае возникновения ошибки.\n\n### Приклади\n\n**Приклад #1 Приклад використання** oci\\_parse()\\*\\* із SQL-запитами\\*\\*\n\n```php\n<?php\n\n$conn = oci_connect('hr', 'welcome', 'localhost/XE');\n\n// Парсинг запроса. Обратите внимание на отсутствие точки запятой в конце SQL-запроса\n$stid = oci_parse($conn, 'SELECT * FROM employees');\noci_execute($stid);\n\necho \"<table border='1'>\\n\";\nwhile ($row = oci_fetch_array($stid, OCI_ASSOC+OCI_RETURN_NULLS)) {\n    echo \"<tr>\\n\";\n    foreach ($row as $item) {\n        echo \"    <td>\" . ($item !== null ? htmlentities($item, ENT_QUOTES) : \"\") . \"</td>\\n\";\n    }\n    echo \"</tr>\\n\";\n}\necho \"</table>\\n\";\n\n?>\n```\n\n**Приклад #2 Приклад використання** oci\\_parse()\\*\\* з PL/SQL-запитами\\*\\*\n\n```php\n<?php\n\n/*\n  Перед запуском PHP-скрипта, создайте хранимую процедуру в\n  SQL*Plus или SQL Developer:\n\n  CREATE OR REPLACE PROCEDURE myproc(p1 IN NUMBER, p2 OUT NUMBER) AS\n  BEGIN\n      p2 := p1 * 2;\n  END;\n\n*/\n\n$conn = oci_connect('hr', 'welcome', 'localhost/XE');\nif (!$conn) {\n    $e = oci_error();\n    trigger_error(htmlentities($e['message'], ENT_QUOTES), E_USER_ERROR);\n}\n\n$p1 = 8;\n\n// При парсинге PL/SQL запросов необходимо наличие точки с запятой в конце строки\n$stid = oci_parse($conn, 'begin myproc(:p1, :p2); end;');\noci_bind_by_name($stid, ':p1', $p1);\noci_bind_by_name($stid, ':p2', $p2, 40);\n\noci_execute($stid);\n\nprint \"$p2\\n\";   // prints 16\n\noci_free_statement($stid);\noci_close($conn);\n\n?>\n```\n\n### Примітки\n\n> **Зауваження** :\n> \n> Ця функція *не перевіряє*синтаксис запроса`sql`. Єдиний спосіб перевірити правильність SQL чи PL/SQL-запиту `sql` - це здійснити його.\n\n### Дивіться також\n\n-   [oci\\_execute()](function.oci-execute.md) \\- Виконує підготовлений вираз\n-   [oci\\_free\\_statement()](function.oci-free-statement.md) \\- Звільняє ресурси, які займає курсор або SQL-вираз.\n","title":"oci\\_parse","contentType":2,"navigation":[{"function.oci-num-rows.md":"« oci\\_num\\_rows"},{"function.oci-password-change.md":"oci\\_password\\_change »"},{"index.md":"PHP Manual"},{"ref.oci8.md":"OCI8 Функції"}]}},"__N_SSG":true}