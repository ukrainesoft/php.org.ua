- [« Типи ресурсів](luasandbox.resources.md)
- [Приклади »](luasandbox.examples.md)

- [PHP Manual](index.md)
- [LuaSandbox](book.luasandbox.md)
- Відмінності від стандартного Lua

# Відмінності від стандартного Lua

LuaSandbox надає ізольоване середовище, яке в деяких
відносинах відрізняється від стандартної Lua 5.1.

### Функції, які недоступні

- `dofile()`, `loadfile()` та пакет `io`, оскільки вони дозволяють
прямий доступ до файлової системи. За необхідності доступ до
Файлова система повинна здійснюватися через callback-функції PHP.

- Пакет `package`, включаючи `require()` та `module()`, так як він сильно
залежить від прямого доступу до файлової системи. Замість нього можна
використовувати перезапис на чистому Lua, таку як та, що
використовується у модулі MediaWiki Scribunto.

- `load()` та `loadstring()`, для статичного аналізу коду Lua.

- `print()`, оскільки функція виводить стандартний висновок. При
Необхідність виведення має виконуватися через callback-функції PHP.

- Більшість пакету `os`, оскільки він дозволяє керувати
процесом та виконувати інші процеси.

- `os.clock()`, `os.date()`, `os.difftime()` та `os.time()`
залишаються доступними.

- Більшість пакету `debug`, оскільки він дозволяє маніпулювати
станом Lua та метаданими способами, які можуть порушити
пісочницю.

- `debug.traceback()` залишається доступним.

- `string.dump()`, оскільки це може розкрити внутрішні дані.

- `collectgarbage()`, `gcinfo()` та пакет `coroutine` не були перевірені
на безпеку.

### Змінені функції

- `pcall()` та `xpcall()` не може відловити певні помилки,
особливо помилки часу очікування.

- `tostring()` не містить адреси вказівників.

- `string.match()` була виправлена для обмеження глибини рекурсії та
періодичної перевірки часу очікування.

- `math.random()` та `math.randomseed()` замінюються версіями, які
не поділяють стан із функцією PHP `rand()`.

- Метаметоди `__pairs` та `__ipairs` Lua 5.2 підтримуються за допомогою
`pairs()` та `ipairs()`.
