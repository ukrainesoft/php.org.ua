{"pageProps":{"page":{"slug":"function.cubrid-connect-with-url.md","content":"# cubrid\\_connect\\_with\\_url\n\n(PECL CUBRID >= 8.3.1)\n\ncubrid\\_connect\\_with\\_url — Створює оточення для з'єднання із сервером CUBRID\n\n### Опис\n\n```methodsynopsis\ncubrid_connect_with_url(    string $conn_url,    string $userid = ?,    string $passwd = ?,    bool $new_link = false): resource\n```\n\nФункция**cubrid\\_connect\\_with\\_url()** використовується для створення оточення для з'єднання з сервером за допомогою інформації, заданої у вигляді рядка URL. Якщо в CUBRID дозволена функціональність високої доступності, необхідно встановити інформацію для з'єднання з резервним сервером, яка буде використовуватися для з'єднання, якщо з основним щось трапиться. Якщо логін та пароль не задані, то за умовчанням використовуватиметься з'єднання \"PUBLIC\".\n\n::= CUBRID::<db\\_name>:<db\\_user>:<db\\_password>:\\[? \\]\n\n\\[&\\]\n\n::= alhosts=<alternative\\_hosts>\\[ &rctime=\\]\n\n::= login\\_timeout=<milli\\_sec>\n\n::= query\\_timeout=<milli\\_sec>\n\n::= disconnect\\_on\\_query\\_timeout=true|false\n\n<alternative\\_hosts> ::= <standby\\_broker1\\_host>: \\[,<standby\\_broker2\\_host>:\\]\n\n:= HOSTNAME | IP\\_ADDR\n\n:= SECOND\n\n<milli\\_sec> := MILLI SECOND\n\n-   host : Ім'я хоста або IP-адреса основного сервера\n-   db\\_name : ім'я бази даних\n-   db\\_user : Ім'я користувача\n-   db\\_password : пароль\n-   alhosts : Задає інформацію про брокера резервного сервера, який буде використовуватися у разі недоступності основного. Якщо ви задасте кілька резервних брокерів, спроби з'єднання будуть відбуватися в тому ж порядку, як вони описані в URL.\n-   rctime : Інтервал між спробами підключення до активного брокера, у якому відбувся збій. Після виникнення помилки система з'єднається з резервним брокером, вказаним в althosts (failover), відкотить незавершені транзакції, і потім спробує з'єднатися з активним брокером основного вузла через кожні rctime. Значення за промовчанням 600 секунд.\n-   login\\_timeout : Максимальний час (мілісекунди) очікування на авторизацію. За умовчанням 0, що означає нескінченний час очікування.\n-   query\\_timeout : Максимальний час (мілісекунди) очікування на виконання запиту. Після вичерпання цього часу на сервер буде надіслано повідомлення про припинення запиту. Повернене значення запиту залежатиме від налаштування disconnect\\_on\\_query\\_timeout; навіть якщо буде надіслано повідомлення про припинення запиту, він може завершитися вдало.\n-   disconnect\\_on\\_query\\_timeout : Визначає, чи повертається помилка відразу після перевищення часу очікування запиту. За замовчуванням\\*\\*`false`\\*\\*\n\n> **Зауваження** :\n> \n> Символи `?` и `:` є спеціальними в URL-з'єднання і не можуть бути використані в паролі. Приклад некоректного пароля, який не можна використовувати в рядку з'єднання, тому що в ньому використовуються символи \"`?:`\".\n> \n> $url = \"CUBRID:localhost:33000:tdb:dba:12?:?login\\_timeout=100\";\n> \n> Пароли, содержащие`?` или `:` можуть бути надіслані окремо.\n> \n> $url = \"CUBRID:localhost:33000:tbd:::?login\\_timeout=100\";\n> \n> $conn = cubrid\\_connect\\_with\\_url($url, \"dba\", \"12?\");\n> \n> Якщо логін або пароль порожні, необхідно зберігати символи \" `:` \":\n> \n> $url = \"CUBRID:localhost:33000:demodb:::\";\n\n### Список параметрів\n\n`conn_url`\n\nРядок, що містить інформацію для з'єднання.\n\n`userid`\n\nІм'я користувача.\n\n`passwd`\n\nпароль.\n\n`new_link`\n\nЯкщо функція **cubrid\\_connect\\_with\\_url()** була викликана повторно з такими ж аргументами, нове з'єднання не буде створено, замість нього буде повернено ідентифікатор вже підключення. Параметр `new_link` змінює таку поведінку і змушує **cubrid\\_connect\\_with\\_url()** у будь-якому випадку створити нове з'єднання, навіть якщо функція **cubrid\\_connect\\_with\\_url()** раніше була викликана з такими самими аргументами.\n\n### Значення, що повертаються\n\nІдентифікатор підключення у разі успішного виконання або \\*\\*`false`\\*\\*в случае возникновения ошибки.\n\n### Приклади\n\n**Приклад #1 Приклад використання** cubrid\\_connect\\_with\\_url()\\*\\* без завдання властивостей\\*\\*\n\n```php\n<?php\n$conn_url = \"CUBRID:localhost:33000:demodb:dba::\";\n$con = cubrid_connect_with_url($conn_url);\n\nif ($con) {\n   echo \"connected successfully\";\n   cubrid_execute($con, \"create table person(id int,name char(16))\");\n   $req =cubrid_execute($con, \"insert into person values(1,'James')\");\n\n   if ($req) {\n      cubrid_close_request($req);\n      cubrid_commit($con);\n   } else {\n      cubrid_rollback($con);\n   }\n   cubrid_disconnect($con);\n}\n?>\n```\n\n**Приклад #2 Приклад використання** cubrid\\_connect\\_with\\_url()**с заданием свойств**\n\n```php\n<?php\n$conn_url = \"CUBRID:127.0.0.1:33000:demodb:dba::?login_timeout=100\";\n$con = cubrid_connect_with_url ($conn_url);\n\nif ($con) {\n   echo \"connected successfully\";\n   cubrid_execute($con, \"create table person(id int,name char(16))\");\n   $req =cubrid_execute($con, \"insert into person values(1,'James')\");\n\n   if ($req) {\n      cubrid_close_request($req);\n      cubrid_commit($con);\n   } else {\n      cubrid_rollback($con);\n   }\n   cubrid_disconnect($con);\n}\n?>\n```\n\n### Дивіться також\n\n-   [cubrid\\_connect()](function.cubrid-connect.md) \\- Відкриває з'єднання з сервером CUBRID\n-   [cubrid\\_pconnect()](function.cubrid-pconnect.md) \\- Відкриває постійне з'єднання із сервером CUBRID\n-   [cubrid\\_pconnect\\_with\\_url()](function.cubrid-pconnect-with-url.md) \\- Відкриває постійне з'єднання із сервером CUBRID\n-   [cubrid\\_disconnect()](function.cubrid-disconnect.md) \\- Закриває з'єднання з базою даних\n-   [cubrid\\_close()](function.cubrid-close.md) \\- Закриває з'єднання з базою даних\n","title":"cubrid\\_connect\\_with\\_url","contentType":2,"navigation":[{"function.cubrid-commit.md":"« cubrid\\_commit"},{"function.cubrid-connect.md":"cubrid\\_connect »"},{"index.md":"PHP Manual"},{"ref.cubrid.md":"Функції CUBRID"}]}},"__N_SSG":true}