- [« imap_getacl](function.imap-getacl.md)
- [imap_getsubscribed »](function.imap-getsubscribed.md)

- [PHP Manual](index.md)
- [Функції IMAP](ref.imap.md)
- Прочитати список поштових скриньок, повертаючи докладну інформацію
кожному з них

#imap_getmailboxes

(PHP 4, PHP 5, PHP 7, PHP 8)

imap_getmailboxes — Прочитати список поштових скриньок, повертаючи
детальну інформацію щодо кожного з них

### Опис

**imap_getmailboxes**([IMAP\Connection](class.imap-connection.md)
`$imap`, string `$reference`, string `$pattern`): array\|false

Отримує інформацію про поштові скриньки.

### Список параметрів

`imap`
Примірник [IMAP\Connection](class.imap-connection.md).

`reference`
`reference` зазвичай має бути лише специфікацією сервера, як описано
в [imap_open()](function.imap-open.md)

**Увага**
Якщо
[imap.enable_insecure_rsh](imap.configuration.md#ini.imap.enable-insecure-rsh)
не вимкнено, то передача в цей параметр не перевірених даних *не
безпечна*.

`pattern`
Визначає початок пошуку у ієрархії поштових скриньок.

Є два спеціальні символи, які можна використовувати під час передачі
як частина `pattern`: '`*`` та '`%''. '`*`' повертає всі поштові скриньки.
Якщо ви передасте `pattern` як ``*``, то отримаєте повний перелік
ієрархії поштових скриньок. ''%'' поверне лише поточний рівень. ''%'',
переданий як параметр `pattern`, поверне поштові скриньки лише на самому
верхній рівень; '`~/mail/%`' на `UW_IMAPD` поверне всі ящики в директорії
`~/mail`, крім тих, що знаходяться в її піддиректоріях.

### Значення, що повертаються

Повертає масив об'єктів, що містять інформацію про скриньки. Кожен
об'єкт має властивості: `name`, що містить повне ім'я скриньки; `delimiter`,
містить роздільник для тієї частини ієрархії, в якій міститься
ящик; та `attributes`. Параметр `Attributes` є бітовою маскою,
наступних допустимих констант:

- **`LATT_NOINFERIORS`** - ця скринька не має і не може мати
нащадків (містити вкладені ящики). Виклик функції
[imap_createmailbox()](function.imap-createmailbox.md) не буде
працювати для цього ящика.

- **`LATT_NOSELECT`** - це лише контейнер, а не поштова скринька. Ви
не можете відкрити його.

- **`LATT_MARKED`** - Ця скринька позначена. Це означає, що в ньому можуть
бути нові листи, що з'явилися з останньої перевірки.
Не працює з усіма серверами IMAP.

- **`LATT_UNMARKED`** - Ця скринька не помічена, тобто. у ньому немає нових
листів. Якщо один із прапорів **`MARKED`** або **`UNMARKED`**
виставлений – можете вважати, що сервер підтримує цей функціонал.

- **`LATT_REFERRAL`** - Цей контейнер має напрямки (referral) на
віддалена поштова скринька.

- **`LATT_HASCHILDREN`** - Ця поштова скринька має обрані
підлеглі (inferiors).

- **`LATT_HASNOCHILDREN`** - Ця поштова скринька не має обраних
підлеглі (inferiors).

Функція повертає **`false`** у разі виникнення помилки.

### Список змін

| Версія | Опис |
|--------|---------------------------------------- -------------------------------------------------- -------------------------------------------------- ---------------|
| 8.1.0 | Параметр `imap` тепер чекає на екземпляр [IMAP\Connection](class.imap-connection.md); раніше очікувався ресурс ([resource](language.types.resource.md)). |

### Приклади

**Приклад #1 Приклад використання **imap_getmailboxes()****

` <?php$mbox u003d imap_open("{imap.example.org}", "username", "password", OP_HALFOPEN)       or die("не удалося підключитися: " . imap_last$$ mbox, "{imap.example.org}", "*");if (is_array($list)) {   foreach ($list as $key u003d> $val) {        echo "" echo imap_utf7_decode($val->name) . ","; echo "'" . $val->delimiter . "',"; echo$val->attributes . "<br />
";    }} else {    echo "виклик imap_getmailboxes закінчився з помилкою: " . imap_last_error() . "
";}imap_close($mbox);?> `

### Дивіться також

- [imap_getsubscribed()](function.imap-getsubscribed.md) - Список
всіх поштових скриньок, на які ви підписані
