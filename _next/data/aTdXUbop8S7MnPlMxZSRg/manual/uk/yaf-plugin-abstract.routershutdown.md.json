{"pageProps":{"page":{"slug":"yaf-plugin-abstract.routershutdown.md","content":"# Yaf\\_Plugin\\_Abstract::routerShutdown\n\n(Yaf >=1.0.0)\n\nYaf\\_Plugin\\_Abstract::routerShutdown — Призначення routerShutdown\n\n### Опис\n\n```methodsynopsis\npublic Yaf_Plugin_Abstract::routerShutdown(Yaf_Request_Abstract $request, Yaf_Response_Abstract $response): void\n```\n\nЦей перехоплювач буде запущений після завершення процесу маршрутизації, який зазвичай використовується для перевірки входу в систему.\n\n### Список параметрів\n\n`request`\n\n`response`\n\n### Значення, що повертаються\n\n### Приклади\n\n**Приклад #1 Приклад використання** Yaf\\_Plugin\\_Abstract::routerShutdown()\\*\\*\\*\\*\n\n```php\n<?php\nclass UserInitPlugin extends Yaf_Plugin_Abstract {\n\n    public function routerShutdown(Yaf_Request_Abstract $request, Yaf_Response_Abstract $response) {\n        $controller = $request->getControllerName();\n\n        /**\n         * Использовать контроллер доступа не нужно для API\n         */\n        if (in_array(strtolower($controller), array(\n            'api',\n        ))) {\n            return TRUE;\n        }\n\n        if (Yaf_Session::getInstance()->has(\"login\")) {\n            return TRUE;\n        }\n\n        /* Ошибка проверки доступа, необходимо войти */\n        $response->setRedirect(\"http://yourdomain.com/login/\");\n        return FALSE;\n    }\n}\n?>\n```\n\n### Дивіться також\n\n-   [Yaf\\_Plugin\\_Abstract::routerStartup()](yaf-plugin-abstract.routerstartup.md) \\- Перехоплювач RouterStartup\n-   [Yaf\\_Plugin\\_Abstract::dispatchLoopStartup()](yaf-plugin-abstract.dispatchloopstartup.md) \\- Хук перед відправкою циклу\n-   [Yaf\\_Plugin\\_Abstract::preDispatch()](yaf-plugin-abstract.predispatch.md) \\- Призначення preDispatch\n-   [Yaf\\_Plugin\\_Abstract::postDispatch()](yaf-plugin-abstract.postdispatch.md) \\- Призначення postDispatch\n-   [Yaf\\_Plugin\\_Abstract::dispatchLoopShutdown()](yaf-plugin-abstract.dispatchloopshutdown.md) \\- Призначення dispatchLoopShutdown\n","title":"Yaf\\_Plugin\\_Abstract::routerShutdown","contentType":2,"navigation":[{"yaf-plugin-abstract.preresponse.md":"« Yaf\\_Plugin\\_Abstract::preResponse"},{"yaf-plugin-abstract.routerstartup.md":"Yaf\\_Plugin\\_Abstract::routerStartup »"},{"index.md":"PHP Manual"},{"class.yaf-plugin-abstract.md":"Yaf\\_Plugin\\_Abstract"}]}},"__N_SSG":true}