{"pageProps":{"page":{"slug":"migration81.deprecated.md","content":"## Застаріла функціональність\n\n### Ядро PHP\n\n#### Реализация[Serializable](class.serializable.md)без**\\_\\_serialize()** і **\\_\\_unserialize()**\n\nЯкщо не потрібна підтримка версій PHP менше 7.4, повинні бути реалізовані лише ці два магічні методи, інакше потрібно реалізувати як методи інтерфейсу, так і магічні методи.\n\n#### Передача\\*\\*`null`\\*\\* параметрам вбудованих функцій, які не допускають значення NULL\n\nНе рекомендується передавати значення NULL скалярним параметрам вбудованих функцій. В іншому випадку тепер буде викликане повідомлення. Таке обмеження було введено, щоб краще відповідати роботі функцій користувача, де параметри, що допускають значення NULL, повинні бути для цього явно позначені.\n\n```php\n<?php\nvar_dump(str_contains(\"foobar\", null));\n// Deprecated: Passing null to parameter #2 ($needle) of type string\n//             is deprecated\n?>\n```\n\n#### Неявна несумісність перетворення float до int\n\nТепер потрібно уникати неявного перетворення числа з плаваючою точкою (float) до цілого числа (int), що призводить до втрати точності. Це впливає на ключі масиву (array), оголошення цілих (int) типів у примусовому режимі та операторів, що працюють з цілими числами (int).\n\n```php\n<?php\n$a = [];\n$a[15.5]; // устарело, поскольку значение ключа теряет компонент 0.5\n$a[15.0]; // работает, так как 15.0 == 15\n?>\n```\n\n#### Виклик static-елемента у трейтах\n\nВиклик static-методу або доступ до static-властивості безпосередньо в трейті застарів. До статичних методів та властивостей слід звертатися лише у класі, який використовує трейт.\n\n#### Возврат не массива (array) из**\\_\\_sleep()**\n\nВозвращаемое значение[\\_\\_sleep()](language.oop5.magic.md#object.sleep), що не є масивом, тепер згенерує повідомлення.\n\n#### Повернення значення за посиланням функції void\n\n```php\n<?php\nfunction &test(): void {}\n?>\n```\n\nТака функція збиває з пантелику, тому тепер видасть наступний **`E_NOTICE`** `Only variable references should be returned by reference` (За посиланням повинні повертатися лише посилання змінні).\n\n#### Автовивификация из\\*\\*`false`\\*\\*\n\nАвтовівіфікація - це створення нового масиву (array) при додаванні нового значення. Автовівіфікація заборонена для скалярних значень, проте **`false`** був винятком. Тепер така поведінка застаріла.\n\n```php\n<?php\n$arr = false;\n$arr[] = 2;   // устарело\n?>\n```\n\n> **Зауваження** :\n> \n> Автовивификация из\\*\\*`null`\\*\\* та невизначеного значення як і раніше дозволена:\n> \n> ```php\n> <?php\n> // З невизначеного значення\n> $arr[] = 'якесь значення';\n> $arr['doesNotExist'][] = 2;\n> // З null\n> $ arr = null;\n> $arr[] = 2;\n> ?>\n> ```\n\n### ctype\n\n#### Перевірка нерядкових аргументів\n\nПередача нерядкового аргументу застаріла. У майбутньому аргумент інтерпретуватиметься як рядок замість коду ASCII. Залежно від передбачуваної поведінки, аргумент повинен бути приведений до рядка (string) явним чином або через виклик [chr()](function.chr.md). Ця зміна стосується всіх функцій `ctype_*()`\n\n### Date\n\nФункції [date\\_sunrise()](function.date-sunrise.md) і [date\\_sunset()](function.date-sunset.md)устарели в пользу[date\\_sun\\_info()](function.date-sun-info.md)\n\nФункция[strptime()](function.strptime.md) застаріла. Замість неї використовуйте [date\\_parse\\_from\\_format()](function.date-parse-from-format.md) (для синтаксичного аналізу, що не залежить від мовного стандарту) або [IntlDateFormatter::parse()](intldateformatter.parse.md) (Для синтаксичного аналізу, що залежить від мовного стандарту).\n\nФункция[strftime()](function.strftime.md) і [gmstrftime()](function.gmstrftime.md)устарели. Используйте вместо них функцию[date()](function.date.md) (для форматування, що не залежить від мовного стандарту) або метод [IntlDateFormatter::format()](intldateformatter.format.md) (Для форматування, що залежить від мовного стандарту).\n\n### Фільтр\n\nФільтри \\*\\*`FILTER_SANITIZE_STRING`** і **`FILTER_SANITIZE_STRIPPED`\\*\\*устарели.\n\nINI-директива[filter.default](filter.configuration.md#ini.filter.default)устарела.\n\n### GD\n\nПараметр`num_points` функції [imagepolygon()](function.imagepolygon.md) [imageopenpolygon()](function.imageopenpolygon.md) і [imagefilledpolygon()](function.imagefilledpolygon.md)устарел.\n\n### Хешування\n\nФункції [mhash()](function.mhash.md) [mhash\\_keygen\\_s2k()](function.mhash-keygen-s2k.md) [mhash\\_count()](function.mhash-count.md) [mhash\\_get\\_block\\_size()](function.mhash-get-block-size.md) і [mhash\\_get\\_hash\\_name()](function.mhash-get-hash-name.md) застаріли. Замість них використовуйте функції `hash_*()`\n\n### IMAP\n\nКонстанта\\*\\*`NIL`\\*\\* застаріла. Замість неї використовуйте\n\n### Intl\n\nВиклик [IntlCalendar::roll()](intlcalendar.roll.md)с логическим значением (bool) устарел. Используйте и`-1` замість \\*\\*`true`** і **`false`\\*\\*соответственно.\n\n### Багатобайтові рядки\n\nВиклик [mb\\_check\\_encoding()](function.mb-check-encoding.md) без жодних аргументів застарів.\n\n### MySQLi\n\nВластивість mysqli\\_driver::$driver\\_version застаріло. Воно було неактуальним, використовуйте замість нього **`PHP_VERSION_ID`**\n\nВиклик методу [mysqli::get\\_client\\_info()](mysqli.get-client-info.md) або [mysqli\\_get\\_client\\_info()](mysqli.get-client-info.md) з аргументом `mysqli`устарел. Используйте[mysqli\\_get\\_client\\_info()](mysqli.get-client-info.md) без жодних аргументів, щоб отримати інформацію про версію клієнтської бібліотеки.\n\nМетод[mysqli::init()](mysqli.init.md) застарів. Замініть дзвінки **parent::init()**на**parent::\\_\\_construct()**\n\n### OCI8\n\nINI-директива[oci8.old\\_oci\\_close\\_semantics](oci8.configuration.md#ini.oci8.old-oci-close-semantics)устарела.\n\n### ODBC\n\nФункция[odbc\\_result\\_all()](function.odbc-result-all.md)устарела.\n\n### PDO\n\nРежим вибірки \\*\\*`PDO::FETCH_SERIALIZE`\\*\\*устарел.\n\n### PgSQL\n\nФункциям`pgsql_*()` Тепер потрібно явно передавати параметр connection.\n\n### SOAP\n\nПараметр`ssl_method`в[SoapClient::\\_\\_construct()](soapclient.construct.md)устарел в пользу параметров контекста потока SSL.\n\n### Стандартні функції\n\nВиклик [key()](function.key.md) [current()](function.current.md) [next()](function.next.md) [prev()](function.prev.md) [reset()](function.reset.md) або [end()](function.end.md) з об'єктами (object) застарів. Або спочатку перетворіть об'єкт (object) на масив (array) за допомогою функції [get\\_mangled\\_object\\_vars()](function.get-mangled-object-vars.md), або використовуйте методи, що надаються класом, що реалізує інтерфейс [Iterator](class.iterator.md), наПриклад,[ArrayIterator](class.arrayiterator.md)\n\nINI-директива[auto\\_detect\\_line\\_endings](filesystem.configuration.md#ini.auto-detect-line-endings) застаріла. При необхідності обробіть розриви рядків `\"\\r\"`вручную.\n\nКонстанти **`FILE_BINARY`** і **`FILE_TEXT`** застаріли. Вони ніколи не мали сенсу.\n","title":"Застаріла функціональність","contentType":2,"navigation":[{"migration81.incompatible.md":"« Зміни, що ламають зворотну сумісність"},{"migration81.other-changes.md":"Інші зміни »"},{"index.md":"PHP Manual"},{"migration81.md":"Міграція з PHP 8.0.x на PHP 8.1.x"}]}},"__N_SSG":true}