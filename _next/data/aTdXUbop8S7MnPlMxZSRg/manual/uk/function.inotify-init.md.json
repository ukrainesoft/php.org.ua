{"pageProps":{"page":{"slug":"function.inotify-init.md","content":"# inotify\\_init\n\n(PECL inotify >= 0.1.2)\n\ninotify\\_init - Ініціалізує екземпляр inotify\n\n### Опис\n\n```methodsynopsis\ninotify_init(): resource\n```\n\nІніціалізує екземпляр inotify для використання в [inotify\\_add\\_watch()](function.inotify-add-watch.md)\n\n### Список параметрів\n\nЦя функція не має параметрів.\n\n### Значення, що повертаються\n\nПотоковий ресурс або **`false`**\n\n### Приклади\n\n**Приклад #1 Приклад використання inotify**\n\n```php\n<?php\n// Создаём экземпляр inotify\n$fd = inotify_init();\n\n// Отслеживаем __FILE__ на предмет изменения метаданных (наПриклад mtime)\n$watch_descriptor = inotify_add_watch($fd, __FILE__, IN_ATTRIB);\n\n// создаём событие\ntouch(__FILE__);\n\n// Читаем события\n$events = inotify_read($fd);\nprint_r($events);\n\n// Следующие функции позволяют использовать функции inotify без блокировки на inotify_read():\n\n// - Используем stream_select() для $fd:\n$read = array($fd);\n$write = null;\n$except = null;\nstream_select($read,$write,$except,0);\n\n// - Используем stream_set_blocking() для $fd\nstream_set_blocking($fd, 0);\ninotify_read($fd); // Не блокируем и возвращаем false если нет ожидающих событий\n\n// - Используем inotify_queue_len() для проверки, что очередь событий не пуста\n$queue_len = inotify_queue_len($fd); // Если > 0, inotify_read() то не блокируем\n\n// Заканчиваем наблюдать за __FILE__\ninotify_rm_watch($fd, $watch_descriptor);\n\n// Закрываем экземпляр inotify\n// Все не закрытые наблюдатели будут закрыты\nfclose($fd);\n\n?>\n```\n\nВисновок наведеного прикладу буде схожим на:\n\n```\narray(\n  array(\n    'wd' => 1,     // Equals $watch_descriptor\n    'mask' => 4,   // IN_ATTRIB bit is set\n    'cookie' => 0, // unique id to connect related events (e.g.\n                   // IN_MOVE_FROM and IN_MOVE_TO events)\n    'name' => '',  // the name of a file (e.g. if we monitored changes\n                   // in a directory)\n  ),\n);\n```\n\n### Дивіться також\n\n-   [inotify\\_add\\_watch()](function.inotify-add-watch.md) \\- Додати спостерігача для екземпляра inotify\n-   [inotify\\_rm\\_watch()](function.inotify-rm-watch.md) \\- Видалити спостерігача\n-   [inotify\\_queue\\_len()](function.inotify-queue-len.md) \\- Повертає кількість очікуваних подій у черзі\n-   [inotify\\_read()](function.inotify-read.md) \\- Читає очікуючі повідомлення з черги\n-   [fclose()](function.fclose.md) \\- Закриває відкритий дескриптор файлу\n","title":"inotify\\_init","contentType":2,"navigation":[{"function.inotify-add-watch.md":"« inotify\\_add\\_watch"},{"function.inotify-queue-len.md":"inotify\\_queue\\_len »"},{"index.md":"PHP Manual"},{"ref.inotify.md":"Функції Inotify"}]}},"__N_SSG":true}