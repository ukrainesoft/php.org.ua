- [«PDO_OCI DSN](ref.pdo-oci.connection.md)
- [PDO_ODBC DSN »](ref.pdo-odbc.connection.md)

- [PHP Manual](index.md)
- [Драйвери PDO](pdo.drivers.md)
- Функції ODBC та DB2 (PDO_ODBC)

# Функції ODBC та DB2 (PDO_ODBC)

## Вступ

PDO_ODBC – драйвер, що реалізує [інтерфейс PHP Data Objects
(PDO)](intro.pdo.md) для доступу до баз даних через драйвер ODBC або
через бібліотеку IBM DB2 Call Level Interface (DB2 CLI). У поточний
момент PDO_ODBC підтримує різні "відтінки" драйверів баз даних:

ibm-db2
Підтримка доступу до серверів IBM DB2 Universal Database, Cloudscape та
Apache Derby через вільний клієнт DB2 Express-C.

unixODBC
Підтримує доступ до баз даних через менеджер драйверів unixODBC та
власні ODBC драйвери бази даних.

generic
Надає опцію компіляції менеджерів драйверів ODBC, які не
підтримуються PDO_ODBC безпосередньо.

У Windows `php_pdo_odbc.dll` має бути включений як модуль у `php.ini`.
Він збирається за участю Windows ODBC Driver Manager, тому PHP може
підключатися до будь-якої бази даних, визначеної як System DSN.

## Установка

**PDO_ODBC на UNIX системах**

1. Модуль PDO_ODBC включено до вихідного коду PHP. Ви можете скомпілювати
модуль як статичний або розділяється, використовуючи наступний
синтаксис **configure**.

ibm_db2
./configure --with-pdo-odbcu003dibm-db2,/opt/IBM/db2/V8.1/

Для складання PDO_ODBC для ibm-db2 потрібно попередньо
інсталювати файли заголовків пакета розробника програм DB2.
Заголовкові файли пакета розробника програм DB2 можна
встановити як за допомогою інсталяційного пакета сервера DB2, так і
складі окремого клієнта "DB2 Application Development Client",
доступного для завантаження з [» сайту
підтримки](https://www.ibm.com/developerworks/downloads/im/db2express/index.md)
IBM developerWorks.

Якщо ви не вкажете директорію установки бібліотек та заголовків
файлів DB2, **configure** буде шукати їх у `/home/db2inst1/sqllib`.

unixODBC
./configure --with-pdo-odbcu003dunixODBC,/usr/local

Якщо ви не вкажете директорію установки бібліотек та заголовків
файлів unixODBC, **configure** буде шукати їх у `/usr/local`.

generic
./configure --with-pdo-odbcu003dgeneric,/usr/local,libname,ldflags,cflags

## Зумовлені константи

Наведені нижче константи визначені даним драйвером і будуть
доступні лише у випадку, якщо PHP був зібраний за допомогою цього модуля,
або цей модуль був динамічно завантажений під час виконання.
До того ж, ці залежні від драйвера константи мають бути використані
тільки разом із цим драйвером. Використання атрибутів, специфічних
для деякого драйвера з іншим драйвером може спричинити несподіване
поведінка. Якщо ваш код виконується з кількома драйверами, можна
використовувати функцію [PDO::getAttribute()](pdo.getattribute.md) для
отримання атрибута **`PDO::ATTR_DRIVER_NAME`** для перевірки драйвера.

**`PDO::ODBC_ATTR_USE_CURSOR_LIBRARY`** (int)
Цей параметр визначає, чи використовується бібліотека курсорів ODBC.
Бібліотека курсорів ODBC підтримує деякі додаткові
особливості ODBC (наприклад блокові курсори, що прокручуються), які
можуть не реалізовуватися драйвером. Підтримуються такі значення:

- **`PDO::ODBC_SQL_USE_IF_NEEDED`** (за замовчуванням): використовувати
бібліотеку курсорів ODBC, якщо необхідно.

- **`PDO::ODBC_SQL_USE_DRIVER`**: ніколи не використовувати бібліотеку
курсорів ODBC

- **`PDO::ODBC_SQL_USE_ODBC`**: завжди використовувати бібліотеку
курсорів ODBC

**`PDO::ODBC_ATTR_ASSUME_UTF8`** (bool)
Тільки Windows. Якщо **`true`**, то дані у кодуванні UTF-16
(`CHAR`, `VARCHAR` та `LONGVARCHAR`) будуть сконвертовані в UTF-8 при
читання або запису. Якщо **`false`** (за замовчуванням), перетворення
Кодування символів може бути виконане драйвером.

## Налаштування під час виконання

Поведінка цих функцій залежить від установок `php.ini`.

| Ім'я За замовчуванням | Місце зміни | Список змін |
|------------------------------------------------- ---------------------------------|--------------|- ----------------|--------------------------------- ------------------------------------|
| [pdo_odbc.connection_pooling](ref.pdo-odbc.md#ini.pdo-odbc.connection-pooling) | "Strict" | PHP_INI_ALL | |
| [pdo_odbc.db2_instance_name](ref.pdo-odbc.md#ini.pdo-odbc.db2-instance-name) | NULL | PHP_INI_SYSTEM | Ця можливість застаріла і буде обов'язково віддалена в майбутньому. |

**Конфігураційні опції PDO_ODBC**

Для детального опису констант PHP_INI\_\*, зверніться до розділу [Де
можуть бути встановлені параметри
конфігурації] (configuration.changes.modes.md).

Коротке пояснення конфігураційних директив.

`pdo_odbc.connection_pooling` string
Чи потрібно поєднувати з'єднання ODBC. Може бути ``strict'', ``relaxed''
або ``off'` (аналогічно `````). Параметр визначає як суворо менеджер
з'єднань повинен порівнювати параметри з'єднань для вибору, створювати
нове з'єднання чи повертати вже існуюче. За замовчуванням
рекомендується використовувати **`strict`**, що означає, що збережене
з'єднання повертатиметься лише, якщо всі параметри точно
збігаються. **`relaxed`** призведе до того, що закешовані з'єднання
буде повернено, якщо параметри схожі. Це призведе до більш активного
використання кеша, але може призвести до витоку інформації про з'єднання
(наприклад) між віртуальними хостами.

Це налаштування можна змінити тільки в `php.ini` та впливає на все
процеси; всі модулі, завантажені в процес і використовують ті ж самі
бібліотеки ODBC залежатимуть від цього налаштування, включаючи
[Уніфікований модуль ODBC](ref.uodbc.md).

**Увага**
Значення **`relaxed`** не повинно використовуватись на загальному хостингу в
цілях безпеки.

**Підказка**
Якщо у вас немає дуже серйозного приводу використати значення, відмінне
від **`strict`** - не змінюйте його.

`pdo_odbc.db2_instance_name` string
Якщо ви скомпілювали PDO_ODBC з використанням `db2`, ця опція
встановить значення змінної оточення DB2INSTANCE у системах Linux та
UNIX, що дорівнює вибраному імені екземпляра DB2. Це дозволяє PDO_ODBC
визначити розташування бібліотек DB2 і зробити з'єднання з
каталог бази даних DB2.

Це налаштування можна змінити тільки в `php.ini`, і воно впливає на
всі процеси; всі модулі, завантажені в процес і використовують ті ж самі
бібліотеки ODBC залежатимуть від цього налаштування, включаючи
[Уніфікований модуль ODBC](ref.uodbc.md).

Ця опція не працює у Windows.

## Зміст

- [PDO_ODBC DSN](ref.pdo-odbc.connection.md) — З'єднання з базами
даних ODBC або DB2
