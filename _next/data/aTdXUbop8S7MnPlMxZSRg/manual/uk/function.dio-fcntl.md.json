{"pageProps":{"page":{"slug":"function.dio-fcntl.md","content":"# dio\\_fcntl\n\n(PHP 4 >= 4.2.0, PHP 5 < 5.1.0)\n\ndio\\_fcntl — Викликає функцію бібліотеки C fcntl для файлового дескриптора\n\n### Опис\n\n```methodsynopsis\ndio_fcntl(resource $fd, int $cmd, mixed $args = ?): mixed\n```\n\nФункция**dio\\_fcntl()** викликає вказану в `cmd`команду для`fd`. Якщо команда вимагає додаткових аргументів, вони задаються в `args`\n\n### Список параметрів\n\n`fd`\n\nФайловий дескриптор, отриманий з [dio\\_open()](function.dio-open.md)\n\n`cmd`\n\nМожливо однією з наступних операцій:\n\n-   \\*\\*`F_SETLK`\\*\\*- Встановлення або скидання блокування. Якщо блокування будь-ким утримується,\\*\\*dio\\_fcntl()\\*\\*поверне -1.\n    \n-   **`F_SETLKW`**\\- схожа на**`F_SETLK`**, але якщо блокування будь-ким утримується,\\*\\*dio\\_fcntl()\\*\\*чекатиме її звільнення.\n    \n-   **`F_GETLK`** **dio\\_fcntl()** поверне асоціативний масив (як описано нижче) якщо хтось заважає отримати блокування. Якщо ніхто не заважає, то ключ \"type\" міститиме **`F_UNLCK`**\n    \n-   \\*\\*`F_DUPFD`\\*\\*- шукає найменший доступний файловий дескриптор, більший чи рівний`args` і повертає його.\n    \n-   **`F_SETFL`**\\- встановлює файловий дескриптор прапори, задані в`args`, такі як**`O_APPEND`** **`O_NONBLOCK`** або **`O_ASYNC`**. Для використання\\*\\*`O_ASYNC`\\*\\*вам необхідно скористатися модулем[PCNTL](ref.pcntl.md)\n    \n\n`args`\n\n`args` - це асоціативний масив, якщо `cmd`установлен в\\*\\*`F_SETLK`** або **`F_SETLLW`\\*\\*, з такими ключами:\n\n-   `start`\\- зміщення початку блокування\n    \n-   `length`\\- Розмір заблокованої зони. 0 означає кінець файлу\n    \n-   `whence`\\- Залежить від l\\_start: можливо\\*\\*`SEEK_SET`\\*\\* **`SEEK_END`** і **`SEEK_CUR`**\n    \n-   `type`\\- тип блокування: можливо\\*\\*`F_RDLCK`**(читання),**`F_WRLCK`**(запис) або**`F_UNLCK`\\*\\*(Блокування немає)\n    \n\n### Значення, що повертаються\n\nПовертає результат виклику C-функції.\n\n### Приклади\n\n**Приклад #1 Встановлення та зняття блокування**\n\n```php\n<?php\n\n$fd = dio_open('/dev/ttyS0', O_RDWR);\n\nif (dio_fcntl($fd, F_SETLK, Array(\"type\"=>F_WRLCK)) == -1) {\n   // дескриптор файла заблокирован\n   echo \"Нельзя снять блокировку, она удерживается другим процессом.\";\n} else {\n   echo \"Блокировка успешно установлена/снята\";\n}\n\ndio_close($fd);\n?>\n```\n\n### Примітки\n\n> **Зауваження**: Для Windows-платформ ця функція не реалізована.\n","title":"dio\\_fcntl","contentType":2,"navigation":[{"function.dio-close.md":"« dio\\_close"},{"function.dio-open.md":"dio\\_open »"},{"index.md":"PHP Manual"},{"ref.dio.md":"Функції прямого введення/виводу"}]}},"__N_SSG":true}