{"pageProps":{"page":{"slug":"function.curl-share-setopt.md","content":"# curl\\_share\\_setopt\n\n(PHP 5 >= 5.5.0, PHP 7, PHP 8)\n\ncurl\\_share\\_setopt — Встановити опції роздільного обробника cURL\n\n### Опис\n\n```methodsynopsis\ncurl_share_setopt(CurlShareHandle $share_handle, int $option, mixed $value): bool\n```\n\nВстановлює опції оброблюваного cURL.\n\n### Список параметрів\n\n`share_handle`\n\nОбробник, що розділяється cURL, повертається [curl\\_share\\_init()](function.curl-share-init.md)\n\n`option`\n\n| Опция | Опис |\n| --- | --- |\n| **`CURLSHOPT_SHARE`** | Задає тип даних, які потрібно розділяти. |\n| **`CURLSHOPT_UNSHARE`** | Вказує тип даних, які більше не треба розділяти. |\n\n`value`\n\n| Значение | Опис |\n| --- | --- |\n| **`CURL_LOCK_DATA_COOKIE`** | Поділяє дані cookie. |\n| **`CURL_LOCK_DATA_DNS`** | Розділяє кеш DNS. Зверніть увагу, що якщо ви використовуєте множинний обробник cURL, всі додані обробники за умовчанням будуть розділяти DNS-кеш. |\n| **`CURL_LOCK_DATA_SSL_SESSION`** | Розділяє ідентифікатори сесії SSL, скорочуючи час, що витрачається на підтвердження (handshake) SSL при повторному з'єднанні з тим самим сервером. Зверніть увагу, що ідентифікатори сесії SSL за замовчуванням перевикористовуватимуться тим самим обробником. |\n\n### Значення, що повертаються\n\nПовертає **`true`** у разі успішного виконання або \\*\\*`false`\\*\\*в случае возникновения ошибки.\n\n### список змін\n\n| Версия | Опис |\n| --- | --- |\n| 8.0.0 | `share_handle` expects a [CurlShareHandle](class.curlsharehandle.md) instance now; previously, a resource was expected. |\n\n### Приклади\n\n**Приклад #1 Приклад використання** curl\\_share\\_setopt()\\*\\*\\*\\*\n\nУ цьому прикладі ми створюємо роздільний обробник cURL, додаємо в нього два звичайні обробники і запускаємо їх. Вони будуть використовувати одні й ті ж куки.\n\n```php\n<?php\n// Создаём разделяемый обработчик и настраиваем его на обмен куками\n$sh = curl_share_init();\ncurl_share_setopt($sh, CURLSHOPT_SHARE, CURL_LOCK_DATA_COOKIE);\n\n// Инициализируем первый обработчик cURL и связываем его с разделяемым\n$ch1 = curl_init(\"http://example.com/\");\ncurl_setopt($ch1, CURLOPT_SHARE, $sh);\n\n// Запускаем первый запрос\ncurl_exec($ch1);\n\n// Инициализируем второй обработчик cURL и связываем его с разделяемым\n$ch2 = curl_init(\"http://php.net/\");\ncurl_setopt($ch2, CURLOPT_SHARE, $sh);\n\n// Запускаем второй обработчик.\n//  Ему будут доступны все куки от первого обработчика $ch1\ncurl_exec($ch2);\n\n// Закрываем разделяемый обработчик\ncurl_share_close($sh);\n\n// Закрываем оба обычных обработчика\ncurl_close($ch1);\ncurl_close($ch2);\n?>\n```\n","title":"curl\\_share\\_setopt","contentType":2,"navigation":[{"function.curl-share-init.md":"« curl\\_share\\_init"},{"function.curl-share-strerror.md":"curl\\_share\\_strerror »"},{"index.md":"PHP Manual"},{"ref.curl.md":"Опції cURL"}]}},"__N_SSG":true}