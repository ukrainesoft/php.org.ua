- [«ignore_user_abort](function.ignore-user-abort.md)
- [php_strip_whitespace »](function.php-strip-whitespace.md)

- [PHP Manual](index.md)
- [Різні функції](ref.misc.md)
- Упакувати дані у бінарний рядок

#pack

(PHP 4, PHP 5, PHP 7, PHP 8)

pack — Упакувати дані в бінарний рядок

### Опис

**pack**(string `$format`,
[mixed](language.types.declarations.md#language.types.declarations.mixed)
`...$values`): string

Упаковує задані аргументи у бінарний рядок відповідно до
форматом у параметрі `format`.

Ідея цієї функції була запозичена з Perl і всі коди форматування
працюють так само. Однак, є деякі відсутні коди
форматування, такі як код формату Perl "u".

Необхідно мати на увазі, що відмінність між знаковими та беззнаковими
значеннями впливає лише на функцію [unpack()](function.unpack.md),
тоді як функція **pack()** дає однаковий результат для знакових та
беззнакових кодів формату.

### Список параметрів

`format`
Параметр `format` задається у вигляді рядка і складається з кодів формату та
опціонального аргументу повторення. Аргумент може бути цілим,
або `*` для повторення остаточно введених даних. Для a, A, h, H число
повторень визначає те, скільки символів взято від одного аргументу
даних для @ - це абсолютна позиція для розміщення наступних даних,
для решти число повторень визначає як багато аргументів
даних було оброблено та упаковано у результуючий бінарний рядок.

Формати, що працюють на даний момент:

| Код | Опис |
|-----|----------------------------------------------- --------------------|
| a | Рядок (string) з NUL-заповненням |
| A | Рядок (string) зі SPACE-заповненням |
| h | Hex-рядок (Hex string), з нижнього розряду
| H | Hex-рядок (Hex string), з верхнього розряду
| з | знаковий символ (char)
| C | беззнаковий символ (char)
| s | знаковий short (завжди 16 біт, машинний байтовий порядок)
| S | беззнаковий short (завжди 16 біт, машинний байтовий порядок)
| n | беззнаковий short (завжди 16 біт, порядок big endian) |
| v | беззнаковий short (завжди 16 біт, порядок little endian)
| i | знаковий integer (машинно-залежний розмір та порядок) |
| I | беззнаковий integer (машинно-залежний розмір та порядок) |
| l | знаковий long (завжди 32 біти, машинний порядок) |
| L | беззнаковий long (завжди 32 біт, машинний порядок)
| N | беззнаковий long (завжди 32 біт, порядок big endian) |
| V | беззнаковий long (завжди 32 біт, порядок little endian)
| q | signed long long (завжди 64 bit, машинний порядок)
| Q | беззнаковий long long (завжди 64 bit, машинний порядок)
| J | беззнаковий long long (завжди 64 bit, порядок big endian) |
| P | беззнаковий long long (завжди 64 bit, порядок little endian)
| f | float (машинно-залежні розмір та уявлення) |
| g | float (машинно-залежний розмір, порядок байт little endian) |
| G | float (машинно-залежний розмір, порядок байт big endian) |
| d | double (машинно-залежні розмір та уявлення) |
| e | double (машинно-залежний розмір, порядок байт little endian) |
| E | double (машинно-залежний розмір, порядок байт big endian) |
| x | байт NUL
| X | Резервування одного байта
| Z | Рядок (string) з NUL-заповненням |
| @ | NUL-заповнення до абсолютної позиції

**Символи форматів функції **pack()****

`values`

### Значення, що повертаються

Повертає бінарний рядок, який містить дані або **`false`** у разі
виникнення помилки.

### Список змін

| Версія | Опис |
|--------------|---------------------------------- -------------------------------------------------- ------------------------|
| 8.0.0 | Функція більше не повертає **`false`** у разі виникнення помилки. |
| 7.2.0 | Типи float і double підтримують як зворотний, і прямий порядок передачі байтів. |
| 7.0.15,7.1.1 | Додані коди "e", "E", "g" та "G" для підтримки примусової вказівки порядку байт для float та double. |

### Приклади

**Приклад #1 Приклад використання **pack()****

`<?php$binarydatau003du003dpack("nvc*", 0x1234, 0x5678, 65, 66);?> `

Отриманий бінарний рядок довжиною 6 байт міститиме
послідовність байтів 0x12, 0x34, 0x78, 0x56, 0x41, 0x42.

### Примітки

**Застереження**

Необхідно відзначити, що PHP зберігає значення типу int як знакові з
машинно-залежним розміром (C тип `long`). Усі числа, передані як
int, але ті, що виходять за межі цього типу, будуть збережені з типом float.
У упаковці цих float як int, вони будуть передані з типом int. Це
може як збігатися, і немає із заданим шаблоном.

Найчастішим є випадок, коли упаковуються беззнакові числа
типу int. У системах, де int має розмір 32 біта, число зазвичай
передається за тим самим шаблоном, якби int був беззнаковим (хоча,
це залежить від певних перетворень із знакове на беззнакове,
згідно зі стандартом С). У системах, де тип int має розмір 64 біта,
тип float не має мантиси, достатньої за розміром для зберігання
значення без втрати точності. Якщо ці системи також мають простий
64-бітний С тип `int` (більшість UNIX систем не мають), то
єдиним шляхом використання формату `I` у верхньому розряді
є створення негативних int значень з тим самим уявленням як
та у певному беззнаковому значенні.

### Дивіться також

- [unpack()](function.unpack.md) - Розпакувати дані з бінарної
рядки
