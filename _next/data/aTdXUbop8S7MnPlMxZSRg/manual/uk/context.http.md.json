{"pageProps":{"page":{"slug":"context.http.md","content":"# Опції контексту HTTP\n\nОпції контексту HTTP — Список опцій контексту HTTP\n\n### Опис\n\nОпції контексту для транспортних протоколів `http://`и`https://`\n\n### Опції\n\n`method`string\n\n**`GET`** **`POST`** або будь-який інший метод HTTP, який підтримує віддалений сервер.\n\nПо умолчанию\\*\\*`GET`\\*\\*\n\n`header` array або string\n\nДодаткові заголовки для надсилання разом із запитом. Значення в цій опції перевизначатимуть інші значення (такі як `User-agent:` `Host:`и`Authentication:`), даже при следующих переадресациях`Location:`Таким образом, не рекомендуется устанавливать заголовок`Host:`, якщо увімкнено параметр `follow_location`\n\n`user_agent`string\n\nЗначення для надсилання разом із заголовком `User-Agent:`. Це значення буде використовуватися, якщо заголовок user-agent *не* був вказаний у опції контексту `header` вище.\n\nЗа замовчуванням використовується значення директиви [user\\_agent](filesystem.configuration.md#ini.user-agent)из файла php.ini.\n\n`content`string\n\nДодаткові дані для надсилання після заголовків. Зазвичай використовується із запитами POST та PUT.\n\n`proxy`string\n\nURI, що вказує на адресу проксі-сервера. (Наприклад, `tcp://proxy.example.com:5100`\n\n`request_fulluri`bool\n\nКогда установлено в\\*\\*`true`\\*\\*, весь URI буде використаний для формування запиту. (Наприклад, `GET http://www.example.com/path/to/file.md HTTP/1.0`). Хоча це нестандартний формат запиту, деякі проксі сервери вимагають його.\n\nПо умолчанию\\*\\*`false`\\*\\*\n\n`follow_location`int\n\nНаслідувати переадресації заголовка `Location`Для отключения установите в значение\n\nПо умолчанию\n\n`max_redirects`int\n\nМаксимальна кількість переадресацій, якою можна слідувати. Значення або менше означає, що жодних переадресацій не буде зроблено.\n\nПо умолчанию`20`\n\n`protocol_version`float\n\nВерсія протоколу HTTP.\n\nПо умолчанию`1.1`, починаючи з PHP 8.0.0; до цієї версії значення за промовчанням було `1.0`\n\n`timeout`float\n\nЧас очікування на читання в секундах, вказаний у вигляді числа з плаваючою точкою (float), наприклад, `10.5`\n\nЗа замовчуванням використовується значення директиви [default\\_socket\\_timeout](filesystem.configuration.md#ini.default-socket-timeout)из файла php.ini.\n\n`ignore_errors`bool\n\nВитягти вміст навіть при неуспішних статусах завершення.\n\nПо умолчанию\\*\\*`false`\\*\\*\n\n### Приклади\n\n**Приклад #1 Вийняти сторінку та надіслати дані методом POST**\n\n```php\n<?php\n\n$postdata = http_build_query(\n    array(\n        'var1' => 'некоторое содержимое',\n        'var2' => 'doh'\n    )\n);\n\n$opts = array('http' =>\n    array(\n        'method'  => 'POST',\n        'header'  => 'Content-type: application/x-www-form-urlencoded',\n        'content' => $postdata\n    )\n);\n\n$context = stream_context_create($opts);\n\n$result = file_get_contents('http://example.com/submit.php', false, $context);\n\n?>\n```\n\n**Приклад #2 Ігнорувати переадресації, але витягти заголовки та вміст**\n\n```php\n<?php\n\n$url = \"http://www.example.org/header.php\";\n\n$opts = array('http' =>\n    array(\n        'method' => 'GET',\n        'max_redirects' => '0',\n        'ignore_errors' => '1'\n    )\n);\n\n$context = stream_context_create($opts);\n$stream = fopen($url, 'r', false, $context);\n\n// информация о заголовках, а также\n// метаданные о потоке\nvar_dump(stream_get_meta_data($stream));\n\n// актуальная информация по ссылке $url\nvar_dump(stream_get_contents($stream));\nfclose($stream);\n?>\n```\n\n### Примітки\n\n> **Зауваження** **Опції контексту нижчого потоку в сокеті**  \n> Додаткові опції контексту можуть підтримуватись [нижчим транспортним протоколом](transports.inet.md). Для потоків `http://`, це стосується опцій контексту для транспортного протоколу `tcp://`. Для потоків `https://`, це стосується опцій контексту для транспортного протоколу `ssl://`\n\n> **Зауваження** **Рядок статусу HTTP**  \n> Коли ця обгортка потоку слідує за переадресацією, `wrapper_data`, що повертається функцією [stream\\_get\\_meta\\_data()](function.stream-get-meta-data.md), необов'язково містить рядок статусу HTTP, який насправді відноситься до змісту даних за індексом\n> \n> ```\n> array (\n>   'wrapper_data' =>\n>   array (\n>     0 => 'HTTP/1.0 301 Moved Permanently',\n>     1 => 'Cache-Control: no-cache',\n>     2 => 'Connection: close',\n>     3 => 'Location: http://example.com/foo.jpg',\n>     4 => 'HTTP/1.1 200 OK',\n>     ...\n> ```\n> \n> Перший запит повернув код `301` (постійне перенаправлення), так що обгортка потоку автоматично послідувала цьому перенаправленню, щоб отримати відповідь `200`(индекс = `4`\n\n### Дивіться також\n\n-   [http://](wrappers.http.md)\n-   [Контекстні опції сокету](context.socket.md)\n-   [Опції контексту SSL](context.ssl.md)\n","title":"Опції контексту HTTP","contentType":2,"navigation":[{"context.socket.md":"« Контекстні опції сокету"},{"context.ftp.md":"Параметри контексту FTP »"},{"index.md":"PHP Manual"},{"context.md":"Контекстні опції та параметри"}]}},"__N_SSG":true}