{"pageProps":{"page":{"slug":"zip.examples.md","content":"# Приклади\n\n**Приклад #1 Створення Zip-архіву**\n\n```php\n<?php\n\n$zip = new ZipArchive();\n$filename = \"./test112.zip\";\n\nif ($zip->open($filename, ZipArchive::CREATE)!==TRUE) {\n    exit(\"Невозможно открыть <$filename>\\n\");\n}\n\n$zip->addFromString(\"testfilephp.txt\" . time(), \"#1 Это тестовая строка добавляется в качестве testfilephp.txt.\\n\");\n$zip->addFromString(\"testfilephp2.txt\" . time(), \"#2 Это тестовая строка добавляется в качестве testfilephp2.txt.\\n\");\n$zip->addFile($thisdir . \"/too.php\",\"/testfromfile.php\");\necho \"numfiles: \" . $zip->numFiles . \"\\n\";\necho \"status:\" . $zip->status . \"\\n\";\n$zip->close();\n?>\n```\n\n**Приклад #2 Зібрати та відобразити докладну інформацію про архів**\n\n```php\n<?php\n$za = new ZipArchive();\n\n$za->open('test_with_comment.zip');\nprint_r($za);\nvar_dump($za);\necho \"numFiles: \" . $za->numFiles . \"\\n\";\necho \"status: \" . $za->status  . \"\\n\";\necho \"statusSys: \" . $za->statusSys . \"\\n\";\necho \"filename: \" . $za->filename . \"\\n\";\necho \"comment: \" . $za->comment . \"\\n\";\n\nfor ($i=0; $i<$za->numFiles;$i++) {\n    echo \"index: $i\\n\";\n    print_r($za->statIndex($i));\n}\necho \"numFile:\" . $za->numFiles . \"\\n\";\n?>\n```\n\n**Приклад #3 Використання обгортки потоку Zip, читання метаінформації OpenOffice**\n\n```php\n<?php\n$reader = new XMLReader();\n\n$reader->open('zip://' . dirname(__FILE__) . '/test.odt#meta.xml');\n$odt_meta = array();\nwhile ($reader->read()) {\n    if ($reader->nodeType == XMLREADER::ELEMENT) {\n        $elm = $reader->name;\n    } else {\n        if ($reader->nodeType == XMLREADER::END_ELEMENT && $reader->name == 'office:meta') {\n            break;\n        }\n        if (!trim($reader->value)) {\n            continue;\n        }\n        $odt_meta[$elm] = $reader->value;\n    }\n}\nprint_r($odt_meta);\n?>\n```\n\nЦей приклад використовує стару версію API (PHP 4), він відкриває ZIP-архів, читає кожен файл у архіві та виводить його вміст. Архів test2.zip, використаний у цьому прикладі, є одним із тестових архівів вихідного дистрибутива ZZIPlib.\n\n**Приклад #4 Приклад використання Zip**\n\n```php\n<?php\n\n$zip = zip_open(\"/tmp/test2.zip\");\n\nif ($zip) {\n    while ($zip_entry = zip_read($zip)) {\n        echo \"Название:         \" . zip_entry_name($zip_entry) . \"\\n\";\n        echo \"Исходный размер:  \" . zip_entry_filesize($zip_entry) . \"\\n\";\n        echo \"Сжатый размер:    \" . zip_entry_compressedsize($zip_entry) . \"\\n\";\n        echo \"Метод сжатия:     \" . zip_entry_compressionmethod($zip_entry) . \"\\n\";\n\n        if (zip_entry_open($zip, $zip_entry, \"r\")) {\n            echo \"Содержимое файла:\\n\";\n            $buf = zip_entry_read($zip_entry, zip_entry_filesize($zip_entry));\n            echo \"$buf\\n\";\n\n            zip_entry_close($zip_entry);\n        }\n        echo \"\\n\";\n\n    }\n\n    zip_close($zip);\n\n}\n?>\n```\n","title":"Приклади","contentType":2,"navigation":[{"zip.constants.md":"« Зумовлені константи"},{"class.ziparchive.md":"ZipArchive »"},{"index.md":"PHP Manual"},{"book.zip.md":"Zip"}]}},"__N_SSG":true}