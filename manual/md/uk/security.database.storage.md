- [«З'єднання з базою даних](security.database.connection.md)
- [SQL-ін'єкції »](security.database.sql-injection.md)

- [PHP Manual](index.md)
- [Безпека баз даних](security.database.md)
- шифрування сховища бази даних

## Шифрування сховища бази даних

Ви можете встановити з'єднання через SSL для шифрування зв'язку
клієнт/сервер для підвищення безпеки, або ви можете використовувати ssh
для шифрування мережного з'єднання між клієнтами та сервером бази
даних. Якщо будь-який з них використовується, то моніторинг вашого трафіку та
отримання інформації про вашу базу даних буде важким для
потенційного зловмисника

Якщо зломщик отримав безпосередній доступ до БД (в обхід
веб-сервера), він може витягти цікаві дані або порушити їх
цілісність, якщо інформація не захищена лише на рівні самої БД. Шифрування
даних - хороший спосіб запобігти такій ситуації, але лише
незначна кількість БД надають таку можливість.

Найпростіше вирішення цієї проблеми – встановити спочатку звичайний
програмний пакет для шифрування даних, а потім використовувати його в
ваших PHP-скриптах. PHP може вам допомогти з цим завданням за допомогою таких
модулів як [OpenSSL](book.openssl.md) та [Sodium](book.sodium.md),
реалізують досить багато алгоритмів шифрування. При такому
підході скрипт спочатку шифрує збережені дані, а потім дешифрує їх
за запитом. Нижче наведено приклади того, як працює шифрування даних
у PHP-скриптах.

### Хешування

У разі роботи із прихованими службовими даними, якщо не потрібно їх
нешифроване уявлення (тобто його не потрібно показувати), те, як
слідство, можна використовувати хешування. Добре відомий приклад
хешування - зберігання криптографічного хешу від пароля в БД, замість
збереження оригінального значення.

Функція [password](ref.password.md) дозволяє зручно хешувати
конфіденційні дані та працювати з цими хешами.

[password_hash()](function.password-hash.md) дозволяє хешувати
заданий рядок найсильнішим з доступних алгоритмом і
[password_verify()](function.password-verify.md) перевіряє, що
заданий пароль збігається зі збереженим у БД хешем.

**Приклад #1 Хешування полів із паролями**

` <?php// Сохраняем хеш пароля$query  u003d sprintf("INSERT INTO users(name,pwd) VALUES('%s','%s');",            pg_escape_string($username),            password_hash($password, PASSWORD_DEFAULT ));$result u003d pg_query($connection, $query);// перевірка введеного користувачем пароля на коректність$query u003d sprintf("SELECT pwd FROM users WHERE nameu003d'    | $row u003d pg_fetch_assoc(pg_query($connection, $query));if ($row && password_verify($password, $row['pwd'])) {    echo 'Ласкаво, htmlspecialchars($username) . '!';} else {    echo 'Помилка авторизації, ' . htmlspecialchars($username) . '.';}?> `
