{"pageProps":{"page":{"slug":"pgsql.examples-queries.md","content":"## Базове використання\n\nЦі приклади містять функції користувача, аналогічні застарілим функціям MySQL.\n\n**Приклад #1 Приклад використання функцій користувача PostgreSQL**\n\n```php\n<?php\n// Эта функция необходима, так как соединение PostgreSQL связывает базу данных.\nfunction pg_list_dbs($db)\n{\n    assert(is_resource($db));\n    $query = '\nSELECT\n d.datname as \"Name\",\n u.usename as \"Owner\",\n pg_encoding_to_char(d.encoding) as \"Encoding\"\nFROM\n pg_database d LEFT JOIN pg_user u ON d.datdba = u.usesysid\nORDER BY 1;\n';\n    return pg_query($db, $query);\n}\n\n// Список таблиц.\nfunction pg_list_tables($db)\n{\n    assert(is_resource($db));\n    $query = \"\nSELECT\n c.relname as \\\"Name\\\",\n CASE c.relkind WHEN 'r' THEN 'table' WHEN 'v' THEN 'view' WHEN 'i' THEN 'index' WHEN 'S' THEN 'sequence' WHEN 's' THEN 'special' END as \\\"Type\\\",\n  u.usename as \\\"Owner\\\"\nFROM\n pg_class c LEFT JOIN pg_user u ON c.relowner = u.usesysid\nWHERE\n c.relkind IN ('r','v','S','')\n AND c.relname !~ '^pg_'\nORDER BY 1;\n\";\n    return pg_query($db, $query);\n}\n\n// Смотрите также pg_meta_data(). Возвращает определение поля в виде массива.\nfunction pg_list_fields($db, $table)\n{\n    assert(is_resource($db));\n    $query = \"\nSELECT\n a.attname,\n format_type(a.atttypid, a.atttypmod),\n a.attnotnull,\n a.atthasdef,\n a.attnum\nFROM\n pg_class c,\n pg_attribute a\nWHERE\n c.relname = '\".$table.\"'\n AND a.attnum > 0 AND a.attrelid = c.oid\nORDER BY a.attnum;\n\";\n    return pg_query($db, $query);\n}\n?>\n```\n","title":"Базове використання","contentType":2,"navigation":[{"pgsql.examples-basic.md":"« Базове використання"},{"ref.pgsql.md":"Функції PostgreSQL »"},{"index.md":"PHP Manual"},{"pgsql.examples.md":"Приклади"}]}},"__N_SSG":true}