- [«mb_scrub](function.mb-scrub.md)
- [mb_split »] (function.mb-split.md)

- [PHP Manual](index.md)
- [Функції для роботи з багатобайтовими рядками](ref.mbstring.md)
- Надсилання закодованого повідомлення

#mb_send_mail

(PHP 4 \>u003d 4.0.6, PHP 5, PHP 7, PHP 8)

mb_send_mail — Надіслати закодоване повідомлення

### Опис

**mb_send_mail**(
string `$to`,
string `$subject`,
string `$message`,
array\|string `$additional_headers` u003d \[\],
?string `$additional_params` u003d **`null`**
): bool

Надсилає повідомлення електронної пошти. Заголовки та повідомлення
перетворюються та кодуються відповідно до налаштування
[mb_language()](function.mb-language.md). Це обгортка для функції
[mail()](function.mail.md), тому варто ознайомитися і з описом
функції [mail()](function.mail.md).

### Список параметрів

`to`
Електронні адреси отримувачів. Декілька адрес в аргументі `to`
перераховуються через кому. Значення цього аргументу не кодується
автоматично.

`subject`
Тема листа.

`message`
Текст листа.

`additional_headers` (необов'язковий)
Рядок або масив, що вставляються в кінець заголовка листа.

Зазвичай використовується додавання додаткових заголовків (From, Cc,
та Bcc). Декілька додаткових заголовків повинні розділятися за допомогою
CRLF (
). Перевірте цей параметр, щоб не допустити ін'єкції
небажаних заголовків.

Якщо передано масив, його ключі будуть іменами заголовків, а значення
відповідними значеннями заголовка.

> **Примітка**:
>
> При надсиланні листа, лист * зобов'язаний * містити заголовок `From`. Його
> можна задати за допомогою параметра `additional_headers` або через
> опцію в php.ini.
>
> Якщо цього не зробити, це призведе до повідомлення про помилку, приблизно
> такого змісту:
> `Warning: mail(): "sendmail_from" немає в php.ini або custom "From:" header missing`.
> Заголовок `From` також встановлює і заголовок `Return-Path` в
> Windows.

> **Примітка**:
>
> Якщо лист не діставався, спробуйте використати тільки LF (
).
> Деякі Unix поштові агенти (насамперед
> [»qmail](http://cr.yp.to/qmail.md)) замінюють LF на CRLF
> автоматично (що призводить до дублювання CR під час використання CRLF).
> Це єдине рішення, оскільки це поведінка відповідає
> [» RFC 2822](http://www.faqs.org/rfcs/rfc2822).

`additional_params`
Значенням additional_params є параметр командного рядка MTA. Він
корисний для завдання коректного заголовка Return-Path під час використання
функції sendmail.

Цей параметр екранується функцією
[escapeshellcmd()](function.escapeshellcmd.md) автоматично, щоб
запобігти запуску інших команд.
[escapeshellcmd()](function.escapeshellcmd.md) запобігає запуску
команд, але допускає додавання додаткових аргументів, тому для
забезпечення безпеки потрібно перевіряти цю опцію.

Оскільки [escapeshellcmd()](function.escapeshellcmd.md) застосовується
автоматично, то не можна використовувати деякі символи, допустимі в
email-адресах. Неможливо використовувати функцію [mail()](function.mail.md)
для програм, які потребують використання таких символів.

Користувач, під яким запущений веб-сервер, має бути доданим до
довірені користувачі в конфігурації sendmail, щоб запобігти
додавання заголовка X-Warning до повідомлення, якщо відправник листа
заданий за допомогою цього параметра (-f). Для користувачів sendmail це
файл `/etc/mail/trusted-users`.

### Значення, що повертаються

Повертає **`true`** у разі успішного виконання або **`false`** у
у разі виникнення помилки.

### Список змін

| 8.0.0 | Тепер параметр additional_params може приймати значення null. |
|--------|---------------------------------------- ----------------------------------|
| Версія | Опис |
| 7.2.0 | Тепер параметр "additional_headers" можна передавати масив. |

### Дивіться також

- [mail()](function.mail.md) - Надсилає електронну пошту
- [mb_encode_mimeheader()](function.mb-encode-mimeheader.md) -
Кодує рядок для MIME-заголовка
- [mb_language()](function.mb-language.md) - Встановлює/отримує
поточна мова
