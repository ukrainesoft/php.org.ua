{"pageProps":{"page":{"slug":"pdo.rollback.md","content":"# PDO::rollBack\n\n(PHP 5 >= 5.1.0, PHP 7, PHP 8, PECL pdo >= 0.1.0)\n\nPDO::rollBack - Відкат транзакції\n\n### Опис\n\n```methodsynopsis\npublic PDO::rollBack(): bool\n```\n\nВідкочує зміни в базі даних, зроблені в рамках поточної транзакції, яка була створена методом [PDO::beginTransaction()](pdo.begintransaction.md)\n\nЯкщо СУБД увімкнено режим автофіксації змін, ця функція відновить цей режим після відкату.\n\nДеякі СУБД, включаючи MySQL, автоматично неявно фіксують зміни, коли зустрічаються вирази мови визначення бази даних (DDL), що виконуються у межах транзакції. Ця неявна фіксація унеможливлює відкат інших змін, зроблених у рамках цієї транзакції.\n\n### Список параметрів\n\nЦя функція не має параметрів.\n\n### Значення, що повертаються\n\nПовертає **`true`** у разі успішного виконання або \\*\\*`false`\\*\\*в случае возникновения ошибки.\n\n### Помилки\n\nЯкщо активної транзакції немає, буде викинуто виняток [PDOException](class.pdoexception.md)\n\n> **Зауваження**: Виняток буде викликано, навіть якщо атрибут **`PDO::ATTR_ERRMODE`** не виставлений у **`PDO::ERRMODE_EXCEPTION`**\n\n### Приклади\n\n**Приклад #1 Відкат транзакції**\n\nУ наступному прикладі створюється транзакція та виконуються два запити, які модифікують дані в базі, а потім база повертається до вихідного стану. У MySQL, проте, вираз DROP TABLE автоматично фіксує зміни, тому їх відкат не відбудеться.\n\n```php\n<?php\n/* Начинаем транзакцию, отключение автоматической фиксации */\n$dbh->beginTransaction();\n\n/* Изменяем схему базы данных и данные в таблицах */\n$sth = $dbh->exec(\"DROP TABLE fruit\");\n$sth = $dbh->exec(\"UPDATE dessert\n    SET name = 'hamburger'\");\n\n/* Осознаем свою ошибку и откатываем транзакцию */\n$dbh->rollBack();\n\n/* База данных возвращается в режим автофиксации */\n?>\n```\n\n### Дивіться також\n\n-   [PDO::beginTransaction()](pdo.begintransaction.md) \\- Ініціалізація транзакції\n-   [PDO::commit()](pdo.commit.md) \\- Фіксує транзакцію\n-   [Транзакції та автофіксація змін](pdo.transactions.md)\n","title":"PDO::rollBack","contentType":2,"navigation":[{"pdo.quote.md":"« PDO::quote"},{"pdo.setattribute.md":"PDO::setAttribute »"},{"index.md":"PHP Manual"},{"class.pdo.md":"PDO"}]}},"__N_SSG":true}