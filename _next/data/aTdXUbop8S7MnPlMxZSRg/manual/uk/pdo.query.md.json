{"pageProps":{"page":{"slug":"pdo.query.md","content":"# PDO::query\n\n(PHP 5 >= 5.1.0, PHP 7, PHP 8, PECL pdo >= 0.2.0)\n\nPDO::query — Підготовка та виконання виразу SQL без заповнювачів\n\n### Опис\n\n```methodsynopsis\npublic PDO::query(string $query, ?int $fetchMode = null): PDOStatement|false\n```\n\n```methodsynopsis\npublic PDO::query(string $query, ?int $fetchMode = PDO::FETCH_COLUMN, int $colno): PDOStatement|false\n```\n\n```methodsynopsis\npublic PDO::query(    string $query,    ?int $fetchMode = PDO::FETCH_CLASS,    string $classname,    array $constructorArgs): PDOStatement|false\n```\n\n```methodsynopsis\npublic PDO::query(string $query, ?int $fetchMode = PDO::FETCH_INTO, object $object): PDOStatement|false\n```\n\n**PDO::query()** готує та виконує вираз SQL за один виклик функції, повертаючи вираз як об'єкт [PDOStatement](class.pdostatement.md)\n\nЯкщо запит запускатиметься багаторазово, для покращення продуктивності програми має сенс цей запит один раз підготувати [PDOStatement](class.pdostatement.md)методом[PDO::prepare()](pdo.prepare.md), а потім запускати на виконання методом [PDOStatement::execute()](pdostatement.execute.md) стільки разів, скільки потрібно.\n\nЯкщо після виконання попереднього запиту ви не вибрали всі дані з результуючого набору, наступний дзвінок **PDO::query()** може зазнати невдачі. У таких випадках слід викликати метод [PDOStatement::closeCursor()](pdostatement.closecursor.md), що звільнить ресурси бази даних, зайняті попереднім об'єктом [PDOStatement](class.pdostatement.md). Після цього можна безпечно викликати **PDO::query()**\n\n> **Зауваження** :\n> \n> Якщо `query` містить заповнювачі, вираз має бути підготовлено та виконано окремо з використанням методів [PDO::prepare()](pdo.prepare.md) і [PDOStatement::execute()](pdostatement.execute.md)\n\n### Список параметрів\n\n`query`\n\nSQL-запит для підготовки та виконання.\n\nЯкщо SQL містить заповнювачі, замість цього слід використовувати [PDO::prepare()](pdo.prepare.md) і [PDOStatement::execute()](pdostatement.execute.md). В якості альтернативи, SQL можна підготувати вручну перед викликом **PDO::query()**, при цьому дані мають бути правильно відформатовані з використанням [PDO::quote()](pdo.quote.md)якщо драйвер підтримує це.\n\n`fetchMode`\n\nРежим вибірки за промовчанням для повернутого [PDOStatement](class.pdostatement.md). Має бути однією з констант [`PDO::FETCH_*`](pdo.constants.md)\n\nЯкщо цей аргумент передається функції, інші аргументи будуть оброблятися так, якби [PDOStatement::setFetchMode()](pdostatement.setfetchmode.md) був викликаний отриманого об'єкта висловлювання. Подальші аргументи залежать від вибраного режиму вибірки.\n\n### Значення, що повертаються\n\nПовертає об'єкт [PDOStatement](class.pdostatement.md)или\\*\\*`false`\\*\\*в случае возникновения ошибки.\n\n### Помилки\n\nВидає помилку рівня **`E_WARNING`**, якщо атрибуту **`PDO::ATTR_ERRMODE`**установлено значение**`PDO::ERRMODE_WARNING`**\n\nВикидає виняток [PDOException](class.pdoexception.md), якщо атрибуту **`PDO::ATTR_ERRMODE`**установлено значение**`PDO::ERRMODE_EXCEPTION`**\n\n### Приклади\n\n**Приклад #1 SQL без наповнювачів може бути виконаний з використанням **PDO::query()****\n\n```php\n<?php\n$sql = 'SELECT name, color, calories FROM fruit ORDER BY name';\nforeach ($conn->query($sql) as $row) {\n    print $row['name'] . \"\\t\";\n    print $row['color'] . \"\\t\";\n    print $row['calories'] . \"\\n\";\n}\n?>\n```\n\nРезультат виконання наведеного прикладу:\n\n```\napple   red     150\nbanana  yellow  250\nkiwi    brown   75\nlemon   yellow  25\norange  orange  300\npear    green   150\nwatermelon      pink    90\n```\n\n### Дивіться також\n\n-   [PDO::exec()](pdo.exec.md) \\- Виконує SQL-запит та повертає кількість порушених рядків\n-   [PDO::prepare()](pdo.prepare.md) \\- готує запит до виконання та повертає пов'язаний із цим запитом об'єкт\n-   [PDOStatement::execute()](pdostatement.execute.md) \\- Запускає підготовлений запит на виконання\n","title":"PDO::query","contentType":2,"navigation":[{"pdo.prepare.md":"« PDO::prepare"},{"pdo.quote.md":"PDO::quote »"},{"index.md":"PHP Manual"},{"class.pdo.md":"PDO"}]}},"__N_SSG":true}