{"pageProps":{"page":{"slug":"class.weakmap.md","content":"# Клас WeakMap\n\n(PHP 8)\n\n## Вступ\n\n**WeakMap** - це колекція (map) або словник, який приймає об'єкти як ключі. Однак, на відміну від аналогічного в іншому [SplObjectStorage](class.splobjectstorage.md), об'єкт у ключі **WeakMap** не впливає на лічильник посилань об'єкта. Тобто, якщо в якийсь момент єдиним посиланням на об'єкт є ключ **WeakMap**, об'єкт буде зібраний збирачем сміття та видалено з **WeakMap**. Його основний варіант використання – створення кешів даних, отриманих з об'єкта, яким не потрібно жити довше, ніж об'єкт.\n\n**WeakMap** реалізує [ArrayAccess](class.arrayaccess.md) [Iterator](class.iterator.md) і [Countable](class.countable.md)Тому у більшості випадків його можна використовувати так само, як асоціативний масив.\n\n## Огляд класів\n\n```classsynopsis\n\n    \n     final\n     class WeakMap\n    \n\n    \n     implements\n      ArrayAccess,\n\n     Countable,\n\n     IteratorAggregate {\n\n    /* Методы */\n    \n   public count(): int\npublic getIterator(): Iterator\npublic offsetExists(object $object): bool\npublic offsetGet(object $object): mixed\npublic offsetSet(object $object, mixed $value): void\npublic offsetUnset(object $object): void\n\n   }\n```\n\n## Приклади\n\n**Приклад #1 Приклад використання** Weakmap\\*\\*\\*\\*\n\n```php\n<?php\n$wm = new WeakMap();\n\n$o = new stdClass;\n\nclass A {\n    public function __destruct() {\n        echo \"Уничтожено!\\n\";\n    }\n}\n\n$wm[$o] = new A;\n\nvar_dump(count($wm));\necho \"Сброс...\\n\";\nunset($o);\necho \"Готово\\n\";\nvar_dump(count($wm));\n```\n\nРезультат виконання наведеного прикладу:\n\n```\nint(1)\nСброс...\nУничтожено!\nГотово\nint(0)\n```\n\n## Зміст\n\n-   [WeakMap::count](weakmap.count.md)— Підраховує кількість живих записів у колекції (map)\n-   [WeakMap::getIterator](weakmap.getiterator.md)— Отримує зовнішній ітератор\n-   [WeakMap::offsetExists](weakmap.offsetexists.md)— Перевіряє, чи є у колекції (map) певний об'єкт\n-   [WeakMap::offsetGet](weakmap.offsetget.md)— Повертає значення, на яке вказує певний об'єкт\n-   [WeakMap::offsetSet](weakmap.offsetset.md)— Оновлює колекцію (map) новою парою ключ-значення\n-   [WeakMap::offsetUnset](weakmap.offsetunset.md)— Видаляє запис із колекції (map)\n","title":"Клас WeakMap","contentType":2,"navigation":[{"weakreference.get.md":"« WeakReference::get"},{"weakmap.count.md":"WeakMap::count »"},{"index.md":"PHP Manual"},{"reserved.interfaces.md":"Вбудовані інтерфейси та класи"}]}},"__N_SSG":true}