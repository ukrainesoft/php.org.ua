{"pageProps":{"page":{"slug":"function.mysql-query.md","content":"# mysql\\_query\n\n(PHP 4, PHP 5)\n\nmysql\\_query — Надсилає запит MySQL\n\n**Увага**\n\nЦей модуль застарів, починаючи з версії PHP 5.5.0, і видалений у PHP 7.0.0. Використовуйте замість нього [MySQLi](book.mysqli.md) або [PDO\\_MySQL](ref.pdo-mysql.md)Смотрите также инструкцию[MySQL: вибір API](mysqlinfo.api.choosing.md). Альтернативи для цієї функції:\n\n-   [mysqli\\_query()](mysqli.query.md)\n-   [PDO::query()](pdo.query.md)\n\n### Опис\n\n```methodsynopsis\nmysql_query(string $query, resource $link_identifier = NULL): mixed\n```\n\n**mysql\\_query()** посилає один запит (надсилання кількох запитів не підтримується) активній базі даних сервера, на який посилається переданий дескриптор `link_identifier`\n\n### Список параметрів\n\n`query`\n\nSQL-запит\n\nЗапит не повинен закінчуватися крапкою з комою. Дані у запиті мають бути [коректно проекрановано](function.mysql-real-escape-string.md)\n\n`link_identifier`\n\nЗ'єднання MySQL. Якщо ідентифікатор з'єднання не вказано, буде використано останнє з'єднання, відкрите [mysql\\_connect()](function.mysql-connect.md). Якщо таке з'єднання не було знайдено, функція спробує створити таке, якби [mysql\\_connect()](function.mysql-connect.md) було викликано без параметрів. Якщо з'єднання не було знайдено та не змогло бути створено, генерується помилка рівня **`E_WARNING`**\n\n### Значення, що повертаються\n\nДля запитів SELECT, SHOW, DESCRIBE, EXPLAIN та інших запитів, що повертають результат з кількох рядів, **mysql\\_query()** повертає дескриптор результату запиту (resource), або \\*\\*`false`\\*\\*в случае возникновения ошибки.\n\nДля інших типів SQL-запитів, INSERT, UPDATE, DELETE, DROP та інших, **mysql\\_query()** повертає **`true`** у разі успішного виконання та \\*\\*`false`\\*\\*в случае возникновения ошибки.\n\nОтриманий дескриптор результату слід передати у функцію [mysql\\_fetch\\_assoc()](function.mysql-fetch-assoc.md)или любую другую функцию, работающую с результатами запросов.\n\nИспользуйте[mysql\\_num\\_rows()](function.mysql-num-rows.md) для з'ясування кількості рядів в результаті SELECT-запиту або [mysql\\_affected\\_rows()](function.mysql-affected-rows.md) для з'ясування кількості опрацьованих рядів запитами DELETE, INSERT, REPLACE та UPDATE.\n\n**mysql\\_query()** також завершиться з помилкою та поверне **`false`**, якщо користувач не має доступу до будь-якої з таблиць, що фігурують у запиті.\n\n### Приклади\n\n**Приклад #1 Неправильний запит**\n\nСледующий запрос составлен неправильно и**mysql\\_query()** поверне **`false`**\n\n```php\n<?php\n$result = mysql_query('SELECT * WHERE 1 = 1');\nif (!$result) {\n    die('Неверный запрос: ' . mysql_error());\n}\n\n?>\n```\n\n**Приклад #2 Вірний запит**\n\nНаступний запит вірний, тому **mysql\\_query()** поверне ресурс.\n\n```php\n<?php\n// Эти данные, к Прикладу, могли быть получены от пользователя\n$firstname = 'fred';\n$lastname  = 'fox';\n\n// Формируем запрос\n// Это лучший способ выполнить SQL-запрос\n// Ещё Приклады можно найти в документации mysql_real_escape_string()\n$query = sprintf(\"SELECT firstname, lastname, address, age FROM friends\n    WHERE firstname='%s' AND lastname='%s'\",\n    mysql_real_escape_string($firstname),\n    mysql_real_escape_string($lastname));\n\n// Выполняем запрос\n$result = mysql_query($query);\n\n// Проверяем результат\n// Это показывает реальный запрос, посланный к MySQL, а также ошибку. Удобно при отладке.\nif (!$result) {\n    $message  = 'Неверный запрос: ' . mysql_error() . \"\\n\";\n    $message .= 'Запрос целиком: ' . $query;\n    die($message);\n}\n\n// Используем результат\n// Попытка напечатать $result не выведет информацию, которая в нем хранится\n// Необходимо использовать какую-либо mysql-функцию, работающую с результатом запроса\n// Смотрите также mysql_result(), mysql_fetch_array(), mysql_fetch_row() и т.п.\nwhile ($row = mysql_fetch_assoc($result)) {\n    echo $row['firstname'];\n    echo $row['lastname'];\n    echo $row['address'];\n    echo $row['age'];\n}\n\n// Освобождаем ресурсы, ассоциированные с результатом\n// Это делается автоматически в конце скрипта\nmysql_free_result($result);\n?>\n```\n\n### Дивіться також\n\n-   [mysql\\_connect()](function.mysql-connect.md) \\- Відкриває з'єднання із сервером MySQL\n-   [mysql\\_error()](function.mysql-error.md) \\- Повертає текст помилки останньої операції з MySQL\n-   [mysql\\_real\\_escape\\_string()](function.mysql-real-escape-string.md) \\- Екранує спеціальні символи у рядках для використання у виразах SQL\n-   [mysql\\_result()](function.mysql-result.md) \\- Повертає дані результату запиту\n-   [mysql\\_fetch\\_assoc()](function.mysql-fetch-assoc.md) \\- Повертає ряд результату запиту як асоціативний масив.\n-   [mysql\\_unbuffered\\_query()](function.mysql-unbuffered-query.md) \\- Надсилає запит MySQL без авто-обробки результату та його буферизації\n","title":"mysql\\_query","contentType":2,"navigation":[{"function.mysql-ping.md":"« mysql\\_ping"},{"function.mysql-real-escape-string.md":"mysql\\_real\\_escape\\_string »"},{"index.md":"PHP Manual"},{"ref.mysql.md":"MySQL"}]}},"__N_SSG":true}