{"pageProps":{"page":{"slug":"mongodb-driver-command.construct.md","content":"# MongoDB\\\\Driver\\\\Command::\\_\\_construct\n\n(mongodb >=1.0.0)\n\nMongoDB\\\\Driver\\\\Command::\\_\\_construct — Створює новий об'єкт Command\n\n### Опис\n\n```methodsynopsis\nfinal public MongoDB\\Driver\\Command::__construct(array|object $document, ?array $commandOptions = null)\n```\n\nСтворює новий об'єкт класу [MongoDB\\\\Driver\\\\Command](class.mongodb-driver-command.md)що є незмінним значенням, що представляє команду бази даних. Цю команду згодом можна запустити за допомогою [MongoDB\\\\Driver\\\\Manager::executeCommand()](mongodb-driver-manager.executecommand.md)\n\nПовний документ команди, що включає її ім'я та інші опції, має бути заданий у параметрі `document`Параметр`commandOptions` використовується тільки для визначення опцій запуску команди та результуючий [MongoDB\\\\Driver\\\\Cursor](class.mongodb-driver-cursor.md)\n\n### Список параметрів\n\n`document`\n\nПовний документ команди, який буде передано серверу.\n\n`commandOptions`\n\n> **Зауваження**: Не використовуйте цей параметр, щоб вказати опції, описані в посібнику з команд MongoDB. Цей параметр можна використовувати лише для наведених нижче опцій.\n\n**commandOptions**\n\n| Опция | Тип | Опис |\n| --- | --- | --- |\n| maxAwaitTimeMS | int |  |\n| Позитивне ціле число, яке визначає обмеження часу в мілісекундах, на яке сервер може блокувати операцію getMore, якщо дані відсутні. Ця опція може використовуватися лише спільно з командами, що повертають хвостові курсори. (наприклад [» Change Streams](https://www.mongodb.com/docs/manual/changeStreams/) |  |  |\n\n### Помилки\n\n-   При помилці парсингу аргумент кидає виняток[MongoDB\\\\Driver\\\\Exception\\\\InvalidArgumentException](class.mongodb-driver-exception-invalidargumentexception.md)\n\n### список змін\n\n| Версия | Опис |\n| --- | --- |\n| PECL mongodb 1.4.0 |  |\n| Доданий другий аргумент `commandOptions`, що дозволяє визначити опцію `\"maxAwaitTimeMS\"` |  |\n\n### Приклади\n\n**Приклад #1 Приклад використання** MongoDB\\\\Driver\\\\Command::\\_\\_construct()\\*\\*\\*\\*\n\n```php\n<?php\n\n$manager = new MongoDB\\Driver\\Manager(\"mongodb://localhost:27017\");\n$command = new MongoDB\\Driver\\Command(array(\"buildinfo\" => 1));\n\ntry {\n    $cursor = $manager->executeCommand(\"admin\", $command);\n    $response = $cursor->toArray()[0];\n} catch(MongoDB\\Driver\\Exception $e) {\n    echo $e->getMessage(), \"\\n\";\n    exit;\n}\nvar_dump($response);\n\n?>\n```\n\nВисновок наведеного прикладу буде схожим на:\n\n```\narray(13) {\n  [\"version\"]=>\n  string(14) \"2.8.0-rc2-pre-\"\n  [\"gitVersion\"]=>\n  string(62) \"b743d7158f7642f4da6b7eac8320374b3b88dc2e modules: subscription\"\n  [\"OpenSSLVersion\"]=>\n  string(25) \"OpenSSL 1.0.1f 6 Jan 2014\"\n  [\"sysInfo\"]=>\n  string(104) \"Linux infant 3.16.0-24-generic #32-Ubuntu SMP Tue Oct 28 13:07:32 UTC 2014 x86_64 BOOST_LIB_VERSION=1_49\"\n  [\"loaderFlags\"]=>\n  string(91) \"-fPIC -pthread -Wl,-z,now -rdynamic -Wl,-Bsymbolic-functions -Wl,-z,relro -Wl,-z,now -Wl,-E\"\n  [\"compilerFlags\"]=>\n  string(301) \"-Wnon-virtual-dtor -Woverloaded-virtual -std=c++11 -fPIC -fno-strict-aliasing -ggdb -pthread -Wall -Wsign-compare -Wno-unknown-pragmas -Winvalid-pch -pipe -Werror -O3 -Wno-unused-local-typedefs -Wno-unused-function -Wno-deprecated-declarations -Wno-unused-but-set-variable -fno-builtin-memcmp -std=c99\"\n  [\"allocator\"]=>\n  string(8) \"tcmalloc\"\n  [\"versionArray\"]=>\n  array(4) {\n    [0]=>\n    int(2)\n    [1]=>\n    int(8)\n    [2]=>\n    int(0)\n    [3]=>\n    int(-8)\n  }\n  [\"javascriptEngine\"]=>\n  string(2) \"V8\"\n  [\"bits\"]=>\n  int(64)\n  [\"debug\"]=>\n  bool(false)\n  [\"maxBsonObjectSize\"]=>\n  int(16777216)\n  [\"ok\"]=>\n  float(1)\n}\n```\n\n**Приклад #2 Приклад використання** MongoDB\\\\Driver\\\\Command::\\_\\_construct()\\*\\*\\*\\*\n\nКоманди також можуть приймати опції, як частина нормальної структури, яку ви створюєте та відправляєте на сервер. Наприклад, з більшістю команд можна передавати опцію `maxTimeMS` для обмеження часу виконання.\n\n```php\n<?php\n\n$manager = new MongoDB\\Driver\\Manager(\"mongodb://localhost:27017\");\n$command = new MongoDB\\Driver\\Command(\n    array(\n        \"distinct\" => \"beer\",\n        \"key\" => \"beer_name\",\n        \"maxTimeMS\" => 10,\n    )\n);\n\ntry {\n    $cursor = $manager->executeCommand(\"beerdb\", $command);\n    $response = $cursor->toArray()[0];\n} catch(MongoDB\\Driver\\Exception\\Exception $e) {\n    echo $e->getMessage(), \"\\n\";\n    exit;\n}\nvar_dump($response);\n\n?>\n```\n\nВисновок наведеного прикладу буде схожим на:\n\noperation exceeded time limit\n\n### Дивіться також\n\n-   [MongoDB\\\\Driver\\\\Manager::executeCommand()](mongodb-driver-manager.executecommand.md) \\- Виконує команду бази даних\n-   [MongoDB\\\\Driver\\\\Cursor](class.mongodb-driver-cursor.md)\n","title":"MongoDB\\\\Driver\\\\Command::\\_\\_construct","contentType":2,"navigation":[{"class.mongodb-driver-command.md":"« MongoDB\\\\Driver\\\\Command"},{"class.mongodb-driver-query.md":"MongoDB\\\\Driver\\\\Query »"},{"index.md":"PHP Manual"},{"class.mongodb-driver-command.md":"MongoDB\\\\Driver\\\\Command"}]}},"__N_SSG":true}