{"pageProps":{"page":{"slug":"function.pg-query.md","content":"# pg\\_query\n\n(PHP 4 >= 4.2.0, PHP 5, PHP 7, PHP 8)\n\npg\\_query — Виконує запит\n\n### Опис\n\n```methodsynopsis\npg_query(PgSql\\Connection $connection = ?, string $query): PgSql\\Result|false\n```\n\n**pg\\_query()** виконує `query` до вказаної в `connection` базі даних . [pg\\_query\\_params()](function.pg-query-params.md) має бути кращим у більшості випадків.\n\nВ случае возникновения ошибки функция возвращает\\*\\*`false`\\*\\*, деталі помилки можна отримати за допомогою функції [pg\\_last\\_error()](function.pg-last-error.md)якщо з'єднання з БД не порушено.\n\n> **Зауваження**: Несмотря на то, что параметр`connection` може бути опущений, робити так не рекомендується, так як це може призвести до помилок, що важко перебувають у скриптах.\n\n> **Зауваження** :\n> \n> Раніше ця функція називалася **pg\\_exec()**. . **pg\\_exec()** все ще доступна для забезпечення сумісності, але краще використовувати нове ім'я.\n\n### Список параметрів\n\n`connection`\n\nЕкземпляр [PgSql\\\\Connection](class.pgsql-connection.md). Якщо параметр `connection` не вказано, буде вибрано стандартне з'єднання. Стандартне з'єднання — це останнє з'єднання, яке встановила функція [pg\\_connect()](function.pg-connect.md) або [pg\\_pconnect()](function.pg-pconnect.md)\n\n**Увага**\n\nПочинаючи з версії PHP 8.1.0, використання стандартного з'єднання застаріло.\n\n`query`\n\nВираз або вираз SQL для виконання. Якщо передано кілька виразів, вони автоматично виконуються, як одна транзакція, якщо явно не вказані команди BEGIN/COMMIT усередині виразу. Тим не менш, використовувати кілька транзакцій в одному дзвінку функції не рекомендується.\n\n**Увага**\n\nСтрокове представлення даних користувача дуже небезпечне і часто призводить до можливості [SQL ін'єкції](security.database.sql-injection.md). У більшості випадків краще передавати дані користувача параметром в [pg\\_query\\_params()](function.pg-query-params.md), а не підставляти їх у рядок запиту.\n\nБудь-які дані, що передаються від користувача безпосередньо в рядок запиту, повинні бути [добре екрановані](function.pg-escape-string.md)\n\n### Значення, що повертаються\n\nЕкземпляр [PgSql\\\\Result](class.pgsql-result.md) у разі успішного виконання або \\*\\*`false`\\*\\*в случае возникновения ошибки.\n\n### список змін\n\n| Версия | Опис |\n| --- | --- |\n| 8.1.0 | Повертає екземпляр [PgSql\\\\Result](class.pgsql-result.md); раніше повертався ресурс ([resource](language.types.resource.md) |\n| 8.1.0 | Параметр`connection` тепер чекає екземпляр [PgSql\\\\Connection](class.pgsql-connection.md); раніше очікувався ресурс ([resource](language.types.resource.md) |\n\n### Приклади\n\n**Приклад #1 Приклад використання** pg\\_query()\\*\\*\\*\\*\n\n```php\n<?php\n\n$conn = pg_pconnect(\"dbname=publisher\");\nif (!$conn) {\n  echo \"Произошла ошибка.\\n\";\n  exit;\n}\n\n$result = pg_query($conn, \"SELECT author, email FROM authors\");\nif (!$result) {\n  echo \"Произошла ошибка.\\n\";\n  exit;\n}\n\nwhile ($row = pg_fetch_row($result)) {\n  echo \"Автор: $row[0]  E-mail: $row[1]\";\n  echo \"<br />\\n\";\n}\n\n?>\n```\n\n**Приклад #2 Використання кількох виразів у **pg\\_query()****\n\n```php\n<?php\n\n$conn = pg_pconnect(\"dbname=publisher\");\n\n// эти выражения будут исполнены в одной транзакции\n\n$query = \"UPDATE authors SET author=UPPER(author) WHERE id=1;\";\n$query .= \"UPDATE authors SET author=LOWER(author) WHERE id=2;\";\n$query .= \"UPDATE authors SET author=NULL WHERE id=3;\";\n\npg_query($conn, $query);\n\n?>\n```\n\n### Дивіться також\n\n-   [pg\\_connect()](function.pg-connect.md) \\- Відкриває з'єднання з базою даних PostgreSQL\n-   [pg\\_pconnect()](function.pg-pconnect.md) \\- Відкриває постійне з'єднання із сервером PostgreSQL\n-   [pg\\_fetch\\_array()](function.pg-fetch-array.md) \\- Повертає рядок результату у вигляді масиву\n-   [pg\\_fetch\\_object()](function.pg-fetch-object.md) \\- Вибирає рядок результату запиту та повертає дані у вигляді об'єкта\n-   [pg\\_num\\_rows()](function.pg-num-rows.md) \\- Повертає кількість рядків у вибірці\n-   [pg\\_affected\\_rows()](function.pg-affected-rows.md) \\- Повертає кількість порушених запитом записів (кортежів)\n","title":"pg\\_query","contentType":2,"navigation":[{"function.pg-query-params.md":"« pg\\_query\\_params"},{"function.pg-result-error-field.md":"pg\\_result\\_error\\_field »"},{"index.md":"PHP Manual"},{"ref.pgsql.md":"Функції PostgreSQL"}]}},"__N_SSG":true}