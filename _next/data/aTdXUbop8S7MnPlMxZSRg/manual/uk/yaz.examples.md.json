{"pageProps":{"page":{"slug":"yaz.examples.md","content":"# Приклади\n\nPHP/YAZ зберігає список з'єднань з адресатами (Z-Асоціація). Ресурс надає з'єднання з адресатом.\n\nПриклад нижче демонструє особливість паралельного пошуку API. Якщо аргументи не передано, виводиться форма запиту; інакше (передані аргументи) відбувається пошук за адресами, вказаними у масиві `host`\n\n**Приклад #1 Паралельний пошук за допомогою Yaz**\n\n```php\n<?php\n$host=$_REQUEST[host];\n$query=$_REQUEST[query];\n$num_hosts = count($host);\nif (empty($query) || count($host) == 0) {\n    echo '<form method=\"get\">\n    <input type=\"checkbox\"\n    name=\"host[]\" value=\"bagel.indexdata.dk/gils\" />\n        Тест GILS\n    <input type=\"checkbox\"\n    name=\"host[]\" value=\"localhost:9999/Default\" />\n        Локальный тест\n    <input type=\"checkbox\" checked=\"checked\"\n    name=\"host[]\" value=\"z3950.loc.gov:7090/voyager\" />\n        Библиотека Конгресса\n    <br />\n    Запрос RPN:\n    <input type=\"text\" size=\"30\" name=\"query\" />\n    <input type=\"submit\" name=\"action\" value=\"Поиск\" />\n    </form>\n    ';\n} else {\n    echo 'Вы искали ' . htmlspecialchars($query) . '<br />';\n    for ($i = 0; $i < $num_hosts; $i++) {\n        $id[] = yaz_connect($host[$i]);\n        yaz_syntax($id[$i], \"usmarc\");\n        yaz_range($id[$i], 1, 10);\n        yaz_search($id[$i], \"rpn\", $query);\n    }\n    yaz_wait();\n    for ($i = 0; $i < $num_hosts; $i++) {\n        echo '<hr />' . $host[$i] . ':';\n        $error = yaz_error($id[$i]);\n        if (!empty($error)) {\n            echo \"Ошибка: $error\";\n        } else {\n            $hits = yaz_hits($id[$i]);\n            echo \"Всего результатов $hits\";\n        }\n        echo '<dl>';\n        for ($p = 1; $p <= 10; $p++) {\n            $rec = yaz_record($id[$i], $p, \"string\");\n            if (empty($rec)) continue;\n            echo \"<dt><b>$p</b></dt><dd>\";\n            echo nl2br($rec);\n            echo \"</dd>\";\n        }\n        echo '</dl>';\n    }\n}\n?>\n```\n","title":"Приклади","contentType":2,"navigation":[{"yaz.constants.md":"« Зумовлені константи"},{"ref.yaz.md":"Функції YAZ »"},{"index.md":"PHP Manual"},{"book.yaz.md":"YAZ"}]}},"__N_SSG":true}