{"pageProps":{"page":{"slug":"rararchive.open.md","content":"# RarArchive::open\n\n# rar\\_open\n\n(PECL rar >= 2.0.0)\n\nRarArchive::open -- rar\\_open — Відкриває архів RAR\n\n### Опис\n\nОб'єктно-орієнтований стиль (метод):\n\n```methodsynopsis\npublic static RarArchive::open(string $filename, string $password = NULL, callable $volume_callback = NULL): RarArchive|false\n```\n\nПроцедурний стиль:\n\n```methodsynopsis\nrar_open(string $filename, string $password = NULL, callable $volume_callback = NULL): RarArchive|false\n```\n\nВідкриває зазначений RAR-архів та повертає об'єкт [RarArchive](class.rararchive.md)представляє його.\n\n> **Зауваження** :\n> \n> При відкритті багатотомного архіву шлях до першого тому має бути переданий першим параметром. Інакше не буде видно всіх файлів.\n\n### Список параметрів\n\n`filename`\n\nШлях до архіву Rar.\n\n`password`\n\nПароль, якщо потрібно розшифрувати заголовки архіву. Цей пароль буде використовуватися за замовчуванням, якщо знайдено зашифровані файли. Зауважте, що файли можуть бути зашифровані з різними паролями.\n\n`volume_callback`\n\nФункція, якою передається єдиний параметр - шлях до того, який не був знайдений, і повертає рядок з правильним шляхом для цього тому або \\*\\*`null`\\*\\*якщо цей том не існує або невідомий. Розробник повинен бути впевнений, що дана функція не призведе до зациклювання, оскільки вона викликається повторно, якщо шлях, отриманий попереднім викликом, не відповідає потрібному тому. Вказівка ​​цього параметра усуває попередження, які б з'являлися, якби тому не було знайдено. Якщо функція повертає тільки **`null`**, то не буде жодного попередження.\n\n**Увага**\n\nДо версії 2.0.0 ця функція не обробляла правильно відносні шляхи. У таких випадках використовуйте [realpath()](function.realpath.md)\n\n### Значення, що повертаються\n\nПовертає запитуваний об'єкт [RarArchive](class.rararchive.md)или\\*\\*`false`\\*\\*в случае возникновения ошибки.\n\n### список змін\n\n| Версия | Опис |\n| --- | --- |\n| PECL rar 3.0.0 | Був доданий `volume_callback` |\n\n### Приклади\n\n**Приклад #1 Об'єктно-орієнтований стиль**\n\n```php\n<?php\n$rar_arch = RarArchive::open('encrypted_headers.rar', 'samplepassword');\nif ($rar_arch === FALSE)\n    die(\"Неудачное открытие файла\");\n\n$entries = $rar_arch->getEntries();\nif ($entries === FALSE)\n    die(\"Неудачное получение записей\");\n\necho \"Найдено \" . count($entries) . \" файлов.\\n\";\n\nif (empty($entries))\n    die(\"Не найдено корректных записей.\");\n\n$stream = reset($entries)->getStream();\nif ($stream === FALSE)\n    die(\"Неудачное открытие первого файла\");\n\n$rar_arch->close();\n\necho \"Содержимое первого файла:\\n\";\necho stream_get_contents($stream);\n\nfclose($stream);\n?>\n```\n\nВисновок наведеного прикладу буде схожим на:\n\n```\nНайдено 2 файлов.\nСодержимое первого файла:\nEncrypted file 1 contents.\n```\n\n**Приклад #2 Процедурний стиль**\n\n```php\n<?php\n$rar_arch = rar_open('encrypted_headers.rar', 'samplepassword');\nif ($rar_arch === FALSE)\n    die(\"Неудачное открытие файла\");\n\n$entries = rar_list($rar_arch);\nif ($entries === FALSE)\n    die(\"Failed fetching entries\");\n\necho \"Найдено \" . count($entries) . \" файлов.\\n\";\n\nif (empty($entries))\n    die(\"Не найдено корректных записей.\");\n\n$stream = reset($entries)->getStream();\nif ($stream === FALSE)\n    die(\"Неудачное открытие первого файла\");\n\nrar_close($rar_arch);\n\necho \"Содержимое первого файла:\\n\";\necho stream_get_contents($stream);\n\nfclose($stream);\n?>\n```\n\n**Приклад #3 Callback-функція для тому**\n\n```php\n<?php\n/* В этом Прикладе есть том с именем multi_broken.part1.rar,\n * а следующий том имеет имя multi.part2.rar */\nfunction resolve($vol) {\n    if (preg_match('/_broken/', $vol))\n        return str_replace('_broken', '', $vol);\n    else\n        return null;\n}\n$rar_file1 = rar_open(dirname(__FILE__).'/multi_broken.part1.rar', null, 'resolve');\n$entry = $rar_file1->getEntry('file2.txt');\n$entry->extract(null, dirname(__FILE__) . \"/temp_file2.txt\");\n?>\n```\n\n### Дивіться також\n\n-   [`rar://`wrapper](wrappers.rar.md)\n","title":"RarArchive::open","contentType":2,"navigation":[{"rararchive.issolid.md":"« RarArchive::isSolid"},{"rararchive.setallowbroken.md":"RarArchive::setAllowBroken »"},{"index.md":"PHP Manual"},{"class.rararchive.md":"RarArchive"}]}},"__N_SSG":true}