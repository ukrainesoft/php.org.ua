{"pageProps":{"page":{"slug":"control-structures.match.md","content":"## match\n\n(PHP 8)\n\nВираз `match` призначено для розгалуження потоку виконання на підставі перевірки збігу значення із заданою умовою. Аналогічно оператору `switch`, вираз `match` приймає на вхід вираз, який порівнюється з безліччю альтернатив. Але, на відміну від `switch`, воно обробляє значення у стилі, більше схожому на тернарний оператор. Також, на відміну від `switch`, використовується суворе порівняння (`===`), а не слабке (`==`). Вираз match доступний починаючи з PHP 8.0.0.\n\n**Приклад #1 Структура виразу `match`**\n\n```php\n<?php\n$return_value = match (subject_expression) {\n    single_conditional_expression => return_expression,\n    conditional_expression1, conditional_expression2 => return_expression,\n};\n?>\n```\n\n**Приклад #2 Простий приклад використання `match`**\n\n```php\n<?php\n$food = 'cake';\n$return_value = match ($food) {\n    'apple' => 'На столе лежит яблоко',\n    'banana' => 'На столе лежит банан',\n    'cake' => 'На столе стоит торт',\n};\nvar_dump($return_value);\n?>\n```\n\nРезультат виконання наведеного прикладу:\n\n```\nstring(35) \"На столе стоит торт\"\n```\n\n> **Зауваження**: Результат`match` використовувати необов'язково.\n\n> **Зауваження**: Вираз `match` *повинно* завершуватися точкою з комою\n\nВираз `match`похоже на оператор`switch` за винятком деяких ключових відмінностей:\n\n-   На відміну від switch,`match`використовується суворе порівняння (`===`\n-   Вираз `match`повертає результат.\n-   В`match`виконується лише одна, перша підійшла, гілка коду, тоді як у`switch`відбувається наскрізне виконання починаючи з умови, що підійшла, і до першого зустрівся оператора`break`\n-   Вираз `match`має бути вичерпним.\n\nТак само як і оператор `switch` `match` послідовно проводить перевірки на збіг із заданими умовами. Виконання коду умов відбувається ліниво, тобто. код наступної умови виконується, тільки якщо всі попередні перевірки провалилися. Буде виконана тільки одна гілка коду, що відповідає умові, що підійшла. Приклад:\n\n```php\n<?php\n$result = match ($x) {\n    foo() => ...,\n    $this->bar() => ..., // $this->bar() не будет выполнен, если foo() === $x\n    $this->baz => beep(), // beep() будет выполнен только если $x === $this->baz\n    // etc.\n};\n?>\n```\n\nУсловия в`match` можуть бути множинними. У цьому випадку їх слід розділяти комами. Численні умови працюють за принципом логічного АБО і, по суті, є скороченою формою для випадків, коли кілька умов мають бути оброблені ідентично.\n\n```php\n<?php\n$result = match ($x) {\n    // Множественное условие:\n    $a, $b, $c => 5,\n    // Аналогично трём одиночным:\n    $a => 5,\n    $b => 5,\n    $c => 5,\n};\n?>\n```\n\nТакож можна використовувати шаблон `default`. Цей шаблон збігається з будь-чим, для чого не знайшлося збігів раніше. Наприклад:\n\n```php\n<?php\n$expressionResult = match ($condition) {\n    1, 2 => foo(),\n    3, 4 => bar(),\n    default => baz(),\n};\n?>\n```\n\n> **Зауваження**: Використання декількох шаблонів default призведе до фатальної помилки **`E_FATAL_ERROR`**\n\nВираз `match` має бути вичерпним. Якщо вираз, що перевіряється, не співпав з жодною з умов, то буде викинуто виняток [UnhandledMatchError](class.unhandledmatcherror.md)\n\n**Приклад #3 Приклад необробленого виразу**\n\n```php\n<?php\n$condition = 5;\n\ntry {\n    match ($condition) {\n        1, 2 => foo(),\n        3, 4 => bar(),\n    };\n} catch (\\UnhandledMatchError $e) {\n    var_dump($e);\n}\n?>\n```\n\nРезультат виконання наведеного прикладу:\n\n```\nobject(UnhandledMatchError)#1 (7) {\n  [\"message\":protected]=>\n  string(33) \"Unhandled match value of type int\"\n  [\"string\":\"Error\":private]=>\n  string(0) \"\"\n  [\"code\":protected]=>\n  int(0)\n  [\"file\":protected]=>\n  string(9) \"/in/ICgGK\"\n  [\"line\":protected]=>\n  int(6)\n  [\"trace\":\"Error\":private]=>\n  array(0) {\n  }\n  [\"previous\":\"Error\":private]=>\n  NULL\n}\n```\n\n### Використання match для перевірки складних умов\n\nВираз `match` можна використовувати не лише для перевірки ідентичності, але й для будь-яких виразів, що повертають логічне значення. В цьому випадку як вхідний параметр передається вираз `true`\n\n**Приклад #4 Використання match для розгалуження в залежності від входження в діапазони цілих чисел**\n\n```php\n<?php\n\n$age = 23;\n\n$result = match (true) {\n    $age >= 65 => 'пожилой',\n    $age >= 25 => 'взрослый',\n    $age >= 18 => 'совершеннолетний',\n    default => 'ребёнок',\n};\n\nvar_dump($result);\n?>\n```\n\nРезультат виконання наведеного прикладу:\n\n```\nstring(11) \"совершеннолетний\"\n```\n\n**Приклад #5 Використання match для розгалуження залежно від вмісту рядка**\n\n```php\n<?php\n\n$text = 'Bienvenue chez nous';\n\n$result = match (true) {\n    str_contains($text, 'Welcome') || str_contains($text, 'Hello') => 'en',\n    str_contains($text, 'Bienvenue') || str_contains($text, 'Bonjour') => 'fr',\n    // ...\n};\n\nvar_dump($result);\n?>\n```\n\nРезультат виконання наведеного прикладу:\n\n```\nstring(2) \"fr\"\n```\n","title":"match","contentType":2,"navigation":[{"control-structures.switch.md":"« switch"},{"control-structures.declare.md":"declare »"},{"index.md":"PHP Manual"},{"language.control-structures.md":"Керуючі конструкції"}]}},"__N_SSG":true}