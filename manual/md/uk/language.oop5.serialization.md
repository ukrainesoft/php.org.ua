- [« Об'єкти та посилання](language.oop5.references.md)
- [Коваріантність та контраваріантність »](language.oop5.variance.md)

- [PHP Manual](index.md)
- [Класи та об'єкти](language.oop5.md)
- Серіалізація об'єктів

## Серіалізація об'єктів

## Серіалізація об'єктів - збереження об'єктів між сесіями

Функція [serialize()](function.serialize.md) повертає рядкове
представлення будь-якого значення, яке може бути збережено у PHP.
Функція [unserialize()](function.unserialize.md) може використовуватись
цей рядок для відновлення вихідного значення змінної.
Використання серіалізації для збереження об'єкта збереже його
змінні. Методи в об'єкті не будуть збережені лише ім'я класу.

Для того щоб мати можливість виконати
[unserialize()](function.unserialize.md) для об'єкта, потрібно, щоб
клас цього об'єкта було визначено заздалегідь. Тобто якщо у вас є
екземпляр класу А, і ви зробите його серіалізацію, ви отримаєте його
рядкове уявлення, яке містить значення всіх змінних,
які у ньому. Для того, щоб відновити об'єкт з рядка в
іншому PHP-файлі клас A повинен бути визначений заздалегідь. Це можна
зробити, наприклад, шляхом збереження визначення класу A в окремий
файл та підключити цей файл або використовувати функцію
[spl_autoload_register()](function.spl-autoload-register.md) для
автоматичне підключення.

` <?php// classa.inc:  class A {     public$$one u003d 1; public function show_one() {          echo $this->one; }  }// page1.php: include("classa.inc"); $a u003d new A; $s u003d serialize($a); // зберігаємо $s де-небудь, звідки page2.php зможе його отримати. file_put_contents('store', $s);// page2.php:  // потрібно для того, щоб функція unserialize працювала правильно. include("classa.inc"); $s u003d file_get_contents('store'); $au003du003dunserialize($s); // тепер можна використовувати метод show_one() об'єкта $a. $a->show_one();?> `

Якщо у додатку проводиться серіалізація об'єктів для наступного
використання, рекомендується підключати визначення класу
для цього об'єкта у всьому додатку. Невиконання цієї вимоги
може призвести до того, що об'єкт буде десеріалізовано без визначення
класу, що призведе до того, що PHP використовуватиме для цього
об'єкта клас **\_\_PHP_Incomplete_Class_Name**, який не має
методів і зробить об'єкт марним.

Тому, якщо у наведеному вище прикладі `$a` стало частиною сесії після
запуску `session_register("a")`, ви повинні підключати файл `classa.inc`
на всіх ваших сторінках, а не тільки `page1.php` та `page2.php`.

Зверніть увагу, що, крім вищенаведеної поради, також можна
підключитися до подій серіалізації та десеріалізації об'єкта за допомогою
методів [\_\_sleep()](language.oop5.magic.md#object.sleep) та
[\_\_wakeup()](language.oop5.magic.md#object.wakeup). Метод
[\_\_sleep()](language.oop5.magic.md#object.sleep) також дозволяє
серіалізувати лише деяке підмножина властивостей об'єкта.
