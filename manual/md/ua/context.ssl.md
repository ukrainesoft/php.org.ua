- [« Параметри контексту FTP](context.ftp.md)
- [Опції контексту CURL»] (context.curl.md)

- [PHP Manual](index.md)
- [Контекстні опції та параметри](context.md)
- Список опцій контексту SSL

# Опції контексту SSL

Опції контексту SSL - Список опцій контексту SSL

### Опис

Опції контексту для протоколів `ssl://` та `tls://`

### Опції

`peer_name` string
Ім'я вузла. Якщо його значення не встановлено, тоді ім'я підставляється
ґрунтуючись на імені хоста, використаного під час відкриття потоку.

`verify_peer` bool
Вимагати перевірки використовуваного SSL-сертифіката.

За промовчанням **`true`**.

`verify_peer_name` bool
Вимагати перевірки імені вузла.

За промовчанням **`true`**.

`allow_self_signed` bool
Дозволити самопідписані сертифікати. Вимагає
[`verify_peer`](context.ssl.md#context.ssl.verify-peer).

Типово **`false`**

`cafile` string
Розташування файлу сертифіката в локальній файловій системі, який
слід використовувати з опцією контексту `verify_peer` для перевірки
автентичності віддаленого вузла.

'capath' string
Якщо параметр "cafile" не визначено або сертифікат не знайдено,
здійснюється пошук у директорії, вказаній в `capath`. Шлях `capath`
має бути до коректної директорії, що містить сертифікати, імена
яких є хеш від поля subject, зазначеного в сертифікаті.

`local_cert` string
Шлях до локального сертифіката у файловій системі. Це має бути файл,
закодований у PEM, який містить ваш сертифікат та закритий ключ.
Він може додатково містити відкритий ключ емітента. Закритий ключ
також може міститись в окремому файлі, заданому `local_pk`.

`local_pk` string
Шлях до локального файлу з приватним ключем у разі окремих файлів
сертифіката (`local_cert`) та приватного ключа.

`passphrase` string
Ідентифікаційна фраза, з якою ваш файл `local_cert` був
закодовано.

`verify_depth` int
Перервати, якщо ланцюжок сертифіката занадто довгий.

За промовчанням перевірка відсутня.

`ciphers` string
Встановлює перелік доступних алгоритмів шифрування. Формат цього рядка
описаний у розділі
[» шифри(1)](https://www.openssl.org/docs/manmaster/man1/ciphers.md#CIPHER-LIST-FORMAT).

За замовчуванням набуває значення `DEFAULT`.

`capture_peer_cert` bool
Якщо встановлено в **`true`**, то буде створено опцію контексту
`peer_certificate`, що містить сертифікат віддаленого вузла.

`capture_peer_cert_chain` bool
Якщо встановлено в **`true`**, то буде створено опцію контексту
`peer_certificate_chain`, що містить ланцюжок сертифікатів.

`SNI_enabled` bool
Якщо встановлено в **`true`**, буде включено вказівку імені сервера.
Увімкнення SNI дозволяє використовувати різні сертифікати на одному й тому
ж IP-адресі.

`disable_compression` bool
Вимикає стиснення TLS, що допомагає запобігти атакам типу CRIME.

`peer_fingerprint` string \| array
Перерватись, якщо дайджест повідомлення не співпадає із зазначеним хешом.

Якщо вказано рядок (string), то його довжина визначає який алгоритм
хешування буде використано: "md5" (32) або "sha1" (40).

Якщо вказано масив (array), то ключі визначають алгоритм хешування, а
кожне відповідне значення є необхідним хешом.

`security_level` int
Встановлює рівень безпеки. Якщо не вказано, використовується
стандартний рівень безпеки, вказаний у бібліотеці. Рівні
безпеки описані в
[» SSL_CTX_get_security_level(3)](https://www.openssl.org/docs/man1.1.0/man3/SSL_CTX_get_security_level.md).

Доступна з PHP 7.2.0 та OpenSSL 1.1.0.

### Список змін

| Версія | Опис |
|--------|---------------------------------------- ------------------|
| 7.2.0 | Доданий `security_levels`. Потрібно OpenSSL u003d 1.1.0. |

### Примітки

> **Примітка**: Оскільки `ssl://` - це транспортний транспорт
> протокол для обгорток [`https://`](wrappers.http.md) та
> [`ftps://`](wrappers.ftp.md), то будь-які опції контексту, які
> застосовуються до `ssl://` будуть також застосовуватись до `https://` та
> `ftps://`.

> **Примітка**: щоб була доступна можливість вказати ім'я сервера
> (SNI, Server Name Indication), PHP має бути скомпільований з OpenSSL
> 0.9.8j або пізніше. Використовуйте константу
> **`OPENSSL_TLSEXT_SERVER_NAME`** щоб визначити, чи підтримується
> SNI.

### Дивіться також

- [Контекстні опції сокету](context.socket.md)
