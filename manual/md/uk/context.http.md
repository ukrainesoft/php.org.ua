- [« Контекстні опції сокету](context.socket.md)
- [Параметри контексту FTP»] (context.ftp.md)

- [PHP Manual](index.md)
- [Контекстні опції та параметри](context.md)
- Список опцій контексту HTTP

# Опції контексту HTTP

Опції контексту HTTP - Список опцій контексту HTTP

### Опис

Опції контексту для транспортних протоколів `http://` та `https://`.

### Опції

`method` string
**`GET`**, **`POST`** або будь-який інший метод HTTP, підтримуваний
віддаленим сервером.

За промовчанням **`GET`**.

`header` array або string
Додаткові заголовки для надсилання разом із запитом. Значення у цій
опції будуть перевизначати інші значення (такі як User-agent:,
`Host:` та `Authentication:`), навіть при наступних переадресаціях
`Location:`. Таким чином, не рекомендується встановлювати заголовок
`Host:`, якщо увімкнено параметр `follow_location`.

`user_agent` string
Значення для надсилання разом із заголовком `User-Agent:`. Це значення
буде використовуватися, якщо заголовок user-agent *не* було вказано в опції
контексту `header` вище.

За замовчуванням використовується значення директиви
[user_agent](filesystem.configuration.md#ini.user-agent) з файлу
`php.ini`.

`content` string
Додаткові дані для надсилання після заголовків. Зазвичай використовується
із запитами POST та PUT.

`proxy` string
URI, який вказує адресу проксі-сервера. (Наприклад,
`tcp://proxy.example.com:5100`).

`request_fulluri` bool
Коли встановлено в **`true`**, весь URI буде використаний при
формуванні запиту. (Наприклад,
`GET http://www.example.com/path/to/file.md HTTP/1.0`).
Хоча це нестандартний формат запиту, деякі проксі-сервери вимагають
його.

За промовчанням **false**.

`follow_location` int
Наслідувати переадресації заголовка `Location`. Для відключення встановіть
значення "0".

Типово `1`.

`max_redirects` int
Максимальна кількість переадресацій, якою можна наслідувати. Значення
`1` або менше означає, що жодних переадресацій не буде зроблено.

Типово `20`.

`protocol_version` float
Версія протоколу HTTP.

За замовчуванням `1.1` починаючи з PHP 8.0.0; до цієї версії значення по
замовчуванням було `1.0`.

`timeout` float
Час очікування на читання в секундах, вказаний у вигляді числа з плаваючою
точкою (float), наприклад, `10.5`.

За замовчуванням використовується значення директиви
[default_socket_timeout](filesystem.configuration.md#ini.default-socket-timeout)
із файлу `php.ini`.

`ignore_errors` bool
Вийняти вміст навіть за неуспішних статусів завершення.

За промовчанням **false**.

### Приклади

**Приклад #1 Вийняти сторінку та надіслати дані методом POST**

` <?php$postdata u003d http_build_query(    array(        'var1' u003d> 'некоторое содержимое',        'var2' u003d> 'doh'    ));$opts u003d array('http' u003d>    array(        'method'  u003d> ' POST',         ¦                                     ¦¦ ://example.com/submit.php', false, $context);?> `

**Приклад #2 Ігнорувати переадресації, але витягти заголовки та
вміст**

` <?php$url u003d "http://www.example.org/header.php";$opts u003d array('http' u003d>    array(       'method' u003d> 'GET',     0',        'ignore_errors' u003d> '1'     ));$context u003d stream_context_create($opts);$stream u003d fopen($url, 'r', false, | / метаданні про потоціvar_dump(stream_get_meta_data($stream));// актуальна інформація за посилання $urlvar_dump(stream_get_contents($stream));fclose($stream);?> `

### Примітки

> **Примітка**: **Опції контексту нижчого потоку в сокеті**
> Додаткові опції контексту можуть підтримуватися [нижчим
> транспортним протоколом](transports.inet.md). Для потоків `http://`,
> це стосується опцій контексту для транспортного протоколу `tcp://`.
> Для потоків `https://`, це відноситься до опцій контексту для
> транспортного протоколу `ssl://`.

> **Примітка**: **Рядок статусу HTTP**
> Коли ця обгортка потоку слідує за переадресацією, `wrapper_data`,
> повертається функцією
> [stream_get_meta_data()](function.stream-get-meta-data.md),
> необов'язково містить рядок статусу HTTP, який насправді
> відноситься до змісту даних за індексом `0`.
>
> array (
> 'wrapper_data' u003d>
> array (
> 0 u003d> 'HTTP/1.0 301 Moved Permanently',
> 1 u003d> 'Cache-Control: no-cache',
> 2 u003d> 'Connection: close',
> 3 u003d> 'Location: http://example.com/foo.jpg',
> 4 u003d> 'HTTP/1.1 200 OK',
> ...
>
> Перший запит повернув код `301` (постійне перенаправлення), так що
> обгортка потоку автоматично послідувала цьому перенаправленню, щоб
> отримати відповідь `200` (індекс u003d `4`).

### Дивіться також

- [http://](wrappers.http.md)
- [Контекстні опції сокету](context.socket.md)
- [Опції контексту SSL](context.ssl.md)
