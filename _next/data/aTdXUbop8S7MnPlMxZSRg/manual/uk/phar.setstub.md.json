{"pageProps":{"page":{"slug":"phar.setstub.md","content":"# Phar::setStub\n\n(PHP 5 >= 5.3.0, PHP 7, PHP 8, PECL phar >= 1.0.0)\n\nPhar::setStub — Встановити завантажувач або завантажувальну заглушку в Phar-архів\n\n### Опис\n\n```methodsynopsis\npublic Phar::setStub(resource|string $stub, int $length = -1): bool\n```\n\n> **Зауваження** :\n> \n> Для коректної роботи з об'єктами [Phar](class.phar.md) цьому методу необхідне встановлення значення php.ini `phar.readonly`в . В іншому випадку, буде викинуто виняток [PharException](class.pharexception.md)\n\nЦей метод використовується для додавання початкової завантажувальної заглушки PHP (PHP bootstrap loader stub) до нового Phar-архіву або для заміни вже існуючого завантажувальної заглушки.\n\nЗавантажувач заглушки використовується при підключенні Phar-архіву за допомогою included:\n\n```php\n<?php\ninclude 'myphar.phar';\n?>\n```\n\nЗавантажувач недоступний, коли архів вмикається з використанням обгортки `phar`, як у прикладі нижче:\n\n```php\n<?php\ninclude 'phar://myphar.phar/somefile.php';\n?>\n```\n\n### Список параметрів\n\n`stub`\n\nРядок, або відкритий ресурс потоку.\n\n`length`\n\n### Значення, що повертаються\n\nПовертає **`true`** у разі успішного виконання або \\*\\*`false`\\*\\*в случае возникновения ошибки.\n\n### Помилки\n\nВикидається виняток [UnexpectedValueException](class.unexpectedvalueexception.md), якщо [phar.readonly](phar.configuration.md#ini.phar.readonly) дозволено у php.ini. У разі проблем із записом на диск буде викинуто виняток [PharException](class.pharexception.md)\n\n### список змін\n\n| Версия | Опис |\n| --- | --- |\n| 8.3.0 | Виклик методу **Phar::setStub()** з ресурсом (resource) та параметром `length` тепер є застарілим. Такі дзвінки повинні бути замінені на: `$phar->setStub(stream_get_contents($resource));` |\n\n### Приклади\n\n**Приклад #1 Приклад використання** Phar::setStub()\\*\\*\\*\\*\n\n```php\n<?php\ntry {\n    $p = new Phar(dirname(__FILE__) . '/brandnewphar.phar', 0, 'brandnewphar.phar');\n    $p['a.php'] = '<?php var_dump(\"Hello\");';\n    $p->setStub('<?php var_dump(\"First\"); Phar::mapPhar(\"brandnewphar.phar\"); __HALT_COMPILER(); ?>');\n    include 'phar://brandnewphar.phar/a.php';\n    var_dump($p->getStub());\n    $p['b.php'] = '<?php var_dump(\"World\");';\n    $p->setStub('<?php var_dump(\"Second\"); Phar::mapPhar(\"brandnewphar.phar\"); __HALT_COMPILER(); ?>');\n    include 'phar://brandnewphar.phar/b.php';\n    var_dump($p->getStub());\n} catch (Exception $e) {\n    echo 'Операции записи на brandnewphar.phar завершились неудачей: ', $e;\n}\n?>\n```\n\nРезультат виконання наведеного прикладу:\n\n```\nstring(5) \"Hello\"\nstring(82) \"<?php var_dump(\"First\"); Phar::mapPhar(\"brandnewphar.phar\"); __HALT_COMPILER(); ?>\"\nstring(5) \"World\"\nstring(83) \"<?php var_dump(\"Second\"); Phar::mapPhar(\"brandnewphar.phar\"); __HALT_COMPILER(); ?>\"\n```\n\n### Дивіться також\n\n-   [Phar::getStub()](phar.getstub.md) \\- Отримати завантажувач PHP або завантажувач заглушки Phar-архіву\n-   [Phar::createDefaultStub()](phar.createdefaultstub.md) \\- Створити заглушку у форматі phar-архіву\n","title":"Phar::setStub","contentType":2,"navigation":[{"phar.setsignaturealgorithm.md":"« Phar::setSignatureAlgorithm"},{"phar.startbuffering.md":"Phar::startBuffering »"},{"index.md":"PHP Manual"},{"class.phar.md":"Phar"}]}},"__N_SSG":true}