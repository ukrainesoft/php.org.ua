{"pageProps":{"page":{"slug":"oci8.test.md","content":"## Тестування\n\nНабір тестів для OCI8 знаходиться у директорії ext/oci8/tests. Після прогону цих тестів, у цій директорії також виявляться файли журналів подій і помилок, що відбулися.\n\nПеред запуском тестів необхідно відредагувати файл details.inc і встановити значення змінним $user, $password і рядку з'єднання $dbase. Набір тестів OCI8 розроблявся з використанням облікового запису `SYSTEM`. Деякі тести не будуть виконуватися, якщо у користувача, що тестує, немає аналогічних прав доступу.\n\nДля тестування функції Oracle створення пулів з'єднань (Database Resident Connection Pooling) необхідно встановити змінну $test\\_drcp у **`true`**, а також переконайтеся, що у рядку з'єднання встановлено відповідну адресу сервера DRCP.\n\nВ якості альтернативи для редагування файлу details.inc можна задати значення змінним оточення, наприклад:\n\n```\n$ export PHP_OCI8_TEST_USER=system\n    $ export PHP_OCI8_TEST_PASS=oracle\n    $ export PHP_OCI8_TEST_DB=localhost/XE\n    $ export PHP_OCI8_TEST_DRCP=FALSE\n```\n\nЗауважте, що в деяких оболонках ці змінні можуть неправильно транслюватися в PHP процес, і в тестах виникатимуть помилки підключення до бази даних. Будьте обережні під час використання цього методу налаштування модуля.\n\nДалі необхідно встановити оточення бази даних Oracle. Якщо ви використовуєте PHP на тих же машинах, що й Oracle Database, ви можете запустити:\n\n```\n$ . /usr/local/bin/oraenv\n```\n\nДля Oracle 11*g*R2 XE:\n\n```\n$ . /u01/app/oracle/product/11.2.0/xe/bin/oracle_env.sh\n```\n\nДеякі оболонки вимагають, щоб у php.ini параметр variables\\_order содержал литеру`E`, наПриклад:\n\n```\nvariables_order = \"EGPCS\"\n```\n\nЗапуск всіх тестів PHP можна здійснити командою:\n\n```\n$ cd your_php_src_directory\n    $ make test\n```\n\nабо можна запустити тільки OCI8 тести:\n\n```\n$ cd your_php_src_directory\n    $ make test TESTS=ext/oci8\n```\n\nПісля завершення тестування перегляньте журнали на наявність помилок. На слабких машинах час виконання деяких тестів може перевищити значення часу очікування у файлі run-tests.php. Щоб це виправити, задайте змінної оточення `TEST_TIMEOUT`значение побольше (значение в секундах).\n\nНа швидких обчислювальних системах з локальною базою даних, розрахованих на невеликі навантаження (наприклад, Oracle 11*g*R2 XE) деякі тести можуть викликати ORA-12516 або ORA-12520 помилки. Для їх запобігання необхідно збільшити значення параметра бази даних `PROCESSES` за інструкцією нижче:\n\nПідключитися до бази даних у ролі суперкористувача:\n\n```\n$ su - oracle\n```\n\nЗадати необхідне оточення за допомогою сценаріїв oracle\\_env.sh або oraenv, як описано вище.\n\nЗапустити утиліту командного рядка SQL\\*Plus і збільшити значення `PROCESSES`\n\n```\n$ sqlplus / as sysdba\n    SQL> alter system set processes=100 scope=spfile\n```\n\nПерезапустити базу даних:\n\n```\nSQL> startup force\n```\n","title":"Тестування","contentType":2,"navigation":[{"oci8.installation.md":"« Встановлення"},{"oci8.configuration.md":"Налаштування під час виконання »"},{"index.md":"PHP Manual"},{"oci8.setup.md":"Встановлення та налаштування"}]}},"__N_SSG":true}