{"pageProps":{"page":{"slug":"gearmanclient.jobstatus.md","content":"# GearmanClient::jobStatus\n\n# gearman\\_job\\_status\n\n(PECL gearman >= 0.5.0)\n\nGearmanClient::jobStatus -- gearman\\_job\\_status — отримання статусу виконання фонового завдання\n\n### Опис\n\nОб'єктно-орієнтований стиль (метод):\n\n```methodsynopsis\npublic GearmanClient::jobStatus(string $job_handle): array\n```\n\nОтримує стан виконання завдання, запущеного у фоновому режимі. Інформація про стан включає дані про те, що завдання відомо обробнику, чи виконується завдання в даний момент, а також відсоток оброблених даних.\n\n### Список параметрів\n\n`job_handle`\n\nДескриптор завдання, який надається сервером Gearman\n\n### Значення, що повертаються\n\nМасив, що містить інформацію про завдання, яке відповідає заданому дескриптору завдання. Перший елемент масиву вказує, чи обробник знає про це завдання. Другий елемент вказує, чи виконується завдання на даний момент. Третій та четвертий елементи відповідають за частку виконаної роботи та загальний обсяг даних, відповідно.\n\n### Приклади\n\n**Приклад #1 Моніторинг процесу обробки завдання, що довго виконується у фоновому режимі**\n\n```php\n<?php\n\n/* создаём клиента */\n$gmclient= new GearmanClient();\n\n/* добавляем сервер по умолчанию */\n$gmclient->addServer();\n\n/* запускаем клиент */\n$job_handle = $gmclient->doBackground(\"reverse\", \"this is a test\");\n\nif ($gmclient->returnCode() != GEARMAN_SUCCESS)\n{\n  echo \"Не удалось выполнить задание\\n\";\n  exit;\n}\n\n$done = false;\ndo\n{\n   sleep(3);\n   $stat = $gmclient->jobStatus($job_handle);\n   if (!$stat[0]) // задание известно обработчику, но ещё не завершено\n      $done = true;\n   echo \"Выполняется: \" . ($stat[1] ? \"true\" : \"false\") . \", обработано: \" . $stat[2] . \", всего: \" . $stat[3] . \"\\n\";\n}\nwhile(!$done);\n\necho \"завершено!\\n\";\n\n?>\n```\n\nВисновок наведеного прикладу буде схожим на:\n\n```\nВыполняется: true, обработано: 3, всего: 14\nВыполняется: true, обработано: 6, всего: 14\nВыполняется: true, обработано: 9, всего: 14\nВыполняется: true, обработано: 12, всего: 14\nВыполняется: false, обработано: 0, всего: 0\nзавершено!\n```\n\n### Дивіться також\n\n-   [GearmanClient::doStatus()](gearmanclient.dostatus.md) \\- Отримання статусу завдання, що виконується\n","title":"GearmanClient::jobStatus","contentType":2,"navigation":[{"gearmanclient.geterrno.md":"« GearmanClient::getErrno"},{"gearmanclient.ping.md":"GearmanClient::ping »"},{"index.md":"PHP Manual"},{"class.gearmanclient.md":"GearmanClient"}]}},"__N_SSG":true}