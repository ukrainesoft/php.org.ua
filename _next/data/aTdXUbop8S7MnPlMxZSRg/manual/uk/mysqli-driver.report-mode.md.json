{"pageProps":{"page":{"slug":"mysqli-driver.report-mode.md","content":"# mysqli\\_driver::$report\\_mode\n\n# mysqli\\_report\n\n(PHP 5, PHP 7, PHP 8)\n\nmysqli\\_driver::$report\\_mode -- mysqli\\_report — Встановлює режим звіту про помилки mysqli\n\n### Опис\n\nОб'єктно-орієнтований стиль\n\nint[$mysqli\\_driver->report\\_mode](mysqli-driver.report-mode.md)\n\nПроцедурний стиль\n\n```methodsynopsis\nmysqli_report(int $flags): bool\n```\n\nЗалежно від прапорів, функція встановлює режим звіту про помилки mysqli на виключення, попередження чи відсутність. Якщо встановлено значення **`MYSQLI_REPORT_ALL`** або **`MYSQLI_REPORT_INDEX`**, функція також інформуватиме про запити, які не використовують індекс (або використовують неправильний індекс).\n\nНачиная с PHP 8.1.0, по умолчанию установлено значение`MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT`. Раніше воно було **`MYSQLI_REPORT_OFF`**\n\n### Список параметрів\n\n`flags`\n\n**Прапори, що підтримуються**\n\n| Имя | Опис |\n| --- | --- |\n| **`MYSQLI_REPORT_OFF`** | Вимкнути протоколювання |\n| **`MYSQLI_REPORT_ERROR`** | Заносити до протоколу помилки викликів функцій mysqli |\n| **`MYSQLI_REPORT_STRICT`** | Замість повідомлень про помилки викидати виняток [mysqli\\_sql\\_exception](class.mysqli-sql-exception.md) |\n| **`MYSQLI_REPORT_INDEX`** | Заносити до протоколу факти використання у запитах невірного індексу (або коли індекс не використовується взагалі) |\n| **`MYSQLI_REPORT_ALL`** | Увімкнути всі налаштування (заносити до протоколу всі події) |\n\n### Значення, що повертаються\n\nПовертає **`true`**\n\n### список змін\n\n| Версия | Опис |\n| --- | --- |\n| 8.1.0 | Тепер за замовчуванням встановлено значення \\`MYSQLI\\_REPORT\\_ERROR |\n\n### Приклади\n\n**Приклад #1 Об'єктно-орієнтований стиль**\n\n```php\n<?php\n\n/* включение протоколирования */\n$driver = new mysqli_driver();\n$driver->report_mode = MYSQLI_REPORT_ALL;\n\ntry {\n    /* если получится подключится, будет выброшено исключение mysqli_sql_exception */\n    $mysqli = new mysqli(\"localhost\", \"my_user\", \"my_password\", \"my_db\");\n\n    /* этот запрос должен сообщить об ошибке */\n    $result = $mysqli->query(\"SELECT Name FROM Nonexistingtable WHERE population > 50000\");\n\n    /* этот запрос должен сообщить о неверном индексе, если у столбца population нет индекса */\n    $result = $mysqli->query(\"SELECT Name FROM City WHERE population > 50000\");\n} catch (mysqli_sql_exception $e) {\n    error_log($e->__toString());\n}\n```\n\n**Приклад #2 Процедурний стиль**\n\n```php\n<?php\n\n/* включение протоколирования */\nmysqli_report(MYSQLI_REPORT_ALL);\n\ntry {\n    /* Если соединение завершилось с ошибкой, будет выброшено исключение mysqli_sql_exception */\n    $link = mysqli_connect(\"localhost\", \"my_user\", \"my_password\", \"my_db\");\n\n    /* этот запрос должен сообщить об ошибке */\n    $result = mysqli_query($link, \"SELECT Name FROM Nonexistingtable WHERE population > 50000\");\n\n    /* этот запрос должен сообщить о неверном индексе, если у столбца population нет индекса */\n    $result = mysqli_query($link, \"SELECT Name FROM City WHERE population > 50000\");\n} catch (mysqli_sql_exception $e) {\n    error_log($e->__toString());\n}\n```\n\n**Приклад #3 Звіт про помилки, крім помилок неправильного індексу**\n\n```php\n<?php\n\n/* включение протоколирования */\nmysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);\n\ntry {\n    /* если получится подключится, будет выброшено исключение mysqli_sql_exception */\n    $mysqli = new mysqli(\"localhost\", \"my_user\", \"my_password\", \"my_db\");\n\n    /* этот запрос должен сообщить об ошибке */\n    $result = $mysqli->query(\"SELECT Name FROM Nonexistingtable WHERE population > 50000\");\n\n    /* это НЕ БУДЕТ сообщать об ошибках, даже если индекс недоступен */\n    $result = $mysqli->query(\"SELECT Name FROM City WHERE population > 50000\");\n} catch (mysqli_sql_exception $e) {\n    error_log($e->__toString());\n}\n```\n\n### Дивіться також\n\n-   [mysqli\\_sql\\_exception](class.mysqli-sql-exception.md)\n-   [set\\_exception\\_handler()](function.set-exception-handler.md) \\- Задає користувальницький обробник винятків\n-   [error\\_reporting()](function.error-reporting.md) \\- Встановлює, які помилки PHP потраплять у звіт\n","title":"mysqli\\_driver::$report\\_mode","contentType":2,"navigation":[{"mysqli-driver.embedded-server-start.md":"« mysqli\\_driver::embedded\\_server\\_start"},{"class.mysqli-warning.md":"mysqli\\_warning »"},{"index.md":"PHP Manual"},{"class.mysqli-driver.md":"mysqli\\_driver"}]}},"__N_SSG":true}