{"pageProps":{"page":{"slug":"solrquery.collapse.md","content":"# SolrQuery::collapse\n\n(No version information available, might only be in Git)\n\nSolrQuery::collapse — Згортає набір результатів до одного документа на групу\n\n### Опис\n\n```methodsynopsis\npublic SolrQuery::collapse(SolrCollapseFunction $collapseFunction): SolrQuery\n```\n\nЗвертає набір результатів в один документ для кожної групи, перш ніж він пересилає набір результатів іншим компонентам пошуку.\n\nТаким чином, усі наступні компоненти (фасетування, виділення тощо) будуть працювати зі згорнутим набором результатів.\n\n### Список параметрів\n\n`collapseFunction`\n\n### Значення, що повертаються\n\nПовертає поточний об'єкт [SolrQuery](class.solrquery.md)\n\n### Приклади\n\n**Приклад #1 Приклад використання** SolrQuery::collapse()\\*\\*\\*\\*\n\n```php\n<?php\n\ninclude \"bootstrap.php\";\n\n$options = array\n(\n        'hostname' => SOLR_SERVER_HOSTNAME,\n        'login'    => SOLR_SERVER_USERNAME,\n        'password' => SOLR_SERVER_PASSWORD,\n        'port'     => SOLR_SERVER_PORT,\n        'path'     => SOLR_SERVER_PATH\n);\n\n$client = new SolrClient($options);\n\n$query = new SolrQuery('*:*');\n\n$collapseFunction = new SolrCollapseFunction('manu_id_s');\n\n$collapseFunction\n->setSize(2)\n->setNullPolicy(SolrCollapseFunction::NULLPOLICY_IGNORE);\n\n$query\n->collapse($collapseFunction)\n->setRows(4);\n\n$queryResponse = $client->query($query);\n\n$response = $queryResponse->getResponse();\n\nprint_r($response);\n\n?>\n```\n\nВисновок наведеного прикладу буде схожим на:\n\n```\nSolrObject Object\n(\n    [responseHeader] => SolrObject Object\n        (\n            [status] => 0\n            [QTime] => 1\n            [params] => SolrObject Object\n                (\n                    [q] => *:*\n                    [indent] => on\n                    [fq] => {!collapse field=manu_id_s size=2 nullPolicy=ignore}\n                    [rows] => 4\n                    [version] => 2.2\n                    [wt] => xml\n                )\n\n        )\n\n    [response] => SolrObject Object\n        (\n            [numFound] => 14\n            [start] => 0\n            [docs] => Array\n                (\n                    [0] => SolrObject Object\n                        (\n                            [id] => SP2514N\n                            [name] => Array\n                                (\n                                    [0] => Samsung SpinPoint P120 SP2514N - hard drive - 250 GB - ATA-133\n                                )\n\n                            [manu] => Array\n                                (\n                                    [0] => Samsung Electronics Co. Ltd.\n                                )\n\n                            [manu_id_s] => samsung\n                            [cat] => Array\n                                (\n                                    [0] => electronics\n                                    [1] => hard drive\n                                )\n\n                            [features] => Array\n                                (\n                                    [0] => 7200RPM, 8MB cache, IDE Ultra ATA-133\n                                    [1] => NoiseGuard, SilentSeek technology, Fluid Dynamic Bearing (FDB) motor\n                                )\n\n                            [price] => Array\n                                (\n                                    [0] => 92\n                                )\n\n                            [popularity] => Array\n                                (\n                                    [0] => 6\n                                )\n\n                            [inStock] => Array\n                                (\n                                    [0] => 1\n                                )\n\n                            [manufacturedate_dt] => 2006-02-13T15:26:37Z\n                            [store] => Array\n                                (\n                                    [0] => 35.0752,-97.032\n                                )\n\n                            [_version_] => 1510294336412057600\n                        )\n\n                    [1] => SolrObject Object\n                        (\n                            [id] => 6H500F0\n                            [name] => Array\n                                (\n                                    [0] => Maxtor DiamondMax 11 - hard drive - 500 GB - SATA-300\n                                )\n\n                            [manu] => Array\n                                (\n                                    [0] => Maxtor Corp.\n                                )\n\n                            [manu_id_s] => maxtor\n                            [cat] => Array\n                                (\n                                    [0] => electronics\n                                    [1] => hard drive\n                                )\n\n                            [features] => Array\n                                (\n                                    [0] => SATA 3.0Gb/s, NCQ\n                                    [1] => 8.5ms seek\n                                    [2] => 16MB cache\n                                )\n\n                            [price] => Array\n                                (\n                                    [0] => 350\n                                )\n\n                            [popularity] => Array\n                                (\n                                    [0] => 6\n                                )\n\n                            [inStock] => Array\n                                (\n                                    [0] => 1\n                                )\n\n                            [store] => Array\n                                (\n                                    [0] => 45.17614,-93.87341\n                                )\n\n                            [manufacturedate_dt] => 2006-02-13T15:26:37Z\n                            [_version_] => 1510294336449806336\n                        )\n\n                    [2] => SolrObject Object\n                        (\n                            [id] => F8V7067-APL-KIT\n                            [name] => Array\n                                (\n                                    [0] => Belkin Mobile Power Cord for iPod w/ Dock\n                                )\n\n                            [manu] => Array\n                                (\n                                    [0] => Belkin\n                                )\n\n                            [manu_id_s] => belkin\n                            [cat] => Array\n                                (\n                                    [0] => electronics\n                                    [1] => connector\n                                )\n\n                            [features] => Array\n                                (\n                                    [0] => car power adapter, white\n                                )\n\n                            [weight] => Array\n                                (\n                                    [0] => 4\n                                )\n\n                            [price] => Array\n                                (\n                                    [0] => 19.95\n                                )\n\n                            [popularity] => Array\n                                (\n                                    [0] => 1\n                                )\n\n                            [inStock] => Array\n                                (\n                                    [0] =>\n                                )\n\n                            [store] => Array\n                                (\n                                    [0] => 45.18014,-93.87741\n                                )\n\n                            [manufacturedate_dt] => 2005-08-01T16:30:25Z\n                            [_version_] => 1510294336458194944\n                        )\n\n                    [3] => SolrObject Object\n                        (\n                            [id] => MA147LL/A\n                            [name] => Array\n                                (\n                                    [0] => Apple 60 GB iPod with Video Playback Black\n                                )\n\n                            [manu] => Array\n                                (\n                                    [0] => Apple Computer Inc.\n                                )\n\n                            [manu_id_s] => apple\n                            [cat] => Array\n                                (\n                                    [0] => electronics\n                                    [1] => music\n                                )\n\n                            [features] => Array\n                                (\n                                    [0] => iTunes, Podcasts, Audiobooks\n                                    [1] => Stores up to 15,000 songs, 25,000 photos, or 150 hours of video\n                                    [2] => 2.5-inch, 320x240 color TFT LCD display with LED backlight\n                                    [3] => Up to 20 hours of battery life\n                                    [4] => Plays AAC, MP3, WAV, AIFF, Audible, Apple Lossless, H.264 video\n                                    [5] => Notes, Calendar, Phone book, Hold button, Date display, Photo wallet, Built-in games, JPEG photo playback, Upgradeable firmware, USB 2.0 compatibility, Playback speed control, Rechargeable capability, Battery level indication\n                                )\n\n                            [includes] => Array\n                                (\n                                    [0] => earbud headphones, USB cable\n                                )\n\n                            [weight] => Array\n                                (\n                                    [0] => 5.5\n                                )\n\n                            [price] => Array\n                                (\n                                    [0] => 399\n                                )\n\n                            [popularity] => Array\n                                (\n                                    [0] => 10\n                                )\n\n                            [inStock] => Array\n                                (\n                                    [0] => 1\n                                )\n\n                            [store] => Array\n                                (\n                                    [0] => 37.7752,-100.0232\n                                )\n\n                            [manufacturedate_dt] => 2005-10-12T08:00:00Z\n                            [_version_] => 1510294336562003968\n                        )\n\n                )\n\n        )\n\n)\n```\n","title":"SolrQuery::collapse","contentType":2,"navigation":[{"solrquery.addstatsfield.md":"« SolrQuery::addStatsField"},{"solrquery.construct.md":"SolrQuery::\\_\\_construct »"},{"index.md":"PHP Manual"},{"class.solrquery.md":"SolrQuery"}]}},"__N_SSG":true}