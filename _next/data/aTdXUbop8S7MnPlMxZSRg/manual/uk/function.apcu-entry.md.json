{"pageProps":{"page":{"slug":"function.apcu-entry.md","content":"# apcu\\_entry\n\n(PECL apcu >= 5.1.0)\n\napcu\\_entry — Автоматичне вилучення або створення запису в кеші\n\n### Опис\n\n```methodsynopsis\napcu_entry(string $key, callable $generator, int $ttl = 0): mixed\n```\n\nАвтоматично намагається знайти запис із заданим ключем `key`. Якщо не може, то викликається генератор `generator` і йому передається ключ `key` як єдиний аргумент. Згенероване значення заноситься в кеш із зазначеним `ttl` та повертається.\n\n> **Зауваження**: Коли контроль передається **apcu\\_entry()**, проводиться ексклюзивне блокування кешу, яке знімається після завершення роботи **apcu\\_entry()**: це призводить до того, що тіло генератора `generator` міститься в критичну секцію, забороняючи двом процесам запустити виконання однакового коду конкурентно. До того ж, це призводить до заборони конкурентного запуску будь-яких інших функцій APCu, оскільки вони виставлятимуть те ж саме блокування.\n\n**Увага**\n\nЄдина функція APCu, яку можна безпечно викликати у генераторі `generator` - це **apcu\\_entry()**\n\n### Список параметрів\n\n`key`\n\nІдентифікатор запису\n\n`generator`\n\nCallback-функция, принимающая один параметр`key` і повертає значення для кешування.\n\n`ttl`\n\nВремя жизни; переменная`var` буде зберігатися протягом `ttl` секунд. Як тільки `ttl`секунд пройдут, переменная будет удалена из кеша (при следующем запросе). Если параметр`ttl`не задан (или`ttl`задан как ), значення буде зберігатися доки не буде видалено явно, або з технічної причини (очищення кешу, перезапуск і т.д.)\n\n### Значення, що повертаються\n\nПовертає закешоване значення\n\n### Приклади\n\n**Приклад #1 Приклад використання** apcu\\_entry()\\*\\*\\*\\*\n\n```php\n<?php\n$config = apcu_entry(\"config\", function($key) {\n return [\n   \"fruit\" => apcu_entry(\"config.fruit\", function($key){\n     return [\n       \"apples\",\n       \"pears\"\n     ];\n   }),\n   \"people\" => apcu_entry(\"config.people\", function($key){\n     return [\n      \"bob\",\n      \"joe\",\n      \"niki\"\n     ];\n   })\n ];\n});\n\nvar_dump($config);\n?>\n```\n\nРезультат виконання наведеного прикладу:\n\n```\narray(2) {\n  [\"fruit\"]=>\n  array(2) {\n    [0]=>\n    string(6) \"apples\"\n    [1]=>\n    string(5) \"pears\"\n  }\n  [\"people\"]=>\n  array(3) {\n    [0]=>\n    string(3) \"bob\"\n    [1]=>\n    string(3) \"joe\"\n    [2]=>\n    string(4) \"niki\"\n  }\n}\n```\n\n### Дивіться також\n\n-   [apcu\\_store()](function.apcu-store.md) \\- Кешує змінну\n-   [apcu\\_fetch()](function.apcu-fetch.md) \\- Витягує з кеша збережену змінну\n-   [apcu\\_delete()](function.apcu-delete.md) \\- Видаляє збережене значення з кешу\n","title":"apcu\\_entry","contentType":2,"navigation":[{"function.apcu-enabled.md":"« apcu\\_enabled"},{"function.apcu-exists.md":"apcu\\_exists »"},{"index.md":"PHP Manual"},{"ref.apcu.md":"Функції APCu"}]}},"__N_SSG":true}