{"pageProps":{"page":{"slug":"function.db2-bind-param.md","content":"# db2\\_bind\\_param\n\n(PECL ibm\\_db2 >= 1.0.0)\n\ndb2\\_bind\\_param — Зв'язує змінну PHP із параметром SQL-виразу\n\n### Опис\n\n```methodsynopsis\ndb2_bind_param(    resource $stmt,    int $parameter_number,    string $variable_name,    int $parameter_type = DB2_PARAM_IN,    int $data_type = 0,    int $precision = -1,    int $scale = 0): bool\n```\n\nЗв'язує змінну PHP з параметром SQL-вираження у виразному ресурсі, що повертається [db2\\_prepare()](function.db2-prepare.md). Ця функція дає більший контроль над типом параметра, типом даних, точністю та масштабом для параметра, ніж проста передача змінної як частини необов'язкового вхідного масиву [db2\\_execute()](function.db2-execute.md)\n\n### Список параметрів\n\n`stmt`\n\nПідготовлений вираз, що повертається [db2\\_prepare()](function.db2-prepare.md)\n\n`parameter_number`\n\nЗадає позицію параметра, що нумерується з 1 у підготовленому виразі.\n\n`variable_name`\n\nСтрока, определяющая имя переменной PHP для привязки к параметру, заданному`parameter_number`\n\n`parameter_type`\n\nКонстанта, що визначає, чи має змінна PHP бути прив'язана до параметра SQL як вхідний параметр (`DB2_PARAM_IN`), вихідний параметр (`DB2_PARAM_OUT`) або як параметр, що приймає введення та повертає висновок (`DB2_PARAM_INOUT`). Щоб уникнути перевантаження пам'яті, можна також вказати `DB2_PARAM_FILE`, щоб прив'язати змінну PHP до імені файлу, який містить дані великого об'єкта (BLOB, CLOB або DBCLOB).\n\n`data_type`\n\nКонстанта, що вказує тип даних SQL, з яким має бути пов'язана змінна PHP: `DB2_BINARY` `DB2_CHAR` `DB2_DOUBLE`или`DB2_LONG`\n\n`precision`\n\nЗадає точність, з якою змінна має бути прив'язана до бази даних. Цей параметр також можна використовувати для отримання вихідних значень XML зі збережених процедур. Невід'ємне значення вказує максимальний розмір даних XML, які будуть вилучені з бази даних. Якщо цей параметр не використовується, для отримання вихідного значення XML із процедури, що зберігається, передбачається значення за замовчуванням 1 МБ.\n\n`scale`\n\nЗадає масштаб, з яким змінна має бути прив'язана до бази даних.\n\n### Значення, що повертаються\n\nПовертає **`true`** у разі успішного виконання або \\*\\*`false`\\*\\*в случае возникновения ошибки.\n\n### Приклади\n\n**Приклад #1 Прив'язка змінних PHP до підготовленого виразу**\n\nSQL-вираз у цьому прикладі використовує два вхідні параметри в пропозиції WHERE. Викликається **db2\\_bind\\_param()**, щоб зв'язати дві змінні PHP із відповідними параметрами SQL. Зверніть увагу, що змінні PHP не потрібно оголошувати або надавати перед викликом **db2\\_bind\\_param()**; у цьому прикладі `$lower_limit` надається значення перед викликом **db2\\_bind\\_param()**, а`$upper_limit` надається значення після виклику **db2\\_bind\\_param()**. Перед викликом [db2\\_execute()](function.db2-execute.md) змінні мають бути пов'язані, а параметрам, що приймають введення, має бути присвоєно будь-яке значення . [db2\\_execute()](function.db2-execute.md)\n\n```php\n<?php\n\n$sql = 'SELECT name, breed, weight FROM animals\n    WHERE weight > ? AND weight < ?';\n$conn = db2_connect($database, $user, $password);\n$stmt = db2_prepare($conn, $sql);\n\n// Можно объявить переменную перед вызовом db2_bind_param()\n$lower_limit = 1;\n\ndb2_bind_param($stmt, 1, \"lower_limit\", DB2_PARAM_IN);\ndb2_bind_param($stmt, 2, \"upper_limit\", DB2_PARAM_IN);\n\n// Также можно объявить переменную после вызова db2_bind_param()\n$upper_limit = 15.0;\n\nif (db2_execute($stmt)) {\n    while ($row = db2_fetch_array($stmt)) {\n        print \"{$row[0]}, {$row[1]}, {$row[2]}\\n\";\n    }\n}\n?>\n```\n\nРезультат виконання наведеного прикладу:\n\n```\nPook, cat, 3.2\nRickety Ride, goat, 9.7\nPeaches, dog, 12.3\n```\n\n**Приклад #2 Виклик збережених процедур з параметрами IN та OUT**\n\nЗберігається процедура match\\_animal в даному прикладі приймає три різні параметри:\n\n1.  вхідний параметр (IN), який приймає ім'я першої тварини як вхідні дані\n    \n2.  параметр вводу-виводу (INOUT), який приймає ім'я другої тварини як вхідні дані та повертає рядок`TRUE`якщо тварина в базі даних збігається з цим ім'ям\n    \n3.  вихідний параметр (OUT), який повертає суму ваги двох ідентифікованих тварин\n    \n\nКрім того, процедура, що зберігається, повертає набір результатів, що складається з тварин, перерахованих в алфавітному порядку, починаючи з тварини, що відповідає вхідному значенню першого параметра, і закінчуючи тваринам, відповідним вхідному значенню другого параметра.\n\n```php\n<?php\n\n$sql = 'CALL match_animal(?, ?, ?)';\n$conn = db2_connect($database, $user, $password);\n$stmt = db2_prepare($conn, $sql);\n\n$name = \"Peaches\";\n$second_name = \"Rickety Ride\";\n$weight = 0;\n\ndb2_bind_param($stmt, 1, \"name\", DB2_PARAM_IN);\ndb2_bind_param($stmt, 2, \"second_name\", DB2_PARAM_INOUT);\ndb2_bind_param($stmt, 3, \"weight\", DB2_PARAM_OUT);\n\nprint \"Values of bound parameters _before_ CALL:\\n\";\nprint \"  1: {$name} 2: {$second_name} 3: {$weight}\\n\\n\";\n\nif (db2_execute($stmt)) {\n    print \"Values of bound parameters _after_ CALL:\\n\";\n    print \"  1: {$name} 2: {$second_name} 3: {$weight}\\n\\n\";\n\n    print \"Results:\\n\";\n    while ($row = db2_fetch_array($stmt)) {\n        print \"  {$row[0]}, {$row[1]}, {$row[2]}\\n\";\n    }\n}\n?>\n```\n\nРезультат виконання наведеного прикладу:\n\n```\nValues of bound parameters _before_ CALL:\n  1: Peaches 2: Rickety Ride 3: 0\n\nValues of bound parameters _after_ CALL:\n  1: Peaches 2: TRUE 3: 22\n\nResults:\n  Peaches, dog, 12.3\n  Pook, cat, 3.2\n  Rickety Ride, goat, 9.7\n```\n\n**Приклад #3 Вставлення великого двійкового об'єкта (BLOB) безпосередньо з файлу**\n\nДані великих об'єктів зазвичай зберігаються у файлах, таких як документи XML або аудіофайли. Замість того, щоб зчитувати весь файл у змінну PHP і потім пов'язувати цю змінну PHP з SQL-виразом, можна уникнути деяких накладних витрат на пам'ять, прив'язавши файл безпосередньо до вхідного параметра SQL-виразу. У цьому прикладі показано, як безпосередньо прив'язати файл до стовпця BLOB.\n\n```php\n<?php\n$stmt = db2_prepare($conn, \"INSERT INTO animal_pictures(picture) VALUES (?)\");\n\n$picture = \"/opt/albums/spook/grooming.jpg\";\n$rc = db2_bind_param($stmt, 1, \"picture\", DB2_PARAM_FILE);\n$rc = db2_execute($stmt);\n?>\n```\n\n### Дивіться також\n\n-   [db2\\_execute()](function.db2-execute.md) \\- Виконує підготовлений SQL-запит\n-   [db2\\_prepare()](function.db2-prepare.md) \\- готує SQL-запит до виконання\n","title":"db2\\_bind\\_param","contentType":2,"navigation":[{"function.db2-autocommit.md":"« db2\\_autocommit"},{"function.db2-client-info.md":"db2\\_client\\_info »"},{"index.md":"PHP Manual"},{"ref.ibm-db2.md":"Функції IBM DB2"}]}},"__N_SSG":true}