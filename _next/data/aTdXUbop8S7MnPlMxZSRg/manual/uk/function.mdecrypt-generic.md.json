{"pageProps":{"page":{"slug":"function.mdecrypt-generic.md","content":"# mdecrypt\\_generic\n\n(PHP 4 >= 4.0.2, PHP 5, PHP 7 < 7.2.0, PECL mcrypt >= 1.0.0)\n\nmdecrypt\\_generic - Дешифрування даних\n\n**Увага**\n\nЦя функція оголошена *застарілої* починаючи з PHP 7.1.0 і була *ВИДАЛЕНО* у версії PHP 7.2.0. Використовувати цю функцію не рекомендується.\n\n### Опис\n\n```methodsynopsis\nmdecrypt_generic(resource $td, string $data): string\n```\n\nФункція дешифрує дані. Зверніть увагу, що довжина рядка, що повертається, за фактом може бути більше довжини оригінального нешифрованого рядка. Це походить від того, що дані можуть доповнюватися.\n\n### Список параметрів\n\n`td`\n\nДескриптор шифрування, що повертається [mcrypt\\_module\\_open()](function.mcrypt-module-open.md)\n\n`data`\n\nЗашифровані дані.\n\n### Значення, що повертаються\n\nПовертає розшифрований рядок.\n\n### Приклади\n\n**Приклад #1 Приклад використання** mdecrypt\\_generic()\\*\\*\\*\\*\n\n```php\n<?php\n    /* Данные */\n    $key = 'Это очень длинный ключ. Сильно больше, чем нужен шифру.';\n    $plain_text = 'очень важные данные';\n\n    /* Открываем модуль и создаём инициализирующий вектор */\n    $td = mcrypt_module_open('des', '', 'ecb', '');\n    $key = substr($key, 0, mcrypt_enc_get_key_size($td));\n    $iv_size = mcrypt_enc_get_iv_size($td);\n    $iv = mcrypt_create_iv($iv_size, MCRYPT_RAND);\n\n    /* Инициализируем обработчик шифрования */\n    if (mcrypt_generic_init($td, $key, $iv) != -1) {\n\n        /* Шифруем данные */\n        $c_t = mcrypt_generic($td, $plain_text);\n        mcrypt_generic_deinit($td);\n\n        /* Переинициализируем буферы для дешифровки */\n        mcrypt_generic_init($td, $key, $iv);\n        $p_t = mdecrypt_generic($td, $c_t);\n\n        /* Убираем мусор */\n        mcrypt_generic_deinit($td);\n        mcrypt_module_close($td);\n    }\n\n    if (strncmp($p_t, $plain_text, strlen($plain_text)) == 0) {\n        echo \"ок\\n\";\n    } else {\n        echo \"ошибка\\n\";\n    }\n?>\n```\n\nПриклад вище показує, як перевірити, що дані до шифрування збігаються з даними після дешифрування. Вкрай важливо переініціалізувати буфери шифрування за допомогою [mcrypt\\_generic\\_init()](function.mcrypt-generic-init.md) перед дешифруванням даних.\n\nОбробник дешифрування завжди має ініціалізуватися за допомогою [mcrypt\\_generic\\_init()](function.mcrypt-generic-init.md) з ключем та ініціалізуючим вектором перед викликом функції. Як тільки шифрування завершено, необхідно звільнити буфери шифрування шляхом виклику функції [mcrypt\\_generic\\_deinit()](function.mcrypt-generic-deinit.md)Смотрите Приклад в описании функции[mcrypt\\_module\\_open()](function.mcrypt-module-open.md)\n\n### Дивіться також\n\n-   [mcrypt\\_generic()](function.mcrypt-generic.md) \\- Функція шифрує дані\n-   [mcrypt\\_generic\\_init()](function.mcrypt-generic-init.md) \\- Функція ініціалізує всі буфери, необхідні для шифрування\n-   [mcrypt\\_generic\\_deinit()](function.mcrypt-generic-deinit.md) \\- Ця функція деініціалізує модуль шифрування\n","title":"mdecrypt\\_generic","contentType":2,"navigation":[{"function.mcrypt-module-self-test.md":"« mcrypt\\_module\\_self\\_test"},{"book.mhash.md":"Mhash »"},{"index.md":"PHP Manual"},{"ref.mcrypt.md":"Mcrypt"}]}},"__N_SSG":true}