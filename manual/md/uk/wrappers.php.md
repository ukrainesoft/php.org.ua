- [«ftp://](wrappers.ftp.md)
- [zlib://»](wrappers.compression.md)

- [PHP Manual](index.md)
- [Підтримувані протоколи та обгортки](wrappers.md)
- Доступ до різних потоків введення-виводу

# php://

php:// — Доступ до різних потоків введення-виводу

### Опис

PHP надає кілька різноманітних потоків введення-виводу, які
дозволяють отримати доступ до власних потоків введення-виведення PHP, до
дескрипторів стандартного введення, виведення та потоку помилок, до тимчасових
файлових потоків у пам'яті і диску, і фільтрам, які можуть
маніпулювати іншими файловими ресурсами в міру їх зчитування або
запису.

#### php://stdin, php://stdout та php://stderr

`php://stdin`, `php://stdout` та `php://stderr` дозволяють отримати прямий
доступ до відповідних потоків введення або виведення процесу PHP. Потік
вказує на копію файлового дескриптора, таким чином, якщо ви
відкриєте `php://stdin` і потім закриєте його, ви закриєте тільки вашу
копію дескриптора. Актуальний потік, на який посилається **`STDIN`**,
залишається незмінним. Рекомендується просто використовувати константи
**`STDIN`**, **`STDOUT`** та **`STDERR`** замість ручного відкриття
потоків, використовуючи ці обгортки.

Потік `php://stdin` призначений лише для читання, тоді як
`php://stdout` та `php://stderr` призначені тільки для запису.

#### php://input

`php://input` є потоком лише для читання, який дозволяє вам
читати необроблені дані із тіла запиту. `php://input` недоступний з
типом вмісту `enctypeu003d"multipart/form-data"`.

#### php://output

`php://output` є потоком тільки для запису, який дозволяє вам
записати дані у вихідний буфер аналогічно, як це роблять функції
[print](function.print.md) та [echo](function.echo.md).

#### php://fd

`php://fd` надає прямий доступ до вказаного файлового
дескриптору. Наприклад, `php://fd/3` відноситься до файлового дескриптора 3.

#### php://memory та php://temp

`php://memory` та `php://temp` є потоками для читання/запису та
дозволяють зберігати часові дані у файлоподібній обгортці.
Єдина різниця між ними полягає в тому, що `php://memory`
завжди зберігатиме дані в оперативній пам'яті, тоді як `php://temp`
буде використовувати тимчасовий файл у тому випадку, коли обсяг зберігається
інформації досягне заданого ліміту (за замовчуванням 2 Мб). Розташування
цього тимчасового файлу визначається аналогічно функції
[sys_get_temp_dir()](function.sys-get-temp-dir.md).

Розмір ліміту для `php://temp` може встановлюватися шляхом додавання
`/maxmemory:NN`, де `NN` - це максимальний розмір даних у байтах для
зберігання у пам'яті перед використанням тимчасового файлу.

#### php://filter

`php://filter` - це вид мета-обертки, призначений для вирішення
застосування [фільтрів](filters.md) до потоку під час відкриття. Це
корисно для функціонально повних файлових функцій, таких як
[readfile()](function.readfile.md), [file()](function.file.md) та
[file_get_contents()](function.file-get-contents.md), де немає
можливості застосувати фільтр до потоку до того, як вміст буде
прочитано.

Потік `php://filter` приймає такі параметри як частину свого
шляхи. В одному шляху можна вказати кілька ланцюжків фільтрів. Будь ласка,
ознайомтеся з прикладами та особливостями при використанні цих
параметрів.

| Назва | Опис |
|------------------------------------------------- --------------------|----------------------------- -------------------------------------------------- -------------------------------------------------- ------------------------|
| `resourceu003d<потік для фільтрації>` | Цей параметр є необхідним. Він показує потоку, що його потрібно відфільтрувати. |
| `readu003d<список фільтрів для застосування до ланцюжка читання>` | Цей параметр є необов'язковим. Одне або кілька імен фільтрів може бути вказано тут, розділених вертикальною межею (`|`). |
| `writeu003d<список фільтрів для застосування до ланцюжка запису>` | Цей параметр є необов'язковим. Одне або кілька імен фільтрів може бути вказано тут, розділених вертикальною межею (`|`). |
| `<список фільтрів для застосування до обох ланцюжків читання та запису>` | Будь-який список фільтрів, які використовуються без префіксів `readu003d` або `writeu003d`, буде застосований до обох потоків на читання та запис при необхідності. |

**Параметри для php://filter**

### Опції

| Атрибут Підтримка
|------------------------------------------------- ----------------------------------------|--------- -------------------------------------------------- -------------------------------------------------- ------------|
| Обмеження на [allow_url_fopen](filesystem.configuration.md#ini.allow-url-fopen) | Ні |
| Обмеження на [allow_url_include](filesystem.configuration.md#ini.allow-url-include) | тільки `php://input`, `php://stdin`, `php://memory` та `php://temp`. |
| Читання | тільки `php://stdin`, `php://input`, `php://fd`, `php://memory` та `php://temp`. |
| Запис | тільки `php://stdout`, `php://stderr`, `php://output`, `php://fd`, `php://memory` та `php://temp`. |
| Додавання | тільки `php://stdout`, `php://stderr`, `php://output`, `php://fd`, `php://memory` та `php://temp`. (еквівалентно запису) |
| Одночасне читання та запис | тільки `php://fd`, `php://memory` та `php://temp`. |
| Підтримка [stat()](function.stat.md) | ні. Тим не менш, `php://memory` та `php://temp` підтримують [fstat()](function.fstat.md). |
| Підтримка [unlink()](function.unlink.md) | Ні |
| Підтримка [rename()](function.rename.md) | Ні |
| Підтримка [mkdir()](function.mkdir.md) | Ні |
| Підтримка [rmdir()](function.rmdir.md) | Ні |
| Підтримка [stream_select()](function.stream-select.md) | тільки `php://stdin`, `php://stdout`, `php://stderr`, `php://fd` та `php://temp`. |

**Основна інформація (для `php://filter` дивіться інформацію щодо
обгортці, яка піддається фільтрації)**

### Приклади

**Приклад #1 php://temp/maxmemory**

Цей необов'язковий параметр дозволяє встановити ліміт пам'яті до того,
як `php://temp` почне використовувати тимчасовий файл.

` <?php// Установка межі в 5 MB.$fiveMBs u003d 5 * 1024 * 1024;$fp u003d fopen("php://temp/maxmemory:$fiveMBs", 'r+');fput| hello
");// Читаємо то, ми записали.rewind($fp);echo stream_get_contents($fp);?> `

**Приклад #2 php://filter/resourceu003d\<потік для фільтрації\>**

Цей параметр має бути розташований наприкінці вашої специфікації
`php://filter` і повинен вказувати на потік, який ви хочете
фільтрувати.

`<?php/* Це просто еквівалентно: readfile("http://www.example.com"); так як на самому справі фільтри не вказані */readfile("php://filter/resourceu003dhttp://www.example.com");?> `

**Приклад #3 php://filter/readu003d\<список фільтрів для застосування до ланцюжка
читання\>**

Цей параметр приймає один або більше імен фільтрів, розділених
вертикальною рисою `|`.

` <?php/* Цей скрипт виведе вміст  www.example.com повністю в верхньому реєстрі */readfile("php://filter/readu003dstring.toupper/resourceu003dhttp://www.example.com"); /* Цей скрипт робить теж саме, вверхній, але  буде также кодувати алгоритмом ROT13 */readfile("php://filter/readu003dstring.toupper|string.rot13/resourceu003dhttp:// );?> `

**Приклад #4 php://filter/writeu003d\<список фільтрів для застосування до
ланцюжку запису\>**

Цей параметр приймає один або більше імен фільтрів, розділених
вертикальною рисою `|`.

` <?php/* Цей скрипт фільтрувати рядок "Hello World" через фільтр rot13, затем записувати результат в файл example.txt? .txt","Hello World");?> `

**Приклад #5 php://memory та php://temp не можна перевикористовувати**

`php://memory` та `php://temp` не можна перевикористовувати, тобто після
закриття потоків неможливо послатись на них знову.

` file_put_contents('php://memory', 'PHP');echo file_get_contents('php://memory'); // нічого не надрукує`
