{"pageProps":{"page":{"slug":"wrappers.rar.md","content":"# rar://\n\nrar:// — RAR\n\n### Опис\n\nЦя обгортка приймає URL-кодований шлях до RAR-архіву (відносний або абсолютний), необов'язковий символ зірочки (`*`), необов'язковий символ ґрат (`#`) та необов'язкове URL-кодоване ім'я таке, як зберігається в архіві. Для вказівки імені вмісту потрібен символ решітки, початковий зворотний сліш у назві вмісту необов'язковий.\n\nЦя обгортка може відкривати файли та каталоги. Коли відкриваються директорії, знак зірочки вимагає, щоб імена об'єктів директорії були закодовані unencode. Якщо такий знак не вказано, їх буде повернено в URL-кодуванні. Сенс цього в тому, щоб дозволити обгортці коректно використовувати вбудовану функціональність, таку як [RecursiveDirectoryIterator](class.recursivedirectoryiterator.md) коли є імена файлів, які здаються як url-закодовані дані.\n\nЯкщо символ решітки та частина імені запису не увімкнена, буде відображено корінь архіву. Це відрізняється від звичайних директорій тим, що результуючий потік не міститиме таку інформацію, як час модифікації, оскільки коренева директорія не зберігається як окремий запис в архіві. Використання обгортки з [RecursiveDirectoryIterator](class.recursivedirectoryiterator.md) вимагає, щоб символ решітки був включений до URL, коли відбувається доступ до кореня, так щоб URL нащадків міг бути сконструйований правильно.\n\n> **Зауваження** **Ця обгортка не включена за замовчуванням**  \n> Для того щоб використовувати обгортку rar://, необхідно встановити модуль [» rar](https://pecl.php.net/package/rar), доступний у репозиторії [» PECL](https://pecl.php.net/)\n\nrar:// Доступно з PECL rar 3.0.0\n\n### Використання\n\n-   rar://\\[\\*\\]\\[#\\[\\]\\]\n\n### Опції\n\n**Основна інформація**\n\n| Атрибут | Поддержка |\n| --- | --- |\n| Обмеження по [allow\\_url\\_fopen](filesystem.configuration.md#ini.allow-url-fopen) | Ні |\n| Обмеження по [allow\\_url\\_include](filesystem.configuration.md#ini.allow-url-include) | Ні |\n| Читання | Так |\n| Запис | Ні |\n| Додавання | Ні |\n| Одночасне читання та запис | Ні |\n| Поддержка[stat()](function.stat.md) | Так |\n| Поддержка[unlink()](function.unlink.md) | Ні |\n| Поддержка[rename()](function.rename.md) | Ні |\n| Поддержка[mkdir()](function.mkdir.md) | Ні |\n| Поддержка[rmdir()](function.rmdir.md) | Ні |\n\n**Опції контексту**\n\n| Название | Использование | По умолчанию |\n| --- | --- | --- |\n| `open_password` | Пароль використовується для шифрування заголовків архіву, якщо вони є. WinRAR шифруватиме всі файли з таким самим паролем, як і пароль заголовків, коли останній присутній. Тому для архівів із зашифрованими заголовками опція `file_password` буде проігноровано. |  |\n| `file_password` | Пароль, який використовується для шифрування файлу, якщо такий є. Якщо заголовки також зашифровані, ця опція буде ігнорована на користь `open_password`. . Причина цього в тому, що немає сенсу у використанні одночасно двох різних паролів для шифрування окремо заголовків та файлів. Немає таких архівів, де це знадобилося б. Зауважимо, що якщо у архіву відсутні зашифровані заголовки, то опція `open_password` буде ігнорована і ця опція має бути використана замість неї. |  |\n| `volume_callback` | Зворотний виклик визначення шляху відсутніх томів архіву. Дивіться [RarArchive::open()](rararchive.open.md) для детальнішої інформації. |  |\n\n### Приклади\n\n**Приклад #1 Обхід RAR-архіву**\n\n```php\n<?php\n\nclass MyRecDirIt extends RecursiveDirectoryIterator {\n    function current() {\n        return rawurldecode($this->getSubPathName()) .\n            (is_dir(parent::current())?\" [DIR]\":\"\");\n    }\n}\n\n$f = \"rar://\" . rawurlencode(dirname(__FILE__)) .\n    DIRECTORY_SEPARATOR . 'dirs_and_extra_headers.rar#';\n\n$it = new RecursiveTreeIterator(new MyRecDirIt($f));\n\nforeach ($it as $s) {\n    echo $s, \"\\n\";\n}\n?>\n```\n\nВисновок наведеного прикладу буде схожим на:\n\n```\n|-allow_everyone_ni [DIR]\n|-file1.txt\n|-file2_אּ.txt\n|-with_streams.txt\n\\-אּ [DIR]\n  |-אּ\\%2Fempty%2E [DIR]\n  | \\-אּ\\%2Fempty%2E\\file7.txt\n  |-אּ\\empty [DIR]\n  |-אּ\\file3.txt\n  |-אּ\\file4_אּ.txt\n  \\-אּ\\אּ_2 [DIR]\n    |-אּ\\אּ_2\\file5.txt\n    \\-אּ\\אּ_2\\file6_אּ.txt\n```\n\n**Приклад #2 Відкриття зашифрованого файлу (шифрування заголовка)**\n\n```php\n<?php\n$stream = fopen(\"rar://\" .\n    rawurlencode(dirname(__FILE__)) . DIRECTORY_SEPARATOR .\n    'encrypted_headers.rar' . '#encfile1.txt', \"r\", false,\n    stream_context_create(\n        array(\n            'rar' =>\n                array(\n                    'open_password' => 'samplepassword'\n                )\n            )\n        )\n    );\nvar_dump(stream_get_contents($stream));\n/* дата создания и дата последнего доступа включается опционально в WinRAR, поэтому у\n * большинства файлов их нет */\nvar_dump(fstat($stream));\n?>\n```\n\nВисновок наведеного прикладу буде схожим на:\n\n```\nstring(26) \"Encrypted file 1 contents.\"\nArray\n(\n    [0] => 0\n    [1] => 0\n    [2] => 33206\n    [3] => 1\n    [4] => 0\n    [5] => 0\n    [6] => 0\n    [7] => 26\n    [8] => 0\n    [9] => 1259550052\n    [10] => 0\n    [11] => -1\n    [12] => -1\n    [dev] => 0\n    [ino] => 0\n    [mode] => 33206\n    [nlink] => 1\n    [uid] => 0\n    [gid] => 0\n    [rdev] => 0\n    [size] => 26\n    [atime] => 0\n    [mtime] => 1259550052\n    [ctime] => 0\n    [blksize] => -1\n    [blocks] => -1\n)\n```\n","title":"rar://","contentType":2,"navigation":[{"wrappers.ssh2.md":"« ssh2://"},{"wrappers.audio.md":"ogg:// »"},{"index.md":"PHP Manual"},{"wrappers.md":"Підтримувані протоколи та обгортки"}]}},"__N_SSG":true}