{"pageProps":{"page":{"slug":"stream.examples.md","content":"# Приклади\n\n## Зміст\n\n-   [Приклад класу, зареєстрованого як обгортка потоку](stream.streamwrapper.example-1.md)\n\n**Приклад #1 Использование[file\\_get\\_contents()](function.file-get-contents.md) для отримання даних із різних джерел**\n\n```php\n<?php\n/* Чтение локального файла из /home/bar */\n$localfile = file_get_contents(\"/home/bar/foo.txt\");\n\n/* То же самое с явным заданием схемы FILE */\n$localfile = file_get_contents(\"file:///home/bar/foo.txt\");\n\n/* Чтение удалённого файла по адресу from www.example.com, используя HTTP */\n$httpfile  = file_get_contents(\"http://www.example.com/foo.txt\");\n\n/* Чтение удалённого файла по адресу www.example.com, используя HTTPS */\n$httpsfile = file_get_contents(\"https://www.example.com/foo.txt\");\n\n/* Чтение удалённого файла по адресу ftp.example.com, используя FTP */\n$ftpfile   = file_get_contents(\"ftp://user:pass@ftp.example.com/foo.txt\");\n\n/* Чтение удалённого файла по адресу ftp.example.com, используя FTPS */\n$ftpsfile  = file_get_contents(\"ftps://user:pass@ftp.example.com/foo.txt\");\n?>\n```\n\n**Приклад #2 Здійснення POST-запиту до https-сервера**\n\n```php\n<?php\n/* Посылаем POST запрос на адрес https://secure.example.com/form_action.php\n* Включаем элементы формы \"foo\" и \"bar\" с подходящими данными\n*/\n\n$sock = fsockopen(\"ssl://secure.example.com\", 443, $errno, $errstr, 30);\nif (!$sock) die(\"$errstr ($errno)\\n\");\n\n$data = \"foo=\" . urlencode(\"Значение Foo\") . \"&bar=\" . urlencode(\"Значение Bar\");\n\nfwrite($sock, \"POST /form_action.php HTTP/1.0\\r\\n\");\nfwrite($sock, \"Host: secure.example.com\\r\\n\");\nfwrite($sock, \"Content-type: application/x-www-form-urlencoded\\r\\n\");\nfwrite($sock, \"Content-length: \" . strlen($data) . \"\\r\\n\");\nfwrite($sock, \"Accept: */*\\r\\n\");\nfwrite($sock, \"\\r\\n\");\nfwrite($sock, $data);\n\n$headers = \"\";\nwhile ($str = trim(fgets($sock, 4096)))\n$headers .= \"$str\\n\";\n\necho \"\\n\";\n\n$body = \"\";\nwhile (!feof($sock))\n$body .= fgets($sock, 4096);\n\nfclose($sock);\n?>\n```\n\n**Приклад #3 Запис даних у стислий файл**\n\n```php\n<?php\n/* Создаём сжатый файл с различными данными\n* Файл можно прочитать с помощью потока compress.zlib или\n* просто разархивировать из командной строки 'gzip -d foo-bar.txt.gz'\n*/\n$fp = fopen(\"compress.zlib://foo-bar.txt.gz\", \"wb\");\nif (!$fp) die(\"Невозможно создать файл.\");\n\nfwrite($fp, \"Тестовые данные.\\n\");\n\nfclose($fp);\n?>\n```\n","title":"Приклади","contentType":2,"navigation":[{"stream.errors.md":"« Помилки потоку"},{"stream.streamwrapper.example-1.md":"Приклад класу, зареєстрованого як обгортка потоку »"},{"index.md":"PHP Manual"},{"book.stream.md":"Потоки"}]}},"__N_SSG":true}