- [« svn_delete](function.svn-delete.md)
- [svn_export »](function.svn-export.md)

- [PHP Manual](index.md)
- [Функції SVN](ref.svn.md)
- Рекурсивно показує різницю двох файлів

# svn_diff

(PECL svn \>u003d 0.1.0)

svn_diff — Рекурсивно показує різницю двох файлів

### Опис

**svn_diff**(
string `$path1`,
int `$rev1`,
string `$path2`,
int `$rev2`
): array

Рекурсивно показує відмінності двох файлів `path1` та `path2`.

> **Примітка**:
>
> Це не інструмент для перегляду загальних змін. Можуть бути переглянуті
> відмінності лише локальних файлів, що знаходяться в системі контролю
> версії SVN : інші файли відмінності не вдасться переглянути.

### Список параметрів

`path1`
Перший шлях. Це може бути URL файлу/директорії у репозиторії SVN або
шлях до локального файлу/директорії.

> **Примітка**: Відносні шляхи будуть обчислені, наче поточна
> робоча директорія була домашньою папкою самого PHP. Щоб
> використовувати робочу директорію скрипта, що викликає, використовуйте
> [realpath()](function.realpath.md) або dirname(\_\_FILE\_\_).

**Увага**
Якщо шлях до локального файлу складається тільки із зворотних слішів (\), без
слеша (/), даному модулю не вдасться знайти потрібні файли. Завжди
замінюйте всі зворотні сліші (\) на сліші (/), використовуючи цю функцію.

`rev1`
Номер ревізії першого файлу. Використовуйте константу
**`SVN_REVISION_HEAD`** для завдання останньої ревізії.

`path2`
Другий шлях до файлу, аналогічно `path1`

`rev2`
Номер ревізії другого файлу, аналогічно `rev1`.

### Значення, що повертаються

Повертає список масивів, що складається з двох потоків: перша - відмінності
файлів; друга – помилки. Потоки можуть бути прочитані функцією
[fread()](function.fread.md). При помилці повертає **`false`** або
**`null`**.

За промовчанням висновок відмінностей буде у стандартному форматі Subversion, але
також може використовуватися [»  зовнішнім інструментом показу
відмінностей](http://svnbook.red-bean.com/en/1.2/svn.advanced.externaldifftools.md),
залежно від налаштування Subversion.

### Приклади

**Приклад #1 Простий приклад**

Приклад нижче ілюструє просте використання цієї функції та
отримання даних із потоку.

` <?phplist($diff, $errors) u003d svn_diff(   'http://www.example.com/svnroot/trunk/foo', SVN_REVISION_HEAD,    'http://www.example.com/svnroot/branes /foo', SVN_REVISION_HEAD);if (!$diff) exit;$contents u003d '';while (!feof($diff)) {  $contents .u003d fread($diff, 8192);}fclose($diff); fclose($errors);var_dump($contents);?> `

Результат виконання цього прикладу:

Index: http://www.example.com/svnroot/trunk/foo
u003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003d u003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003du003d
--- http://www.example.com/svnroot/trunk/foo (.../foo) (revision 23)
+++ http://www.example.com/svnroot/branches/dev/foo (.../foo) (revision 27)
// решта висновку diff

**Приклад #2 Висновок відмінностей між двома ревізіями одного файлу**

Цей приклад показує як реалізувати функцію-обертку, яка
дозволяє користувачеві переглядати різницю між двома ревізіями
одного файлу, використовуючи зовнішній шлях репозиторію (стандартний синтаксис
такий реалізації дещо надлишковий):

` <?phpfunction svn_diff_same_item($path, $rev1, $rev2) {    return svn_diff($path, $rev1, $path, $rev2);}?> `

**Приклад #3 Більш зручний спосіб виведення відмінностей між двома файлами**

Цей приклад показує як реалізувати функцію-обертку для виведення
відмінностей між двома локальними файлами, яка є переносимою та
позбавлена помилок під час роботи з функцією [realpath()](function.realpath.md)
і зворотним слішем.

` <?phpfunction svn_diff_local($path1, $rev1, $path2, $rev2) {   $path1 u003d str_replace('\', '/', realpath($path1)); $path2u003du003dstr_replace('\', '/',realpath($path2)); return svn_diff($path1, $rev1, $path2, $rev2);}?> `

### Примітки

**Увага**

Ця функція є ЕКСПЕРИМЕНТАЛЬНОЮ. Поведінка цієї функції, її ім'я
і документація, що відноситься до неї, можуть змінитися в наступних версіях
PHP без попередження. Використовуйте цю функцію на свій страх та ризик.

### Дивіться також

- [» SVN-документація з svn
diff](http://svnbook.red-bean.com/en/1.2/svn.ref.svn.c.diff.md)
