{"pageProps":{"page":{"slug":"function.session-create-id.md","content":"# session\\_create\\_id\n\n(PHP 7 >= 7.1.0, PHP 8)\n\nsession\\_create\\_id — Створює новий ідентифікатор сесії\n\n### Опис\n\n```methodsynopsis\nsession_create_id(string $prefix = \"\"): string|false\n```\n\n**session\\_create\\_id()** використовується створення нового ідентифікатора поточної сесії. Повертає ідентифікатор сесії, який не схильний до колізій.\n\nЗа неактивної сесії перевірка на колізії не здійснюється.\n\nІдентифікатор сесії створюється відповідно до налаштувань php.ini.\n\nВажливо використовувати той самий ідентифікатор користувача на вашому веб-сервері, що і для скрипту завдання сміття. В іншому випадку у вас можуть виникнути проблеми доступу, особливо з дескриптором збереження файлів.\n\n### Список параметрів\n\n`prefix`\n\nЕсли указан параметр`prefix`, то новий ідентифікатор сесії буде з префіксом `prefix`. Не всі символи можна використовувати в ідентифікаторі сесії. Дозволяється використовувати лише символи з діапазону: `a-z A-Z 0-9 , (кома)`и`- (мінус)`\n\n### Значення, що повертаються\n\n**session\\_create\\_id()** повертає новий, не схильний до колізій, ідентифікатор поточної сесії. Якщо використовується під час неактивної сесії, перевірка на колізії пропускається. У разі невдачі повертається **`false`**\n\n### Приклади\n\n**Приклад #1 Приклад використання** session\\_create\\_id()\\*\\* з функцією [session\\_regenerate\\_id()](function.session-regenerate-id.md)\\*\\*\n\n```php\n<?php\n// Функция My session start с управлением на основе временных меток\nfunction my_session_start() {\n    session_start();\n    // Не разрешать использование слишком старых идентификаторов сессии\n    if (!empty($_SESSION['deleted_time']) && $_SESSION['deleted_time'] < time() - 180) {\n        session_destroy();\n        session_start();\n    }\n}\n\n// Функция My session regenerate id\nfunction my_session_regenerate_id() {\n    // Вызов session_create_id() пока сессия активна, чтобы\n    // удостовериться в отсутствии коллизий.\n    if (session_status() != PHP_SESSION_ACTIVE) {\n        session_start();\n    }\n    // ВНИМАНИЕ: Никогда не используйте конфиденциальные строки в качестве префикса!\n    $newid = session_create_id('myprefix-');\n    // Установка временной метки удаления. Данные активной сессии не должны удаляться сразу же.\n    $_SESSION['deleted_time'] = time();\n    // Завершение сессии\n    session_commit();\n    // Убеждаемся в возможности установки пользовательского идентификатора сессии\n    // ЗАМЕЧАНИЕ: Вы должны включать опцию use_strict_mode для обычных операций.\n    ini_set('session.use_strict_mode', 0);\n    // Установка нового пользовательского идентификатора сессии\n    session_id($newid);\n    // Старт сессии с пользовательским идентификатором\n    session_start();\n}\n\n// Убеждаемся, что опция use_strict_mode включена.\n// Опция use_strict_mode обязательна по соображениям безопасности.\nini_set('session.use_strict_mode', 1);\nmy_session_start();\n\n// Идентификатор сессии должен генерироваться заново при:\n//  - Входе пользователя в систему\n//  - Выходе пользователя из системы\n//  - По прошествии определённого периода времени\nmy_session_regenerate_id();\n\n// Далее основной код программы\n?>\n```\n\n### Дивіться також\n\n-   [session\\_regenerate\\_id()](function.session-regenerate-id.md) \\- Генерує та оновлює ідентифікатор поточної сесії\n-   [session\\_start()](function.session-start.md) \\- Стартує нову сесію, або відновлює існуючу\n-   [session.use\\_strict\\_mode](session.configuration.md#ini.session.use-strict-mode)\n-   [SessionHandler::create\\_sid()](sessionhandler.create-sid.md) \\- Повертає новий ідентифікатор сесії\n","title":"session\\_create\\_id","contentType":2,"navigation":[{"function.session-commit.md":"« session\\_commit"},{"function.session-decode.md":"session\\_decode »"},{"index.md":"PHP Manual"},{"ref.session.md":"Функції для роботи із сесіями"}]}},"__N_SSG":true}