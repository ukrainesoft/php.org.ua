{"pageProps":{"page":{"slug":"mysqli-stmt.sqlstate.md","content":"# mysqli\\_stmt::$sqlstate\n\n# mysqli\\_stmt\\_sqlstate\n\n(PHP 5, PHP 7, PHP 8)\n\nmysqli\\_stmt::$sqlstate -- mysqli\\_stmt\\_sqlstate — Повернення коду помилки SQLSTATE, викликаної під час виконання останньої операції над запитом\n\n### Опис\n\nОб'єктно-орієнтований стиль\n\nstring[$mysqli\\_stmt->sqlstate](mysqli-stmt.sqlstate.md)\n\nПроцедурний стиль\n\n```methodsynopsis\nmysqli_stmt_sqlstate(mysqli_stmt $statement): string\n```\n\nПовертає рядок, що містить код SQLSTATE, помилки, викликаної в результаті виконання останньої операції над запитом, яка може завершуватися успішно або неуспішно. Цей код складається з п'яти символів . `'00000'` означає відсутність помилок. Значення цього коду визначено у стандарті ANSI SQL, а також у ODBC. Повний список можливих кодів можна переглянути на сторінці [» http://dev.mysql.com/doc/mysql/en/error-handling.md](http://dev.mysql.com/doc/mysql/en/error-handling.md)\n\n### Список параметрів\n\n`stmt`\n\nТільки для процедурного стилю: об'єкт [mysqli\\_stmt](class.mysqli-stmt.md), який повернула функція [mysqli\\_stmt\\_init()](mysqli.stmt-init.md)\n\n### Значення, що повертаються\n\nПовертає рядок, що містить код помилки SQLSTATE останньої досконалої операції. Цей код складається з п'яти символів . `'00000'` означає відсутність помилок.\n\n### Приклади\n\n**Приклад #1 Об'єктно-орієнтований стиль**\n\n```php\n<?php\n/* Открываем соединение */\n$mysqli = new mysqli(\"localhost\", \"my_user\", \"my_password\", \"world\");\n\n/* Проверяем соединение */\nif (mysqli_connect_errno()) {\n    printf(\"Не удалось подключиться: %s\\n\", mysqli_connect_error());\n    exit();\n}\n\n$mysqli->query(\"CREATE TABLE myCountry LIKE Country\");\n$mysqli->query(\"INSERT INTO myCountry SELECT * FROM Country\");\n\n\n$query = \"SELECT Name, Code FROM myCountry ORDER BY Name\";\nif ($stmt = $mysqli->prepare($query)) {\n\n    /* удаляем таблицу */\n    $mysqli->query(\"DROP TABLE myCountry\");\n\n    /* выполняем запрос */\n    $stmt->execute();\n\n    printf(\"Ошибка: %s.\\n\", $stmt->sqlstate);\n\n    /* закрываем запрос */\n    $stmt->close();\n}\n\n/* закрываем соединение */\n$mysqli->close();\n?>\n```\n\n**Приклад #2 Процедурний стиль**\n\n```php\n<?php\n/* Открываем соединение */\n$link = mysqli_connect(\"localhost\", \"my_user\", \"my_password\", \"world\");\n\n/* Проверяем соединение */\nif (mysqli_connect_errno()) {\n    printf(\"Не удалось подключиться: %s\\n\", mysqli_connect_error());\n    exit();\n}\n\nmysqli_query($link, \"CREATE TABLE myCountry LIKE Country\");\nmysqli_query($link, \"INSERT INTO myCountry SELECT * FROM Country\");\n\n\n$query = \"SELECT Name, Code FROM myCountry ORDER BY Name\";\nif ($stmt = mysqli_prepare($link, $query)) {\n\n    /* удаляем таблицу */\n    mysqli_query($link, \"DROP TABLE myCountry\");\n\n    /* выполняем запрос */\n    mysqli_stmt_execute($stmt);\n\n    printf(\"Ошибка: %s.\\n\", mysqli_stmt_sqlstate($stmt));\n\n    /* закрываем запрос */\n    mysqli_stmt_close($stmt);\n}\n\n/* закрываем соединение */\nmysqli_close($link);\n?>\n```\n\nРезультат виконання наведених прикладів:\n\n```\nОшибка: 42S02.\n```\n\n### Примітки\n\n> **Зауваження** :\n> \n> Слід зазначити, що не всі помилки MySQL мають свій відбиток у кодах SQLSTATE. Для таких помилок використовується загальний код `HY000` (Загальна помилка).\n\n### Дивіться також\n\n-   [mysqli\\_stmt\\_errno()](mysqli-stmt.errno.md) \\- Повертає код помилки виконання останнього запиту\n-   [mysqli\\_stmt\\_error()](mysqli-stmt.error.md) \\- Повертає рядок із поясненням останньої помилки під час виконання запиту\n","title":"mysqli\\_stmt::$sqlstate","contentType":2,"navigation":[{"mysqli-stmt.send-long-data.md":"« mysqli\\_stmt::send\\_long\\_data"},{"mysqli-stmt.store-result.md":"mysqli\\_stmt::store\\_result »"},{"index.md":"PHP Manual"},{"class.mysqli-stmt.md":"mysqli\\_stmt"}]}},"__N_SSG":true}