{"pageProps":{"page":{"slug":"class.mongodb-driver-command.md","content":"# Клас The MongoDB\\\\Driver\\\\Command\n\n(mongodb >=1.0.0)\n\n## Вступ\n\nКласс**MongoDB\\\\Driver\\\\Command** - Це об'єкт значення, що представляє команду бази даних.\n\nЩоб надати Помічників команд (Command Helpers) має бути створено об'єкт **MongoDB\\\\Driver\\\\Command**\n\n## Огляд класів\n\n```classsynopsis\n\n\n\n    \n     final\n     \n      class MongoDB\\Driver\\Command\n     \n     {\n\n\n    /* Методы */\n    \n   final public __construct(array|object $document, ?array $commandOptions = null)\n\n   }\n```\n\n## Приклади\n\n**Приклад #1 Использование**MongoDB\\\\Driver\\\\Command**для предоставления помощника по созданию коллекций**\n\n```php\n<?php\nclass CreateCollection {\n    protected $cmd = array();\n\n    function __construct($collectionName) {\n        $this->cmd[\"create\"] = (string)$collectionName;\n    }\n    function setCappedCollection($maxBytes, $maxDocuments = false) {\n        $this->cmd[\"capped\"] = true;\n        $this->cmd[\"size\"]   = (int)$maxBytes;\n\n        if ($maxDocuments) {\n            $this->cmd[\"max\"] = (int)$maxDocuments;\n        }\n    }\n    function usePowerOf2Sizes($bool) {\n        if ($bool) {\n            $this->cmd[\"flags\"] = 1;\n        } else {\n            $this->cmd[\"flags\"] = 0;\n        }\n    }\n    function setFlags($flags) {\n        $this->cmd[\"flags\"] = (int)$flags;\n    }\n    function getCommand() {\n        return new MongoDB\\Driver\\Command($this->cmd);\n    }\n    function getCollectionName() {\n        return $this->cmd[\"create\"];\n    }\n}\n\n\n$manager = new MongoDB\\Driver\\Manager(\"mongodb://localhost:27017\");\n\n$createCollection = new CreateCollection(\"cappedCollection\");\n$createCollection->setCappedCollection(64 * 1024);\n\ntry {\n    $command = $createCollection->getCommand();\n    $cursor = $manager->executeCommand(\"databaseName\", $command);\n    $response = $cursor->toArray()[0];\n    var_dump($response);\n\n    $collstats = [\"collstats\" => $createCollection->getCollectionName()];\n    $cursor = $manager->executeCommand(\"databaseName\", new MongoDB\\Driver\\Command($collstats));\n    $response = $cursor->toArray()[0];\n    var_dump($response);\n} catch(MongoDB\\Driver\\Exception $e) {\n    echo $e->getMessage(), \"\\n\";\n    exit;\n}\n\n?>\n```\n\nРезультат виконання наведеного прикладу:\n\n```\nobject(MongoDB\\Driver\\Command)#3 (1) {\n  [\"command\"]=>\n  array(3) {\n    [\"create\"]=>\n    string(16) \"cappedCollection\"\n    [\"capped\"]=>\n    bool(true)\n    [\"size\"]=>\n    int(65536)\n  }\n}\narray(1) {\n  [\"ok\"]=>\n  float(1)\n}\narray(16) {\n  [\"ns\"]=>\n  string(29) \"databaseName.cappedCollection\"\n  [\"count\"]=>\n  int(0)\n  [\"size\"]=>\n  int(0)\n  [\"numExtents\"]=>\n  int(1)\n  [\"storageSize\"]=>\n  int(65536)\n  [\"nindexes\"]=>\n  int(1)\n  [\"lastExtentSize\"]=>\n  float(65536)\n  [\"paddingFactor\"]=>\n  float(1)\n  [\"paddingFactorNote\"]=>\n  string(101) \"paddingFactor is unused and unmaintained in 2.8. It remains hard coded to 1.0 for compatibility only.\"\n  [\"userFlags\"]=>\n  int(0)\n  [\"capped\"]=>\n  bool(true)\n  [\"max\"]=>\n  int(9223372036854775807)\n  [\"maxSize\"]=>\n  int(65536)\n  [\"totalIndexSize\"]=>\n  int(8176)\n  [\"indexSizes\"]=>\n  object(stdClass)#4 (1) {\n    [\"_id_\"]=>\n    int(8176)\n  }\n  [\"ok\"]=>\n  float(1)\n}\n```\n\n## Зміст\n\n-   [MongoDB\\\\Driver\\\\Command::\\_\\_construct](mongodb-driver-command.construct.md)— Створює новий об'єкт Command\n","title":"Клас The MongoDB\\\\Driver\\\\Command","contentType":2,"navigation":[{"mongodb-driver-manager.startsession.md":"« MongoDB\\\\Driver\\\\Manager::startSession"},{"mongodb-driver-command.construct.md":"MongoDB\\\\Driver\\\\Command::\\_\\_construct »"},{"index.md":"PHP Manual"},{"book.mongodb.md":"MongoDB\\\\Driver"}]}},"__N_SSG":true}