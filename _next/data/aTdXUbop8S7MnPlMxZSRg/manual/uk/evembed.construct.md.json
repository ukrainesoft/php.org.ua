{"pageProps":{"page":{"slug":"evembed.construct.md","content":"# EvEmbed::\\_\\_construct\n\n(PECL ev >= 0.2.0)\n\nEvEmbed::\\_\\_construct — Конструктор об'єкту EvEmbed\n\n### Опис\n\npublic **EvEmbed::\\_\\_construct**  \nobject`$other`  \n[callable](language.types.callable.md) `$callback` =  \n[mixed](language.types.declarations.md#language.types.declarations.mixed) `$data` =  \nint`$priority` =  \n) .\n\nЦе досить просунутий тип спостерігача, який дозволяє вбудувати один цикл подій в інший (нині підтримуються лише події введення-виводу у вбудованому циклі, інші типи спостерігачів можуть оброблятися із затримкою чи неправильно і повинні використовуватися).\n\nДетальніше читайте в [» документації libev](http://pod.tst.eu/http://cvs.schmorp.de/libev/ev.pod#code_ev_embed_code_when_one_backend_)\n\nЦей спостерігач найбільш корисний у *BSD* системах без працюючого `kqueue` для підтримки обробки великої кількості сокетів. Дивіться приклад нижче.\n\n### Список параметрів\n\n`other`\n\nЕкземпляр класу [EvLoop](class.evloop.md). Подієвий цикл для вбудовування. Цей цикл має бути вбудованим (дивіться [Ev::embeddableBackends()](ev.embeddablebackends.md)\n\n`callback`\n\nСмотрите[callback-функції спостерігачів](ev.watcher-callbacks.md)\n\n`data`\n\nДані користувача, асоційовані з спостерігачем.\n\n`priority`\n\n[Пріоритет спостерігача](class.ev.md#ev.constants.watcher-pri)\n\n### Приклади\n\n**Приклад #1 Вбудовування циклу, створеного за допомогою kqueue у циклі подій за умовчанням**\n\n```php\n<?php\n/*\n * Проверьте, доступен ли kqueue и создайте бэкенд kqueue\n * для использования с сокетами (это обычно работает с любой реализацией kqueue).\n * Сохраните событийный цикл kqueue/socket-only в loop_socket. (Опционально можно\n * использовать флаг EVFLAG_NOENV)\n *\n * Приклад взят из\n * http://pod.tst.eu/http://cvs.schmorp.de/libev/ev.pod#Examples_CONTENT-9\n */\n$loop        = EvLoop::defaultLoop();\n$socket_loop = NULL;\n$embed       = NULL;\n\nif (Ev::supportedBackends() & ~Ev::recommendedBackends() & Ev::BACKEND_KQUEUE) {\n    if (($socket_loop = new EvLoop(Ev::BACKEND_KQUEUE))) {\n        $embed = new EvEmbed($loop);\n    }\n}\n\nif (!$socket_loop) {\n    $socket_loop = $loop;\n}\n\n// теперь используйте $socket_loop для всех сокетов, а $loop для всего остального\n?>\n```\n\n### Дивіться також\n\n-   [Ev::embeddableBackends()](ev.embeddablebackends.md) \\- Повертає набір бекендів, які можна вбудувати в інші цикли подій\n","title":"EvEmbed::\\_\\_construct","contentType":2,"navigation":[{"class.evembed.md":"« EvEmbed"},{"evembed.createstopped.md":"EvEmbed::createStopped »"},{"index.md":"PHP Manual"},{"class.evembed.md":"EvEmbed"}]}},"__N_SSG":true}