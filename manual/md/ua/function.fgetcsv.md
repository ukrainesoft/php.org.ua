- [«fgetc](function.fgetc.md)
- [fgets »] (function.fgets.md)

- [PHP Manual](index.md)
- [Функції файлової системи](ref.filesystem.md)
- Читає рядок з файлу та проводить розбір даних CSV

#fgetcsv

(PHP 4, PHP 5, PHP 7, PHP 8)

fgetcsv — Читає рядок з файлу та проводить розбір даних CSV

### Опис

**fgetcsv**(
resource `$stream`,
?int `$length` u003d **`null`**,
string `$separator` u003d ",",
string `$enclosure` u003d "\"",
string `$escape` u003d "\\"
): array\|false

Ця функція схожа на функцію [fgets()](function.fgets.md), з тією
різницею, що вона здійснює аналіз рядка на наявність записів у форматі
CSV і повертає знайдені поля як масив.

> **Примітка**:
>
> Ця функція враховує налаштування локалі. Наприклад, якщо
> `LANG` встановлена в `en_US.UTF-8`, то файли в однобайтовому кодуванні
> будуть неправильно прочитані цією функцією.

### Список параметрів

`stream`
Коректний файловий покажчик на файл, успішно відкритий за допомогою
[fopen()](function.fopen.md), [popen()](function.popen.md) або
[fsockopen()](function.fsockopen.md).

`length`
Повинен бути більше найдовшого рядка (у символах), знайденого в
CSV-файлі (включаючи завершальний символ кінця рядка). В іншому випадку,
рядок буде розбитий на шматки довжиною в `length` символів, якщо тільки
місце розриву нічого очікувати всередині обмежувачів полів (enclosure).

Відсутність цього параметра (або встановлення його в 0 або **`null`**,
починаючи з PHP 8.0.0) призведе до того, що довжина рядка буде не
обмежена. Це може зашкодити швидкості виконання.

`separator`
Необов'язковий параметр `separator` встановлює роздільник поля
(лише один однобайтовий символ).

`enclosure`
Необов'язковий параметр `enclosure` встановлює символ обмежувача
поля (лише один однобайтовий символ).

`escape`
Необов'язковий параметр `escape` встановлює екрануючий символ (не
більше одного однобайтового символу). Порожній рядок (`````) відключає
пропрієтарний механізм екранування.

> **Примітка**: Зазвичай символ `enclosure` екранується всередині поля
> шляхом його подвоювання; однак, символ `escape` як альтернатива.
> Тому значення за промовчанням цих параметрів ````` та `\'` мають
> однакове значення. Крім дозволу екранувати символ `enclosure`
> символ `escape` немає особливого сенсу; він навіть не призначений для
> самого екранування.

### Значення, що повертаються

Повертає індексований масив із прочитаними полями у разі
успішного виконання або **`false`** у разі виникнення помилки.

> **Примітка**:
>
> Порожній рядок CSV-файлу буде повернено як масив,
> містить єдиний елемент null, помилки у разі не
> виникне.

> **Примітка**: Якщо у вас виникають проблеми з розпізнаванням PHP
> кінців рядків під час читання або створення файлів на Macintosh-сумісному
> комп'ютер, включення опції
> [auto_detect_line_endings](filesystem.configuration.md#ini.auto-detect-line-endings)
> допоможе вирішити проблему.

### Список змін

| Версія | Опис |
|--------|---------------------------------------- -------------------------------------------------- ---------------------|
| 8.0.0 | Параметр `length` тепер допускає значення **`null`**. |
| 7.4.0 | Тепер параметр escape може приймати порожній рядок для відключення пропрієтарного механізму екранування. |

### Приклади

**Приклад #1 Читання та відображення вмісту CSV-файлу**

` <?php$row u003d 1;if (($handle u003d fopen("test.csv", "r"))!u003du003d FALSE) {    while (($data u003d fgetcsv($handle, 1000, ) )) !u003du003d FALSE) {         $num u003d count($data); echo "<p> $num полів у рядку $row: <br /></p>
";|        $row++;        for ($cu003d0; $c < $num; $c++) {             echo$|
";         }    }   fclose($handle);}?> `

### Дивіться також

- [str_getcsv()](function.str-getcsv.md) - Розбирає
CSV-рядки в масив
- [explode()](function.explode.md) - Розбиває рядок за допомогою
роздільника
- [file()](function.file.md) - Читає вміст файлу та поміщає
його в масив
- [pack()](function.pack.md) - Упакувати дані в бінарний рядок
- [fputcsv()](function.fputcsv.md) - Форматує рядок у вигляді CSV та
записує її у файловий покажчик
