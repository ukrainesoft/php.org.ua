{"pageProps":{"page":{"slug":"varnish.example.admin.md","content":"## Просте використання VarnishAdmin\n\nЦей приклад ілюструє просте використання функціональності заборони\n\n**Приклад #1 Заборонити URL**\n\n```php\n<?php\n\n$args = array(\n    VARNISH_CONFIG_HOST    => \"::1\",\n    VARNISH_CONFIG_PORT    => 6082,\n    VARNISH_CONFIG_SECRET  => \"5174826b-8595-4958-aa7a-0609632ad7ca\",\n    VARNISH_CONFIG_TIMEOUT => 300,\n);\n\n$va = new VarnishAdmin($args);\n\ntry {\n    if(!$va->connect()) {\n        throw new VarnishException(\"Неудачное подключение\\n\");\n    }\n} catch (VarnishException $e) {\n    echo $e->getMessage();\n    exit(3);\n}\n\ntry {\n    if(!$va->auth()) {\n        throw new VarnishException(\"Неудачная аутентификация\\n\");\n    }\n} catch (VarnishException $e) {\n    echo $e->getMessage();\n    exit(3);\n}\n\ntry {\n    $status = $va->ban('req.url ~ \"^/$\"');\n    if (VARNISH_STATUS_OK != $status) {\n        throw new VarnishException(\"Метод ban вернул статус $status\\n\");\n    }\n} catch (VarnishException $e) {\n    echo $e->getMessage();\n    exit(3);\n}\n\nexit(0);\n\n?>\n```\n","title":"Просте використання VarnishAdmin","contentType":2,"navigation":[{"varnish.examples.md":"« Приклади"},{"varnish.example.stat.md":"Просте використання VarnishStat »"},{"index.md":"PHP Manual"},{"varnish.examples.md":"Приклади"}]}},"__N_SSG":true}