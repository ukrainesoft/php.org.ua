- [« Спадкування винятків](language.exceptions.extending.md)
- [Генератори »](language.generators.md)

- [PHP Manual](index.md)
- [Довідник мови](langref.md)
- Fibers

# Fibers

### Огляд файберів

(PHP 8 \>u003d 8.1.0)

Файбери є перериваються функції повного циклу. Файбери
можуть бути припинені з будь-якого місця циклу, зупиняючи
виконання у файбері до тих пір, поки файбер не буде відновлено в
майбутньому.

Файбери припиняють весь цикл виконання, тому що викликає
функцію безпосередньо не потрібно змінювати спосіб її виклику.

Виконання може бути перервано у будь-якому місці циклу за допомогою методу
[Fiber::suspend()](fiber.suspend.md) (тобто виклик
[Fiber::suspend()](fiber.suspend.md) може бути в глибоко
вкладеної функції або навіть взагалі не існувати).

На відміну від генераторів ([Generator](class.generator.md)) без стека,
кожен об'єкт [Fiber](class.fiber.md) має свій власний стек
викликів, що дозволяє призупиняти їх усередині глибоко вкладених
викликів функцій. Функція, яка оголошує точку переривання (тобто виклик
методу [Fiber::suspend()](fiber.suspend.md)), не повинна змінювати свій
тип, що повертається, на відміну від функції, що використовує
[yield](language.generators.syntax.md#control-structures.yield),
який має повертати екземпляр [Generator](class.generator.md).

Файбери можуть бути призупинені при виклику будь-якої функції, включаючи ті,
які викликаються з віртуальної машини PHP, наприклад, функції,
що надаються [array_map()](function.array-map.md), або методи,
викликані foreach для об'єкта [Iterator](class.iterator.md).

Після призупинення виконання файбер може бути відновлено з будь-яким
значенням за допомогою методу [Fiber::resume()](fiber.resume.md) або
шляхом передачі виключення у файбер за допомогою
[Fiber::throw()](fiber.throw.md). Значення повертається (або
викидається виняток) з методу
[Fiber::suspend()](fiber.suspend.md).

> **Примітка**: Через поточні обмеження неможливо переключати файбер
> у деструкторі об'єкта.

**Приклад #1 Простий приклад**

` <?php$fiber u003d new| ->start();echo "Значення зупиненого файбера: ", $value, PHP_EOL;$fiber->resume('test');?> `

Результат виконання цього прикладу:

Значення призупиненого файбер: fiber
Значення відновленого файбера:
