{"pageProps":{"page":{"slug":"mysqli.quickstart.transactions.md","content":"## API підтримка транзакцій\n\nПідтримка транзакцій в СУБД MySQL залежить від використовуваного двигуна сховища даних. Починаючи з MySQL 5.5, за умовчанням використовується двигун InnoDB. InnoDB повністю підтримує модель транзакцій ACID.\n\nТранзакції можна керувати як засобами SQL, так і викликами API-функцій. Для увімкнення та вимкнення режиму автофіксації змін (`autocommit`) рекомендується користуватися API функціями.\n\n**Приклад #1 Встановлення режиму автофіксації (`autocommit`) засобами SQL та функціями API**\n\n```php\n<?php\nmysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);\n$mysqli = new mysqli(\"example.com\", \"user\", \"password\", \"database\");\n\n/* Рекомендуется управлять настройками транзакций средствами API */\n$mysqli->autocommit(false);\n\n/* Не будет распознаваться и учитываться плагинами репликации и балансировки нагрузки */\n$mysqli->query('SET AUTOCOMMIT = 0');\n```\n\nДодаткові служби сервера, такі як плагіни реплікації та балансування навантаження, можуть відстежувати виклики API-функцій. Плагін реплікації може повідомляти балансувальнику навантаження про запущену транзакцію, якщо ця транзакція обслуговується API-функціями. Сервер не зможе розподіляти навантаження між репліками бази, якщо зміна режиму автофіксації (`autocommit`), фіксація та відкат транзакцій здійснюються SQL-запитами.\n\n**Приклад #2 Фіксація та відкат**\n\n```php\n<?php\nmysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);\n$mysqli = new mysqli(\"example.com\", \"user\", \"password\", \"database\");\n$mysqli->autocommit(false);\n\n$mysqli->query(\"INSERT INTO test(id) VALUES (1)\");\n$mysqli->rollback();\n\n$mysqli->query(\"INSERT INTO test(id) VALUES (2)\");\n$mysqli->commit();\n```\n\nСлід зазначити, що MySQL сервер не може відкотити результати всіх запитів. Деякі зміни фіксуються неявно.\n\n**Дивіться також**\n\n-   [mysqli::autocommit()](mysqli.autocommit.md)\n-   [mysqli::begin\\_transaction()](mysqli.begin-transaction.md)\n-   [mysqli::commit()](mysqli.commit.md)\n-   [mysqli::rollback()](mysqli.rollback.md)\n","title":"API підтримка транзакцій","contentType":2,"navigation":[{"mysqli.quickstart.multiple-statement.md":"« Множинні запити"},{"mysqli.quickstart.metadata.md":"Метадані »"},{"index.md":"PHP Manual"},{"mysqli.quickstart.md":"Короткий посібник"}]}},"__N_SSG":true}