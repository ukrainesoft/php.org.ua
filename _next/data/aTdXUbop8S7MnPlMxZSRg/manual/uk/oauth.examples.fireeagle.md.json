{"pageProps":{"page":{"slug":"oauth.examples.fireeagle.md","content":"## FireEagle\n\n```php\n<?php\n$req_url = 'https://fireeagle.yahooapis.com/oauth/request_token';\n$authurl = 'https://fireeagle.yahoo.net/oauth/authorize';\n$acc_url = 'https://fireeagle.yahooapis.com/oauth/access_token';\n$api_url = 'https://fireeagle.yahooapis.com/api/0.1';\n$conskey = 'your_consumer_key';\n$conssec = 'your_consumer_secret';\n\nsession_start();\n\n// При state=1 следующий запрос должен включать oauth_token.\n// Если не включает, то возвращаемся к 0\nif(!isset($_GET['oauth_token']) && $_SESSION['state']==1) $_SESSION['state'] = 0;\ntry {\n  $oauth = new OAuth($conskey,$conssec,OAUTH_SIG_METHOD_HMACSHA1,OAUTH_AUTH_TYPE_URI);\n  $oauth->enableDebug();\n  if(!isset($_GET['oauth_token']) && !$_SESSION['state']) {\n    $request_token_info = $oauth->getRequestToken($req_url);\n    $_SESSION['secret'] = $request_token_info['oauth_token_secret'];\n    $_SESSION['state'] = 1;\n    header('Location: '.$authurl.'?oauth_token='.$request_token_info['oauth_token']);\n    exit;\n  } else if($_SESSION['state']==1) {\n    $oauth->setToken($_GET['oauth_token'],$_SESSION['secret']);\n    $access_token_info = $oauth->getAccessToken($acc_url);\n    $_SESSION['state'] = 2;\n    $_SESSION['token'] = $access_token_info['oauth_token'];\n    $_SESSION['secret'] = $access_token_info['oauth_token_secret'];\n  }\n  $oauth->setToken($_SESSION['token'],$_SESSION['secret']);\n  $oauth->fetch(\"$api_url/user.json\");\n  $json = json_decode($oauth->getLastResponse());\n  print_r($json);\n} catch(OAuthException $E) {\n  print_r($E);\n}\n?>\n```\n","title":"FireEagle","contentType":2,"navigation":[{"oauth.examples.md":"« Приклади"},{"ref.oauth.md":"Функції OAuth »"},{"index.md":"PHP Manual"},{"oauth.examples.md":"Приклади"}]}},"__N_SSG":true}