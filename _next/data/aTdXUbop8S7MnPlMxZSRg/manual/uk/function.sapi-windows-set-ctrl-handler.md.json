{"pageProps":{"page":{"slug":"function.sapi-windows-set-ctrl-handler.md","content":"# sapi\\_windows\\_set\\_ctrl\\_handler\n\n(PHP 7 >= 7.4.0, PHP 8)\n\nsapi\\_windows\\_set\\_ctrl\\_handler — Встановити або видалити обробник події CTRL\n\n### Опис\n\n```methodsynopsis\nsapi_windows_set_ctrl_handler(?callable $handler, bool $add = true): bool\n```\n\nВстановлює або видаляє обробник події `CTRL`, який дозволить процесам Windows CLI перехоплювати чи ігнорувати події `CTRL+C`и`CTRL+BREAK`. Зверніть увагу, що в багатопотоковому оточенні це можливо тільки при виклику з головного потоку.\n\n### Список параметрів\n\n`handler`\n\nФункція зворотного дзвінка, яка буде встановлена ​​або видалена. Ця функція буде викликатись при настанні подій `CTRL+C`и`CTRL+BREAK`Функция должна иметь следующую сигнатуру:\n\n```methodsynopsis\nhandler(int $event): void\n```\n\n`event`\n\nОтримана подія `CTRL` **`PHP_WINDOWS_EVENT_CTRL_C`** або **`PHP_WINDOWS_EVENT_CTRL_BREAK`**\n\nУстановка параметра`handler`в значение\\*\\*`null`\\*\\* призведе до ігнорування подій `CTRL+C`, але не `CTRL+BREAK`\n\n`add`\n\nЯкщо **`true`**, то обработчик будет установлен. Если\\*\\*`false`\\*\\*, Видалений.\n\n### Значення, що повертаються\n\nПовертає **`true`** у разі успішного виконання або \\*\\*`false`\\*\\*в случае возникновения ошибки.\n\n### Приклади\n\n**Приклад #1 Использование**sapi\\_windows\\_set\\_ctrl\\_handler()\\*\\*\\*\\*\n\nУ цьому прикладі показано, як перехоплювати події `CTRL`\n\n```php\n<?php\nfunction ctrl_handler(int $event)\n{\n    switch ($event) {\n        case PHP_WINDOWS_EVENT_CTRL_C:\n            echo \"Вы нажали CTRL+C\\n\";\n            break;\n        case PHP_WINDOWS_EVENT_CTRL_BREAK:\n            echo \"Вы нажали CTRL+BREAK\\n\";\n            break;\n    }\n}\n\nsapi_windows_set_ctrl_handler('ctrl_handler');\nwhile (true); // Бесконечный цикл\n?>\n```\n\n### Дивіться також\n\n-   [sapi\\_windows\\_generate\\_ctrl\\_event()](function.sapi-windows-generate-ctrl-event.md) \\- Надіслати подію CTRL іншому процесу\n","title":"sapi\\_windows\\_set\\_ctrl\\_handler","contentType":2,"navigation":[{"function.sapi-windows-generate-ctrl-event.md":"« sapi\\_windows\\_generate\\_ctrl\\_event"},{"function.sapi-windows-vt100-support.md":"sapi\\_windows\\_vt100\\_support »"},{"index.md":"PHP Manual"},{"ref.misc.md":"Різні функції"}]}},"__N_SSG":true}