- [«socket_getopt](function.socket-getopt.md)
- [socket_getsockname »](function.socket-getsockname.md)

- [PHP Manual](index.md)
- [Функції сокету](ref.sockets.md)
- Запитує віддалену сторону зазначеного сокету, в результаті може
бути повернутий хост/порт або шлях у файловій системі Unix,
залежно від типу сокету

# socket_getpeername

(PHP 4 \>u003d 4.1.0, PHP 5, PHP 7, PHP 8)

socket_getpeername — Запитує віддалену сторону вказаного сокету,
результаті може бути повернено хост/порт або шлях у файловій системі
Unix, залежно від типу сокету

### Опис

**socket_getpeername**([Socket](class.socket.md) `$socket`, string
`&$address`, int `&$port` u003d **`null`**): bool

Запитує віддалену сторону зазначеного сокету, в результаті може бути
хост/порт або шлях у файловій системі Unix, в залежності від
типу сокету.

### Список параметрів

`socket`
Примірник [Socket](class.socket.md), створений за допомогою функції
[socket_create()](function.socket-create.md) або
[socket_accept()](function.socket-accept.md).

`address`
Якщо заданий сокет має тип **`AF_INET`** або **`AF_INET6`**,
**socket_getpeername()** поверне віддалену *IP-адресу* у відповідному
форматі (наприклад, `127.0.0.1` або `fe80::1`) у параметрі `address` і,
якщо необов'язковий параметр `port` присутній, також пов'язаний порт.

Якщо заданий сокет має тип **`AF_UNIX`**, **socket_getpeername()**
поверне шлях у файловій системі Unix (тобто `/var/run/daemon.sock`)
параметр `address`.

`port`
Якщо вказано, то міститиме порт, пов'язаний з адресою address.

### Значення, що повертаються

Повертає **`true`** у разі успішного виконання або **`false`** у
у разі виникнення помилки. **socket_getpeername()** також може
повернути **`false`**, якщо сокет мати відмінний від **`AF_INET`**,
**`AF_INET6`** або **`AF_UNIX`**, у цьому випадку код останньої помилки
сокету *НЕ* буде оновлено.

### Список змін

| Версія | Опис |
|--------|---------------------------------------- -------------------------------------------------- ----|
| 8.0.0 | `socket` тепер екземпляр класу [Socket] (class.socket.md); раніше був ресурсом (resource). |

### Примітки

> **Примітка**:
>
> **socket_getpeername()** не повинна бути використана із сокетами
> **`AF_UNIX`**, створеними за допомогою функції
> [socket_accept()](function.socket-accept.md). Тільки сокети,
> створені за допомогою [socket_connect()](function.socket-connect.md)
> або серверний сокет, до якого застосовано виклик функції
> [socket_bind()](function.socket-bind.md), будуть повертати
> осмислені значення.

> **Примітка**:
>
> Для того щоб **socket_getpeername()** повернула осмислене значення,
> сокет, якого вона застосовується, повинен розуміти концепцію " рівних
> відносин" (peer).

### Дивіться також

- [socket_getsockname()](function.socket-getsockname.md) -
Запитує локальну сторону зазначеного сокету, в результаті можна
отримати хост/порт або шлях у файловій системі Unix, залежно
від типу сокету
- [socket_last_error()](function.socket-last-error.md) - Повертає
останню помилку на сокеті
- [socket_strerror()](function.socket-strerror.md) - Повертає
рядок, що описує помилку сокету
