- [«Використання пакетів](install.macosx.packages.md)
- [компілювання PHP на macOS »](install.macosx.compile.md)

- [PHP Manual](index.md)
- [Установка macOS](install.macosx.md)
- Використання вбудованого PHP до macOS Monterey

## Використання вбудованого PHP до macOS Monterey

PHP поставлявся разом з macOS, починаючи з macOS X (10.0.0) до macOS
Монтерей (12.0.0). Включення PHP у стандартний веб-сервер робиться
простим розкоментуванням кількох рядків у конфігураційному файлі
Apache `httpd.conf` в той час як CGI та/або CLI включені за замовчуванням
(Доступні для використання термінальними програмами).

Увімкнення PHP згідно з наведеною нижче інструкцією призначено для
швидкого настроювання локального середовища розробки. *Вкрай рекомендується*
завжди оновлювати PHP до найновішої стабільної версії. Для будь-кого
ПЗ, що розвивається, нові версії випускаються для виправлення помилок і
додавання нової функціональності та PHP не є винятком. Читайте
відповідну документацію щодо встановлення на macOS, в якій
описуються всі подробиці. Наступні інструкції призначені для
початківців розробників та описують стандартну установку, що дозволяє
швидко розпочати роботу. Всім користувачам рекомендується
скомпілювати або встановити з репозиторію найновішу версію PHP.

Стандартне встановлення з використанням mod_php, який включається для
стандартного веб-сервера macOS (за замовчуванням сервер доступний через
системні настройки) включає наступні кроки:

1. Знайдіть та відкрийте конфігураційний файл Apache. За умовчанням він
розташований на шляху `/private/etc/apache2/httpd.conf` Використання
`Finder` або `Spotlight` для знаходження файлу може бути не простим,
оскільки він розташований у приватному просторі і належить
користувачеві `root`.

> **Примітка**: Один з варіантів, як відкрити цей файл -
> використовувати консольний редактор, наприклад, `nano`, запустивши його
> через термінал. Оскільки файл належить користувачеві `root`, для
> його відкриття буде необхідно використовувати команду `sudo` (яка
> підвищує привілеї користувача `root`). Просто запустіть
> додаток `Terminal`, введіть команду
> `sudo nano /private/etc/apache2/httpd.conf` і, коли буде
> запитаний пароль, введіть його. Корисні команди nano: `^w`
> (шукати), `^o` (зберегти) та `^x` (закрити), де `^` - це клавіша
> Ctrl.

> **Примітка**: Версії macOS до 10.5 містять застарілі версії PHP
> та Apache. У цьому випадку конфігураційний файл може розташовуватися
> на шляху `/etc/httpd/httpd.conf`.

2. У текстовому редакторі знайдіть наступні рядки та розкоментуйте їх
видаливши символ \# з початку рядка (ці рядки зазвичай знаходяться в
різних місцях файлу):

# LoadModule php5_module libexec/httpd/libphp5.so

# AddModule mod_php5.c

Запам'ятайте шлях до файлу, тому що при збиранні PHP у майбутньому може
потрібно змінити ці рядки.

3. Переконайтеся, що вибрані модулі будуть оброблятись як файли PHP
(.php .md та .inc).

Оскільки наступні вирази вже містяться в `httpd.conf` (за
станом на Mac Panther), одного разу включивши PHP, файли `.php` будуть
автоматично оброблятися ним.

<IfModule mod_php5.c>
# Якщо PHP дозволено, він буде обробляти файли .php та .phps.
AddType application/x-httpd-php .php
AddType application/x-httpd-php-source .phps

# Часто потрібно, щоб index.php розглядався як
сторінка за замовчуванням, якщо вона прямо не вказана.
# Зробити це можна так
<IfModule mod_dir.c>
DirectoryIndex index.md index.php
</IfModule>
</IfModule>

> **Примітка**:
>
> До macOS 10.5 (Leopard), до складу ОС був включений PHP 4, а не
> PHP 5. У такому разі в інструкціях вище просто поміняйте 5 на 4.

4. Переконайтеся, що DirectoryIndex завантажує індексний файл за промовчанням
Ця поведінка задається в `httpd.conf`. Зазвичай використовуються
`index.php` та `index.md`. За замовчуванням `index.php` дозволено. Якщо
потрібно, то вимкніть.

5. Визначте місце розташування `php.ini` або використовуйте налаштування по
замовчуванням Зазвичай на macOS він розташований на шляху
`/usr/local/php/php.ini` та виклик [phpinfo()](function.phpinfo.md)
виведе відповідну інформацію. Якщо `php.ini` не використовується,
PHP використовуватиме значення за замовчуванням. Також зверніть
увага на FAQ [пошук
php.ini](faq.installation.md#faq.installation.phpini).

6. Як знайти або встановити `DocumentRoot` DocumentRoot - це коренева
директорія веб-сервера, де лежать скрипти сайту. Зазвичай, шлях
за умовчанням він дорівнює `/Library/WebServer/Documents`, але його можна
змінити будь-який інший в `httpd.conf`. Також, для індивідуальних
користувачів, `DocumentRoot` може бути встановлений як
`/Users/yourusername/Sites`

7. Створення файлу з [phpinfo()](function.phpinfo.md)

Функція [phpinfo()](function.phpinfo.md) відображає інформацію про
PHP. Створіть у DocumentRoot скрипт із таким кодом:

`<?php phpinfo(); ?> `

8. Перезапустіть Apache та запитайте через браузер створений вище файл.

Для перезапуску виконайте `sudo apachectl graceful` у терміналі або
виконайте stop/start для "Personal Web Server" у системних
налаштуваннях macOS. За промовчанням локальні файли можна завантажити
ввівши в рядку браузера URL, наприклад, так:
`http://localhost/info.php`, або використовуючи DocumentRoot у локальній
директорії користувача, таким чином:
`http://localhost/~yourusername/info.php`

CLI (або більш старих версіях CGI) називається як `php` і міститься в
`/usr/bin/php`. Відкрийте термінал, прочитайте розділ документації PHP
[командний рядок](features.commandline.md), та запустіть `php -v` для
перевірки встановленої версії PHP. Виклик функції
[phpinfo()](function.phpinfo.md) також покаже цю інформацію.
