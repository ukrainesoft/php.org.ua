- [« Передача ідентифікатора сесії](session.idpassing.md)
- [Відстеження прогресу завантаження файлів за допомогою сесій
»](session.upload-progress.md)

- [PHP Manual](index.md)
- [Приклади](session.examples.md)
- Користувальницькі обробники сесії

## Користувальницькі обробники сесії

Для реалізації сховища даних (або будь-якого іншого сховища) слід
використовувати
[session_set_save_handler()](function.session-set-save-handler.md),
щоб створити набір функцій користувача сховища. Обробники
сесій можна створити, використовуючи клас
[SessionHandlerInterface](class.sessionhandlerinterface.md), або
розширити внутрішні обробники PHP, успадкувавши клас
[SessionHandler](class.sessionhandler.md).

Опції зворотного дзвінка, зазначені в
[session_set_save_handler()](function.session-set-save-handler.md),
є методами, що викликаються PHP протягом життєвого циклу сесії:
`open`, `read`, `write` і `close` і для службових завдань: `destroy` для
видалення сесії та `gc` для періодичного складання сміття.

Отже, PHP завжди необхідні обробники, що зберігають сесії.
За замовчуванням працює внутрішній обробник 'files', що зберігає сесії
у файли. Користувальницький обробник може бути встановлений, використовуючи
функцію
[session_set_save_handler()](function.session-set-save-handler.md).
Альтернативні обробники для збереження сесії також доступні
модулях PHP, таких як `sqlite`, `memcache` та `memcached` і можуть бути
встановлені за допомогою
[session.save_handler](session.configuration.md#ini.session.save-handler).

Коли стартує сесія, PHP внутрішньо викличе обробник `open` з
наступним викликом обробника `read`, який має повернути
закодований рядок - точно такий, який передавався для
збереження. Після повернення обробником `read` закодованого рядка,
PHP декодує її і заповнить масивом, що вийшов, суперглобальний.
масив `$_SESSION`.

Коли PHP завершує виконання скрипта (або коли викликана функція
[session_write_close()](function.session-write-close.md)), PHP
внутрішньо закодує суперглобальний масив `$_SESSION`, і передасть ці
дані з ідентифікатором сесії функції зворотного дзвінка `write`. Після
того, як відпрацює функція зворотного виклику `write`, PHP внутрішньо
Викличе обробник функції зворотного виклику `close`.

Коли сесія спеціально знищена, PHP викличе обробник `destroy` з
ідентифікатор сесії.

PHP буде викликати обробник функції зворотного виклику `gc` час від
часу, щоб помітити сесії як минулі відповідно до часу
життя сесій. Ця операція видаляє всі записи зі постійного сховища,
доступ до яких не здійснювався більш ніж інтервал часу, вказаний
у параметрі $lifetime.
