{"pageProps":{"page":{"slug":"function.password-needs-rehash.md","content":"# password\\_needs\\_rehash\n\n(PHP 5 >= 5.5.0, PHP 7, PHP 8)\n\npassword\\_needs\\_rehash — Перевіряє, чи зазначений хеш відповідає заданим опціям\n\n### Опис\n\n```methodsynopsis\npassword_needs_rehash(string $hash, string|int|null $algo, array $options = []): bool\n```\n\nПеревіряє, що зазначений хеш відповідає заданим опціям та заданому алгоритму. Якщо ні, то можна дійти невтішного висновку у тому, що хеш треба перестворити.\n\n### Список параметрів\n\n`hash`\n\nХеш, створений функцією [password\\_hash()](function.password-hash.md)\n\n`algo`\n\n[Константа](password.constants.md), Що позначає алгоритм хешування пароля, що використовується.\n\n`options`\n\nАсоціативний масив із опціями. За документацією щодо підтримуваних опцій для кожного алгоритму зверніться до розділу [Константи алгоритмів хешування паролів](password.constants.md)\n\n### Значення, що повертаються\n\nПовертає **`true`**якщо пароль повинен бути перехешований з використанням алгоритму `algo`и опций`options`, или**`false`**, якщо ні.\n\n### список змін\n\n| Версия | Опис |\n| --- | --- |\n| 7.4.0 | Параметр`algo` тепер чекає рядок (string), але все ще приймає число (int) зворотної сумісності. |\n\n### Приклади\n\n**Приклад #1 Приклад використання** password\\_needs\\_rehash()\\*\\*\\*\\*\n\n```php\n<?php\n\n$password = 'rasmuslerdorf';\n$hash = '$2y$10$YCFsG6elYca568hBi2pZ0.3LDL5wjgxct1N8w/oLR/jfHsiQwCqTS';\n\n$algorithm = PASSWORD_BCRYPT;\n// Значение bcrypt-стоимости может измениться по мере роста производительности оборудования\n$options = ['cost' => 12];\n\n// Сравниваем сохранённый хеш с открытым паролем\nif (password_verify($password, $hash)) {\n    // Проверяем, не изменился ли алгоритм или параметры\n    if (password_needs_rehash($hash, $algorithm, $options)) {\n        // Если были изменения, перехешируем и заменяем старый хеш новым\n        $newHash = password_hash($password, $algorithm, $options);\n\n        // Обновляем запись пользователя новым $newHash\n    }\n\n    // Авторизуем пользователя\n}\n?>\n```\n","title":"password\\_needs\\_rehash","contentType":2,"navigation":[{"function.password-hash.md":"« password\\_hash"},{"function.password-verify.md":"password\\_verify »"},{"index.md":"PHP Manual"},{"ref.password.md":"Функції хешування паролів"}]}},"__N_SSG":true}