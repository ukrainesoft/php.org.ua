{"pageProps":{"page":{"slug":"function.db2-next-result.md","content":"# db2\\_next\\_result\n\n(PECL ibm\\_db2 >= 1.0.0)\n\ndb2\\_next\\_result — Запитує наступний набір результатів із процедури, що зберігається.\n\n### Опис\n\n```methodsynopsis\ndb2_next_result(resource $stmt): resource|false\n```\n\nЦя процедура може повертати нуль або більше наборів результатів. Хоча ви обробляєте перший набір результатів так само, як і результати, що повертаються простим оператором SELECT, для отримання другого та наступних наборів результатів із процедури, що зберігається, ви повинні викликати функцію **db2\\_next\\_result()** та повернути результат у змінну PHP з унікальним ім'ям.\n\n### Список параметрів\n\n`stmt`\n\nПідготовлений оператор, який повертається функцією [db2\\_exec()](function.db2-exec.md) або [db2\\_execute()](function.db2-execute.md)\n\n### Значення, що повертаються\n\nПовертає новий ресурс оператора, що містить наступний набір результатів, якщо процедура, що зберігається, повернула інший набір результатів. Повертає **`false`**, якщо процедура, що зберігається, не повернула інший набір результатів.\n\n### Приклади\n\n**Приклад #1 Виклик збереженої процедури, що повертає кілька наборів результатів**\n\nУ наступному прикладі викликається процедура, що зберігається, яка повертає три набори результатів. Перший набір результатів витягується безпосередньо з того ж ресурсу операторів, для якого викликається оператор CALL, а другий та третій набори результатів вилучаються з ресурсів операторів, що повертаються викликами функції **db2\\_next\\_result()**\n\n```php\n<?php\n$conn = db2_connect($database, $user, $password);\n\nif ($conn) {\n  $stmt = db2_exec($conn, 'CALL multiResults()');\n\n  print \"Получение первого набора результатов\\n\";\n  while ($row = db2_fetch_array($stmt)) {\n    var_dump($row);\n  }\n\n  print \"\\nПолучение второго набора результатов\\n\";\n  $res = db2_next_result($stmt);\n  if ($res) {\n    while ($row = db2_fetch_array($res)) {\n      var_dump($row);\n    }\n  }\n\n  print \"\\nПолучение третьего набора результатов\\n\";\n  $res2 = db2_next_result($stmt);\n  if ($res2) {\n    while ($row = db2_fetch_array($res2)) {\n      var_dump($row);\n    }\n  }\n\n  db2_close($conn);\n}\n?>\n```\n\nРезультат виконання наведеного прикладу:\n\n```\nПолучение первого набора результатов\narray(2) {\n  [0]=>\n  string(16) \"Bubbles         \"\n  [1]=>\n  int(3)\n}\narray(2) {\n  [0]=>\n  string(16) \"Gizmo           \"\n  [1]=>\n  int(4)\n}\n\nПолучение второго набора результатов\narray(4) {\n  [0]=>\n  string(16) \"Sweater         \"\n  [1]=>\n  int(6)\n  [2]=>\n  string(5) \"llama\"\n  [3]=>\n  string(6) \"150.00\"\n}\narray(4) {\n  [0]=>\n  string(16) \"Smarty          \"\n  [1]=>\n  int(2)\n  [2]=>\n  string(5) \"horse\"\n  [3]=>\n  string(6) \"350.00\"\n}\n\nПолучение третьего набора результатов\narray(1) {\n  [0]=>\n  string(16) \"Bubbles         \"\n}\narray(1) {\n  [0]=>\n  string(16) \"Gizmo           \"\n}\n```\n","title":"db2\\_next\\_result","contentType":2,"navigation":[{"function.db2-lob-read.md":"« db2\\_lob\\_read"},{"function.db2-num-fields.md":"db2\\_num\\_fields »"},{"index.md":"PHP Manual"},{"ref.ibm-db2.md":"Функції IBM DB2"}]}},"__N_SSG":true}