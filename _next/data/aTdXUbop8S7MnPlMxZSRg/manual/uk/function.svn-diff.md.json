{"pageProps":{"page":{"slug":"function.svn-diff.md","content":"# svn\\_diff\n\n(PECL svn >= 0.1.0)\n\nsvn\\_diff - Рекурсивно показує відмінності двох файлів\n\n### Опис\n\n```methodsynopsis\nsvn_diff(    string $path1,    int $rev1,    string $path2,    int $rev2): array\n```\n\nРекурсивно показує різницю двох файлів `path1`и`path2`\n\n> **Зауваження** :\n> \n> Це не інструмент для перегляду загальних змін. Можуть бути розглянуті відмінності лише локальних файлів, які знаходяться в системі контролю версій SVN: для інших файлів відмінності переглянути не вдасться.\n\n### Список параметрів\n\n`path1`\n\nПерший шлях. Це може бути URL файлу/директорії у репозиторії SVN або шлях до локального файлу/директорії.\n\n> **Зауваження**: Відносні шляхи будуть обчислені, якби поточна робоча директорія була домашньою папкою самого PHP Щоб використовувати робочу директорію скрипта, що викликає, використовуйте [realpath()](function.realpath.md)или dirname(\\_\\_FILE\\_\\_\n\n**Увага**\n\nЯкщо шлях до локального файлу складається тільки із зворотних слішів (\\\\), без слєша (/), даному модулю не вдасться знайти необхідні файли. Завжди замінюйте всі зворотні сліші (\\\\) на слєші (/), використовуючи цю функцію.\n\n`rev1`\n\nНомер ревизии первого файла. Используйте константу\\*\\*`SVN_REVISION_HEAD`\\*\\*для задания самой последней ревизии.\n\n`path2`\n\nДругий шлях до файлу, аналогічно `path1`\n\n`rev2`\n\nНомер ревізії другого файлу, аналогічно `rev1`\n\n### Значення, що повертаються\n\nПовертає список масивів, що складається з двох потоків: перша - відмінності файлів; друга – помилки. Потоки можуть бути прочитані функцією [fread()](function.fread.md). При помилці повертає **`false`** або **`null`**\n\nЗа промовчанням висновок відмінностей буде в стандартному форматі Subversion, але також може використовуватися [»  зовнішнім інструментом показу відмінностей](http://svnbook.red-bean.com/en/1.2/svn.advanced.externaldifftools.md), залежно від налаштування Subversion.\n\n### Приклади\n\n**Приклад #1 Простий приклад**\n\nПриклад нижче ілюструє просте використання цієї функції та отримання даних із потоку.\n\n```php\n<?php\nlist($diff, $errors) = svn_diff(\n    'http://www.example.com/svnroot/trunk/foo', SVN_REVISION_HEAD,\n    'http://www.example.com/svnroot/branches/dev/foo', SVN_REVISION_HEAD\n);\nif (!$diff) exit;\n$contents = '';\nwhile (!feof($diff)) {\n  $contents .= fread($diff, 8192);\n}\nfclose($diff);\nfclose($errors);\nvar_dump($contents);\n?>\n```\n\nРезультат виконання наведеного прикладу:\n\n```\nIndex: http://www.example.com/svnroot/trunk/foo\n===================================================================\n--- http://www.example.com/svnroot/trunk/foo        (.../foo) (revision 23)\n+++ http://www.example.com/svnroot/branches/dev/foo (.../foo) (revision 27)\n // остальный вывод diff\n```\n\n**Приклад #2 Висновок різниці між двома ревізіями одного файлу**\n\nЦей приклад показує як реалізувати функцію-обертку, яка дозволяє користувачеві переглядати різницю між двома ревізіями одного файлу, використовуючи зовнішній шлях репозиторію (стандартний синтаксис такої реалізації дещо надлишковий):\n\n```php\n<?php\nfunction svn_diff_same_item($path, $rev1, $rev2) {\n    return svn_diff($path, $rev1, $path, $rev2);\n}\n?>\n```\n\n**Приклад #3 Більш зручний спосіб виведення відмінностей між двома файлами**\n\nЦей приклад показує як реалізувати функцію-обертку для виведення відмінностей між двома локальними файлами, яка є переносимою та позбавлена ​​помилок під час роботи з функцією [realpath()](function.realpath.md) і зворотним слішем.\n\n```php\n<?php\nfunction svn_diff_local($path1, $rev1, $path2, $rev2) {\n    $path1 = str_replace('\\\\', '/', realpath($path1));\n    $path2 = str_replace('\\\\', '/', realpath($path2));\n    return svn_diff($path1, $rev1, $path2, $rev2);\n}\n?>\n```\n\n### Примітки\n\n**Увага**\n\nЦя функція є *ЕКСПЕРИМЕНТАЛЬНОЇ*. Поведінка цієї функції, її ім'я та документація, що до неї належить, можуть змінитися в наступних версіях PHP без повідомлення. Використовуйте цю функцію на свій страх та ризик.\n\n### Дивіться також\n\n-   [» SVN-документація з svn diff](http://svnbook.red-bean.com/en/1.2/svn.ref.svn.c.diff.md)\n","title":"svn\\_diff","contentType":2,"navigation":[{"function.svn-delete.md":"« svn\\_delete"},{"function.svn-export.md":"svn\\_export »"},{"index.md":"PHP Manual"},{"ref.svn.md":"Функції SVN"}]}},"__N_SSG":true}