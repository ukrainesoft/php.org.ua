- [«Вступ](intro.mysqli.md)
- [Короткий посібник »](mysqli.quickstart.md)

- [PHP Manual](index.md)
- [MySQLi](book.mysqli.md)
-   Короткий огляд

# Короткий огляд

Цей розділ присвячений опису інструментів для взаємодії
PHP-додатків із базами даних MySQL.

*Що таке API?*

Інтерфейс програмування програм, або API, визначає набір
класів, методів, функцій та змінних, які можна викликати з вашого
програми для виконання поставлених завдань. Щодо PHP
програм, які повинні взаємодіяти з базами даних,
необхідні для цього API зазвичай представлені PHP-модулями.

API можуть бути процедурними чи об'єктно-орієнтованими. При
використання процедурних API ви викликаєте функції для виконання
будь-яких операцій, а у разі об'єктно-орієнтованих ви
инстанцируете класи і потім викликає методи створених об'єктів. Другий
підхід, як правило, краще, оскільки він більш сучасний і
сприяє написанню організованішого коду.

API MySQL надає кілька способів підключення до бази даних
PHP-програми. У цьому документі наводиться опис цих способів і
даються рекомендації, як вибрати найбільш підходяще рішення
конкретної ситуації.

*Що таке конектор?*

У документації MySQL термін *конектор (connector)* відноситься до частини
програмне забезпечення, що відповідає за підключення до сервера MySQL.
MySQL надає безліч конекторів для різних мов
програмування, зокрема PHP.

Для забезпечення взаємодії PHP програми із сервером баз даних вам
необхідно написати PHP-код, який виконує підключення до сервера,
виконання запитів до бази даних тощо. Від
програмного забезпечення сервера потрібно надати API, яке
ваш PHP-додаток зможе використовувати, а також функціонал,
відповідальний за взаємодію вашої програми з сервером.
Програмне забезпечення, що реалізує такий функціонал, зазвичай називають
конектором, так як воно дозволяє вашому додатку підключитися (*to
connect*) до сервера бази даних. У ряді випадків конектор для своїх потреб
може вимагати додаткові бібліотеки.

*Що таке драйвер?*

Драйвером називається частина програмного забезпечення, що відповідає за
взаємодія програми з певним типом серверів баз даних.
Драйвер також може звертатися до зовнішніх бібліотек, таких як
клієнтська бібліотека MySQL чи нативний драйвер MySQL. Ці бібліотеки
реалізують низькорівневий протокол взаємодії із сервером MySQL.

Як приклад можна навести рівень абстракції до роботи з базами
даних [Об'єкти даних PHP
(PDO)](mysqli.overview.md#mysqli.overview.pdo), який може
використовувати один з декількох драйверів, специфічних для конкретних
баз даних. Як такий драйвер може бути драйвер PDO
MySQL, який дозволяє PDO взаємодіяти з MySQL-сервером.

Іноді люди вживають терміни конектор та драйвер, як синоніми, і це
може збити з пантелику. У документації MySQL термін "драйвер" означає
ділянку програмного коду, що входить до складу конектора та відповідає за
зв'язок із конкретною СУБД.

*Що таке модуль?*

У документації до PHP ви будете неодноразово стикатися з терміном
*модуль*. Код PHP як такого складається з ядра та приєднаних до нього
необов'язкових модулів, які збільшують коло завдань, які можуть
виконувати ядро. Що стосуються MySQL модулі, такі як mysqli та драйвер
PDO MySQL, взаємодіють з ядром за допомогою фреймворку PHP модулів.

Зазвичай модулі надають свій API-інтерфейс PHP-програмісту, щоб
той міг програмно використати можливості модуля. Однак, деякі
модулі, що використовують фреймворк PHP-модулі, не надають
програмістам жодних інтерфейсів.

Драйвер PDO MySQL, наприклад, не надає API. Він
надає інтерфейс лише абстрактного шару PDO, що лежить вище.

Терміни API і модуль не можна сприймати як синоніми, оскільки модуль
може не надавати API програмісту.

*Які інструменти для роботи з MySQL пропонує API PHP?*

API надає на вибір два набори інструментів для підключення до
серверу баз даних MySQL:

- Модуль PHP mysqli

- Об'єкти даних PHP (PDO)

Кожен з них має свої переваги та недоліки. Метою даного огляду
є коротким описом ключових особливостей кожного API.

*Що таке PHP-модуль mysqli?

Модуль `mysqli`, або як його ще називають *покращений (improved)* модуль
MySQL був розроблений, щоб дати можливість програмістам у повній
мері скористатися функціоналом MySQL-сервера версій 4.1.3 та вище.
Модуль `mysqli` включається до постачання PHP версій 5 і вище.

`mysqli` має ряд переваг та удосконалень у порівнянні з
`mysql`, які полягають у наступному:

- Об'єктно-орієнтований інтерфейс

- Підтримка запитів, що готуються.

- Підтримка мультизапитів

- Підтримка транзакцій

- Покращені можливості налагодження

Нарівні з об'єктно-орієнтованим інтерфейсом модуль надає і
процедурний інтерфейс.

модуль `mysqli` збирається за допомогою фреймворку модулів PHP, його
вихідний код розташований у директорії `ext/mysqli`.

За додатковою інформацією про модуль `mysqli`, звертайтеся до розділу
[MySQLi](book.mysqli.md).

*Що таке PDO?*

Об'єкти даних PHP, або PDO, являють собою абстракцію конектора
баз даних для програм PHP. PDO надає API інтерфейс
взаємодії з базою даних, який залежить від конкретної СУБД.
Теоретично, під час використання PDO можна змінити сервер баз даних,
наприклад з Firebird на MySQL, і це призведе лише до незначних
змін у PHP-коді.

Як інші подібні абстракції можна привести JDBC для
Java-додатків та DBI для Perl.

Поряд з перевагами PDO, такими як простота та переносимість API,
є його головний недолік: PDO підтримує не всі можливості сервера
бази даних, доступні в останніх версіях MySQL. Наприклад, засобами
PDO не можна створювати множинні запити, хоча MySQL їх і
підтримує.

PDO збирається за допомогою фреймворку модулів PHP, його вихідний код
розташований у директорії `ext/pdo`.

Додаткову інформацію про PDO див. у розділі [PDO](book.pdo.md).

*Що таке драйвер PDO MYSQL?*

Драйвер PDO MYSQL не є API як таким, принаймні з точки
зору програміста. Драйвер PDO MYSQL розташовується між самим PDO та
сервером MySQL. Програміст викликає функції інтерфейсу API PDO, а PDO
свою чергу використовує драйвер PDO MYSQL для обміну даними та командами
із сервером MySQL.

Драйвер PDO MYSQL лише один із багатьох PDO-драйверів. Для більшості
СУБД є свої PDO драйвери, як наприклад драйвери для Firebird або
PostgreSQL серверів.

Драйвер PDO MYSQL збирається за допомогою фреймворку модулів PHP, його
вихідний код розташований у директорії `ext/pdo_mysql`. Він не
надає API-інтерфейс програмісту PHP.

Додатково про драйвер PDO MYSQL можна прочитати в розділі [MySQL
(PDO)] (ref.pdo-mysql.md).

*Що таке нативний драйвер MySQL для PHP?*

Щоб забезпечити взаємодію з сервером MySQL, модуль `mysqli` та
драйвер PDO MYSQL використовують низькорівневу бібліотеку, в якій
реалізовано необхідні протоколи. У минулому була доступна лише одна
така бібліотека: Клієнтська бібліотека MySQL (MySQL Client Library),
також відома як `libmysqlclient`.

Проте, інтерфейс, який надавала `libmysqlclient`, не був
оптимізований для взаємодії з PHP-додатками, оскільки спочатку
`libmysqlclient` розроблялася до роботи з С-додатками. Декілька
пізніше було розроблено нативний драйвер MySQL (MySQL Native Driver)
`mysqlnd`, який є альтернативою `libmysqlclient` для
PHP.

І модуль `mysqli` та драйвер PDO MySQL можна індивідуально налаштувати для
роботи або з `libmysqlclient`, або з `mysqlnd`. Оскільки `mysqlnd`
створювався спеціально для PHP-систем, у нього є перевага
швидкості та витрати пам'яті перед `libmysqlclient`. Тому його
використання краще.

Нативний драйвер MYSQL збирається за допомогою фреймворку модулів PHP, його
вихідний код розташований у директорії `ext/mysqlnd`. Він не надає
API-інтерфейс програміст PHP.

*Порівняння можливостей*

У наведеній таблиці наводиться порівняння функціоналу основних методів
підключення до MySQL з PHP:

| | Модуль PHP | PDO (використовуючи драйвер PDO MySQL та нативний драйвер MySQL) |
|-------------------------|----------------------- -|------------------------|
| Версія PHP, в якій було впроваджено функціонал | 5.0 | 5.0 |
| Статус розробки MySQL Розробка продовжується | Розробка продовжується |
| API підтримує набори символів Так | Так |
| API підтримує запити, що готуються на стороні сервера | Так | Так |
| API підтримує запити, що готуються на стороні клієнта | Ні | Так |
| API підтримує процедури, що зберігаються | Так | Так |
| API підтримує множинні запити Так | Здебільшого |
| Підтримка всього функціоналу MySQL 4.1+ Так | Здебільшого |

**Порівняння опцій MySQL API у PHP**
