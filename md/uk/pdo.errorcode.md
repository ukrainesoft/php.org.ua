- [«PDO::\_\_construct](pdo.construct.md)
- [PDO::errorInfo »](pdo.errorinfo.md)

- [PHP Manual](index.md)
- [PDO](class.pdo.md)
- Повертає код SQLSTATE результату останньої операції з базою даних

# PDO::errorCode

(PHP 5 u003d 5.1.0, PHP 7, PHP 8, PECL pdo u003d 0.1.0)

PDO::errorCode — Повертає код SQLSTATE результату останньої операції з
базою даних

### Опис

public **PDO::errorCode**(): ?string

### Список параметрів

Ця функція не має параметрів.

### Значення, що повертаються

Повертає SQLSTATE - п'ятисимвольний ідентифікатор, визначений у
стандарт ANSI SQL-92. Перші два символи SQLSTATE відповідають за клас
помилки, а наступні три визначають її підклас. Клас помилок 01 означає
попередження, якому супроводжує код, що повертається
SQL_SUCCESS_WITH_INFO. Класи відмінні від 01, крім 'IM',
означають помилки виконання запитів до бази даних. Клас 'IM'
свідчить про помилки та попередження, які викликані самою
реалізацією PDO (або, можливо, ODBC, якщо використовується драйвер ODBC).
Значення підкласу '000' у будь-якому класі означає, що підклас для цього
SQLSTATE відсутня.

**PDO::errorCode()** видає код помилки тільки для операцій, що здійснюються
з базою даних безпосередньо з PDO. Якщо створити об'єкт PDOStatement
методами [PDO::prepare()](pdo.prepare.md) або
[PDO::query()](pdo.query.md), і викликати помилку його методами,
**PDO::errorCode()** цю помилку не відобразить. Вам потрібно викликати
[PDOStatement::errorCode()](pdostatement.errorcode.md), щоб отримати
код помилки для операції, що виконується на певному об'єкті
PDOStatement.

Повертає **`null`**, якщо жодних операцій над базою даних засобами
PDO-об'єкта не вироблялося.

### Приклади

**Приклад #1 Отримання коду SQLSTATE**

` <?php/* Спровокуємо помилки -- таблиці BONES не існує */$dbh->exec("INSERT INTO bones(skull) VALUES ('lucy')");echo ""
PDO::errorCode(): ", $dbh->errorCode();?> `

Результат виконання цього прикладу:

PDO::errorCode(): 42S02

### Дивіться також

- [PDO::errorInfo()](pdo.errorinfo.md) - Отримує розширену
інформацію про помилку, що сталася під час останнього звернення до
базі даних
- [PDOStatement::errorCode()](pdostatement.errorcode.md) - Отримує
код SQLSTATE, пов'язаний з останньою операцією в об'єкті PDOStatement
- [PDOStatement::errorInfo()](pdostatement.errorinfo.md) - Отримання
розширеної інформації про помилку, що сталася внаслідок роботи
об'єкта PDOStatement
