- [«msg_remove_queue](function.msg-remove-queue.md)
- [msg_set_queue »](function.msg-set-queue.md)

- [PHP Manual](index.md)
- [Функції семафорів](ref.sem.md)
- Надсилання повідомлення в чергу повідомлень

#msg_send

(PHP 4 \>u003d 4.3.0, PHP 5, PHP 7, PHP 8)

msg_send — Надіслати повідомлення до черги повідомлень

### Опис

**msg_send**(
[SysvMessageQueue](class.sysvmessagequeue.md) `$queue`,
int `$message_type`,
string\|int\|float\|bool `$message`,
bool `$serialize` u003d **`true`**,
bool `$blocking` u003d **`true`**,
int `&$error_code` u003d **`null`**
): bool

**msg_send()** надсилає повідомлення `message` з типом `message_type`
(має бути більше 0) у чергу повідомлень, вказану параметром
`Queue`.

### Список параметрів

`queue`
Черга повідомлень.

`message_type`
Тип повідомлення. Має бути більше 0.

`message`
Тіло повідомлення.

> **Примітка**:
>
> Якщо `serialize` задано як **`false`**, ПОВИННО бути типу: string,
> int, float або bool. Інакше буде виведено попередження.

`serialize`
Необов'язковий параметр `serialize` керує тим, як буде надіслано
повідомлення `message`. За промовчанням `serialize` має значення **`true`**,
що означає серіалізацію `message` перед відправкою тим самим механізмом,
який використовується модулем обробки сесій. Це дозволяє надсилати
складні масиви та об'єкти в інші PHP-скрипти, або, якщо ви використовуєте
серіалізацію WDDX, інші сумісні з WDDX клієнти.

`blocking`
Якщо повідомлення в черзі повідомлення занадто велике, ваш скрипт буде
чекати на прочитання повідомлень іншим процесом та звільнення місця під
надіслане вами повідомлення. Це називається блокуванням; Ви можете
відключити цю можливість, встановивши для `blocking` значення
**`false`**, у цьому випадку **msg_send()** негайно повертатиме
**`false`** якщо повідомлення занадто велике, та встановлювати
необов'язковий параметр `error_code` у значення **`MSG_EAGAIN`**, що
буде вказувати вам на необхідність спробувати надіслати повідомлення
трохи пізніше.

`error_code`
Якщо функція відпрацює невдало, цей код буде записаний в системну
змінну errno.

### Значення, що повертаються

Повертає **`true`** у разі успішного виконання або **`false`** у
у разі виникнення помилки.

У разі успішного завершення структура даних черги повідомлень оновиться
наступним чином: `msg_lspid` буде містити ідентифікатор
процесу, `msg_qnum` збільшиться на 1, а `msg_stime` буде містити
поточний час.

### Список змін

| Версія | Опис |
|--------|---------------------------------------- -------------------------------------------------- ------------------------------------|
| 8.0.0 | Параметр `queue` тепер очікує на екземпляр [SysvMessageQueue](class.sysvmessagequeue.md); раніше очікували ресурс (resource). |

### Дивіться також

- [msg_remove_queue()](function.msg-remove-queue.md) - Видалення
черги повідомлень
- [msg_receive()](function.msg-receive.md) - Отримання повідомлення з
черги повідомлень
- [msg_stat_queue()](function.msg-stat-queue.md) - Отримання
інформації із структури даних черги повідомлень
- [msg_set_queue()](function.msg-set-queue.md) - Встановлення
інформації у структурі даних черги повідомлень
