- [«dba_nextkey](function.dba-nextkey.md)
- [dba_optimize »](function.dba-optimize.md)

- [PHP Manual](index.md)
- [Функції DBA](ref.dba.md)
- Відкриває базу даних

#dba_open

(PHP 4, PHP 5, PHP 7, PHP 8)

dba_open — Відкриває базу даних

### Опис

**dba_open**(
string `$path`,
string `$mode`,
string `$handler` u003d ?,
string `...$args`
): resource \ | false

**dba_open()** встановлює екземпляр бази даних шляхом `path` в
режимі `mode` використовуючи обробник `handler`.

### Список параметрів

`path`
Дорога до файлів бази даних.

`mode`
`r` для режиму читання, `w` для режиму читання/запису з вже існуючою
базою даних. `c` для режиму читання/запису та створення бази даних, якщо
вона ще не була створена, і `n` для створення, обрізання та доступу для
читання/запису. База даних створюється з архітектурою BTree, інші
архітектури (на зразок Hash або Queue) не підтримуються.

Додатково за допомогою наступного символу ви можете встановити режим
блокування бази даних `l` для блокування бази даних за допомогою файлу
`.lck`, або `d` для самостійного блокування засобами самої бази.
Важливо, щоб усі ваші програми робили це узгоджено.

Якщо ви хочете просто перевірити доступ і не хочете чекати на звільнення
блокування, можна додати третій символ `t`. Якщо ви абсолютно
впевнені, що вам не потрібно використовувати блокування бази даних, ви можете
використовувати символ `-` замість `l` або `d`. Якщо жоден із символів:
`d`, `l` або `-` не заданий, база даних використовуватиме режим `d`.

> **Примітка**:
>
> Одночасно може лише один процес, пишучий основу
> даних. Коли ви використовуєте dba на веб-сервері, і більш ніж один
> запит вимагає запису до бази даних, вони можуть це робити тільки
> По черзі. Також, у момент читання запис недоступний. Модуль
> dba використовує блокування для запобігання небажаній поведінці.
> Вивчіть наступну таблицю:
>
> | вже відкрито | `mode` u003d "rl" | `mode` u003d "rlt" | `mode` u003d "wl" | `mode` u003d "wlt" | `mode` u003d "rd" | `mode` u003d "rdt" | `mode` u003d "wd" | `mode` u003d "wdt" |
> |---------------|---------------|---------------- |---------------|----------------|---------------| ----------------|---------------|----------------|
> | не відкрито | Добре | Добре | Добре | Добре | Добре | Добре | Добре | Добре |
> | `mode` u003d "rl" | Добре | Добре | wait | false | illegal | illegal | illegal | illegal |
> | `mode` u003d "wl" | wait | false | wait | false | illegal | illegal | illegal | illegal |
> | `mode` u003d "rd" | illegal | illegal | illegal | illegal | Добре | Добре | wait | false |
> | `mode` u003d "wd" | illegal | illegal | illegal | illegal | wait | false | wait | false |
>
> **Блокування DBA**
>
> - ok: другий виклик буде успішним.
> - wait: другий виклик чекатиме, доки перший не викличе
> [dba_close()](function.dba-close.md).
> - false: другий виклик поверне **`false`**.
> - illegal: ви не можете змішувати модифікатори ``l'' та ``d'` в
> параметрі `mode`.

`handler`
Ім'я [обробника](dba.requirements.md), який буде використовуватись
для доступу на шляху `path`. Йому передаються всі необов'язкові параметри,
задані у **dba_open()**.

`args`
Необов'язковий рядок (string) параметрів, що передаються драйверу.

Драйвери `cdb`, `cdb_make`, `flatfile`, `inifile`, `qdbm` та `tcadb` не
підтримують додаткові параметри.

Драйвери `db1`, `db2`, `db3`, `db4`, `dbm`, `gdbm`, та `ndbm`
підтримують єдиний додатковий параметр $filemode, який
має те саме значення, що і параметр `$mode` функції
[chmod()](function.chmod.md) і за умовчанням дорівнює `0644`.

Драйвер `lmdb` приймає два додаткові параметри. Перший дозволяє
вказати `$filemode` (дивіться опис вище), а другий - `$mapsize`, де
значення має бути кратним розміру сторінки ОС або нуль, щоб
використовувати розмір картки за замовчуванням. Параметр `$mapsize`
підтримується починаючи з PHP 7.3.14 та 7.4.2, відповідно.

### Значення, що повертаються

Повертає обробник у разі успішного виконання або **`false`**
у разі виникнення помилки.

### Список змін

| Версія | Опис |
|---------------|--------------------------------- ---------------------------------------|
| 7.3.14, 7.4.2 | Драйвер `lmdb` тепер підтримує додатковий параметр `$mapsize`. |

### Дивіться також

- [dba_popen()](function.dba-popen.md) - Встановити постійний
екземпляр бази даних
- [dba_close()](function.dba-close.md) - Закриває базу даних DBA
