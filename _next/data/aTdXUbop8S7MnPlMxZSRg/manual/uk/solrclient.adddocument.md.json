{"pageProps":{"page":{"slug":"solrclient.adddocument.md","content":"# SolrClient::addDocument\n\n(PECL solr >= 0.9.2)\n\nSolrClient::addDocument — Додає документ до індексу\n\n### Опис\n\n```methodsynopsis\npublic SolrClient::addDocument(SolrInputDocument $doc, bool $overwrite = true, int $commitWithin = 0): SolrUpdateResponse\n```\n\nМетод додає документ до індексу.\n\n### Список параметрів\n\n`doc`\n\nПримірник SolrInputDocument.\n\n`overwrite`\n\nЧи слід перезаписувати існуючий документ чи ні. Якщо вказано **`false`**, буде дозволено дублікати (кілька документів з однаковим ID).\n\n**Увага**\n\nУ PECL Solr < 2.0 $allowDups використовувався замість $overwrite, який виконує самі функції з повністю протилежним прапором bool.\n\n$allowDups = false так само, як і $overwrite = true\n\n`commitWithin`\n\nКількість мілісекунд для автоматичної фіксації документа. Доступно починаючи з Solr 1.4. За промовчанням (0) означає вимкнено.\n\nЯкщо значення вказано, залишається контроль над тим, коли робити фіксацію для самого Solr, оптимізуючи кількість коммітів до мінімуму, при цьому дотримуючись вимог до затримки оновлення, і Solr автоматично виконає фіксацію, коли настане найстаріше додавання в буфер.\n\n### Значення, що повертаються\n\nПовертає об'єкт [SolrUpdateResponse](class.solrupdateresponse.md) або викидає виняток у разі помилки.\n\n### Помилки\n\nВикидає [SolrClientException](class.solrclientexception.md)якщо клієнт відмовив або виникла проблема з підключенням.\n\nВикидає [SolrServerException](class.solrserverexception.md)якщо сервер Solr не зміг обробити запит.\n\n### Приклади\n\n**Приклад #1 Приклад використання** SolrClient::addDocument()\\*\\*\\*\\*\n\n```php\n<?php\n\n$options = array\n(\n    'hostname' => SOLR_SERVER_HOSTNAME,\n    'login'    => SOLR_SERVER_USERNAME,\n    'password' => SOLR_SERVER_PASSWORD,\n    'port'     => SOLR_SERVER_PORT,\n);\n\n$client = new SolrClient($options);\n\n$doc = new SolrInputDocument();\n\n$doc->addField('id', 334455);\n$doc->addField('cat', 'Software');\n$doc->addField('cat', 'Lucene');\n\n$updateResponse = $client->addDocument($doc);\n\n// вам нужно будет зафиксировать изменения, которые будут записаны, если вы не использовали $commitWithin\n$client->commit();\n\nprint_r($updateResponse->getResponse());\n\n?>\n```\n\nВисновок наведеного прикладу буде схожим на:\n\n```\nSolrObject Object\n(\n    [responseHeader] => SolrObject Object\n        (\n            [status] => 0\n            [QTime] => 1\n        )\n\n)\n```\n\n**Приклад #2 Приклад використання** SolrClient::addDocument()\\*\\*\\*\\*\n\n```php\n<?php\n\n$options = array\n(\n    'hostname' => SOLR_SERVER_HOSTNAME,\n    'login'    => SOLR_SERVER_USERNAME,\n    'password' => SOLR_SERVER_PASSWORD,\n    'port'     => SOLR_SERVER_PORT,\n);\n\n$client = new SolrClient($options);\n\n$doc = new SolrInputDocument();\n\n$doc->addField('id', 334455);\n$doc->addField('cat', 'Software');\n$doc->addField('cat', 'Lucene');\n\n// Нет необходимости вызывать commit(), потому что передаётся $commitWithin, поэтому Solr Server будет автоматически фиксировать в течение 10 секунд\n$updateResponse = $client->addDocument($doc, false, 10000);\n\nprint_r($updateResponse->getResponse());\n\n?>\n```\n\nВисновок наведеного прикладу буде схожим на:\n\n```\nSolrObject Object\n(\n    [responseHeader] => SolrObject Object\n        (\n            [status] => 0\n            [QTime] => 1\n        )\n\n)\n```\n\n### Дивіться також\n\n-   [SolrClient::addDocuments()](solrclient.adddocuments.md) \\- Додає колекцію екземплярів SolrInputDocument до індексу\n-   [SolrClient::commit()](solrclient.commit.md) \\- Завершує всі додавання/видалення, зроблені в індексі\n","title":"SolrClient::addDocument","contentType":2,"navigation":[{"class.solrclient.md":"« SolrClient"},{"solrclient.adddocuments.md":"SolrClient::addDocuments »"},{"index.md":"PHP Manual"},{"class.solrclient.md":"SolrClient"}]}},"__N_SSG":true}