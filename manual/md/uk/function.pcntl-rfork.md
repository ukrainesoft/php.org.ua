- [«pcntl_getpriority](function.pcntl-getpriority.md)
- [pcntl_setpriority »](function.pcntl-setpriority.md)

- [PHP Manual](index.md)
- [Функції PCNTL](ref.pcntl.md)
- взаємодіє з ресурсами процесу

#pcntl_rfork

(PHP 8 \>u003d 8.1.0)

pcntl_rfork — взаємодіє з ресурсами процесу

### Опис

**pcntl_rfork**(int `$flags`, int `$signal` u003d 0): int

Взаємодіє з ресурсами процесу.

### Список параметрів

`flags`
Параметр `flags` визначає, які ресурси процесу
(батьківського) поділяються новим процесом (дочірнім) або
ініціалізуються у значення за замовчуванням.

`flags` є логічним OR (або) деякої підмножини з:

- **`RFPROC`**: Якщо встановлено, створюється новий процес; в протилежному
у разі зміни зачіпають поточний процес.
- **`RFNOWAIT`**: Якщо встановлено, дочірній процес буде відокремлений від
батьківського. При виході дочірній процес не залишатиме статус
для батька забрати його.
- **`RFFDG`**: Якщо встановлено, копіюється таблиця дескрипторів
файлів зухвалої сторони; Інакше два процеси
Використовують одну таблицю.
- **`RFCFDG`**: Якщо встановлено, новий процес починається з чистої
таблицею дескрипторів файлів. Взаємовиключний прапор із `RFFDG`.
- **`RFLINUXTHPN`**: Якщо встановлено, ядро повертатиме SIGUSR1
замість SIGCHILD при виході із дочірнього потоку. Призначений для
повідомлення батьківського процесу про вихід із Linux-клону.

`signal`
Номер сигналу.

### Значення, що повертаються

У разі успішного виконання у потоці виконання батьківського процесу
повертається PID дочірнього процесу, а в потоці виконання дочірнього
процесу повертається `0`. У разі виникнення помилки у контексті
батька буде повернено `-1`, дочірній процес не буде створено та буде
видано помилку PHP.

### Приклади

**Приклад #1 Приклад використання **pcntl_rfork()****

` <?php$pid u003d pcntl_rfork(RFNOWAIT|RFTSIGZMB, SIGUSR1);if ($pid > 0) {  // Батьківський процес. var_dump($pid);} else {  // Дочірній процес. var_dump($pid); sleep(2); // оскільки дочірній процесс не чекає, ми бачимо його "pid".}?> `

Результатом виконання цього прикладу буде щось подібне:

int(77093)
int(0)

### Дивіться також

- [pcntl_fork()](function.pcntl-fork.md) - Розгалужити (fork) поточний
запущений процес
- [pcntl_waitpid()](function.pcntl-waitpid.md) - Очікує або
повертає статус породженого дочірнього процесу
- [pcntl_signal()](function.pcntl-signal.md) - Встановлення обробника
сигналу
- [cli_set_process_title()](function.cli-set-process-title.md) -
Встановлює заголовок процесу
