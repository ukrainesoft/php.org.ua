{"pageProps":{"page":{"slug":"mongodb-driver-manager.startsession.md","content":"# MongoDB\\\\Driver\\\\Manager::startSession\n\n(mongodb >=1.4.0)\n\nMongoDB\\\\Driver\\\\Manager::startSession — Запуск нового клієнтського сеансу для використання з цим клієнтом\n\n### Опис\n\n```methodsynopsis\nfinal public MongoDB\\Driver\\Manager::startSession(?array $options = null): MongoDB\\Driver\\Session\n```\n\nСтворює [MongoDB\\\\Driver\\\\Session](class.mongodb-driver-session.md) для вказаних параметрів. Сеанс потім може бути вказаний під час виконання команд, запитів та операцій запису.\n\n> **Зауваження** [MongoDB\\\\Driver\\\\Session](class.mongodb-driver-session.md) може використовуватися тільки з [MongoDB\\\\Driver\\\\Manager](class.mongodb-driver-manager.md), З якого він був створений.\n\n### Список параметрів\n\n`options`\n\n**options**\n\n| Опция | Тип | Опис | По умолчанию |\n| --- | --- | --- | --- |\n| causalConsistency | bool |  |  |\n| Налаштовує причинну узгодженість у сеансі. Якщо **`true`**, кожна операція у сеансі буде причинно упорядкована після попередньої операції читання чи запису. Встановіть на **`false`**, щоб вимкнути причинну узгодженість. |  |  |  |\n\nСмотрите[» Причинну узгодженість](https://www.mongodb.com/docs/manual/core/read-isolation-consistency-recency/#causal-consistency) у посібнику MongoDB для отримання додаткової інформації.\n\n**`true`**| | defaultTransactionOptions | array |\n\nПараметри за замовчуванням для застосування до нових транзакцій. Ці параметри використовуються, якщо вони не перевизначаються, коли транзакція запускається з різним значенням кожного параметра.\n\n**options**\n\n| Опция | Тип | Опис |\n| --- | --- | --- |\n| maxCommitTimeMS | integer |  |\n| Максимальний період часу в мілісекундах, протягом якого може виконуватись одна команда `commitTransaction` |  |  |\n\nЯкщо зазначено, `maxCommitTimeMS` має бути 32-розрядним цілим числом зі знаком, великим або рівним нулю.\n\n| | readConcern |[MongoDB\\\\Driver\\\\ReadConcern](class.mongodb-driver-readconcern.md)\n\nГарантія для застосування до операції.\n\nЦя опція доступна в MongoDB 3.2+ і призведе до виключення під час виконання, якщо вказана для старої версії сервера.\n\n| | readPreference |[MongoDB\\\\Driver\\\\ReadPreference](class.mongodb-driver-readpreference.md)\n\nПеревага читання, що використовується для вибору сервера для виконання операції.\n\n| | writeConcern |[MongoDB\\\\Driver\\\\WriteConcern](class.mongodb-driver-writeconcern.md)\n\nГарантія запису для застосування до операції.\n\nЦя опція доступна у MongoDB 4.0+.\n\n`[]`| | snapshot | bool |\n\nОпція настроює читання миттєвих знімків у сесії. Якщо **`true`**, временная метка будет получена из первой поддерживаемой операции чтения в сессии (т.е`find` `aggregate`или unsharded`distinct`). Наступні операції читання в рамках сесії будуть використовувати рівень гарантії читання `\"snapshot\"` для читання даних, підтверджених більшістю, із цієї тимчасової мітки. Встановіть значення **`false`** для вимикання моментальних знімків.\n\nДля читання моментальних знімків потрібно MongoDB 5.0+, і їх не можна використовувати з причинно-узгодженим зв'язком, транзакціями чи операціями запису. Якщо `\"snapshot\"`равен\\*\\*`true`\\*\\* `\"causalConsistency\"` за замовчуванням буде **`false`**\n\nСмотрите[» гарантію читання \"snapshot\"](https://www.mongodb.com/docs/manual/reference/read-concern-snapshot/#read-concern-and-atclustertime) у посібнику MongoDB для отримання додаткової інформації.\n\n**`false`**\n\n### Значення, що повертаються\n\nПовертає [MongoDB\\\\Driver\\\\Session](class.mongodb-driver-session.md)\n\n### Помилки\n\n-   При помилці парсингу аргумент кидає виняток[MongoDB\\\\Driver\\\\Exception\\\\InvalidArgumentException](class.mongodb-driver-exception-invalidargumentexception.md)\n-   Викидає виняток [MongoDB\\\\Driver\\\\Exception\\\\InvalidArgumentException](class.mongodb-driver-exception-invalidargumentexception.md)якщо опції`\"causalConsistency\"`и`\"snapshot\"`рівні\\*\\*`true`\\*\\*\n-   Викидає виняток [MongoDB\\\\Driver\\\\Exception\\\\RuntimeException](class.mongodb-driver-exception-runtimeexception.md)якщо сеанс не може бути створений (наприклад, libmongoc не підтримує шифрування).\n\n### список змін\n\n| Версия | Опис |\n| --- | --- |\n| PECL mongodb 1.11.0 |  |\n| Добавлен параметр`\"snapshot\"` |  |\n\n| | PECL mongodb 1.6.0 |\n\nПараметр`\"maxCommitTimeMS\"`добавлен в`\"defaultTransactionOptions\"`\n\n| | PECL mongodb 1.5.0 |\n\nДобавлена опция`\"defaultTransactionOptions\"`\n\n### Дивіться також\n\n-   [MongoDB\\\\Driver\\\\Session](class.mongodb-driver-session.md)\n-   [» Причинна узгодженість](https://www.mongodb.com/docs/manual/core/read-isolation-consistency-recency/#causal-consistency)у посібнику MongoDB\n","title":"MongoDB\\\\Driver\\\\Manager::startSession","contentType":2,"navigation":[{"mongodb-driver-manager.selectserver.md":"« MongoDB\\\\Driver\\\\Manager::selectServer"},{"class.mongodb-driver-command.md":"MongoDB\\\\Driver\\\\Command »"},{"index.md":"PHP Manual"},{"class.mongodb-driver-manager.md":"MongoDB\\\\Driver\\\\Manager"}]}},"__N_SSG":true}