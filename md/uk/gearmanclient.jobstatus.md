- [« GearmanClient::getErrno](gearmanclient.geterrno.md)
- [GearmanClient::ping »](gearmanclient.ping.md)

- [PHP Manual](index.md)
- [GearmanClient](class.gearmanclient.md)
- Набуття статусу виконання фонового завдання

# GearmanClient::jobStatus

#gearman_job_status

(PECL gearman u003d 0.5.0)

GearmanClient::jobStatus -- gearman_job_status — Отримання статусу
виконання фонового завдання

### Опис

Об'єктно-орієнтований стиль (метод):

public **GearmanClient::jobStatus**(string `$job_handle`): array

Отримує поточний стан виконання завдання, запущеного у фоновому режимі
режимі. Інформація про стан включає дані про те, що завдання
відомо обробнику, чи виконується завдання на даний момент, а також
відсоток опрацьованих даних.

### Список параметрів

`job_handle`
Дескриптор завдання, який надається сервером Gearman

### Значення, що повертаються

Масив, що містить інформацію про завдання, що відповідає заданому
дескриптору завдання. Перший елемент масиву вказує, чи знає
обробник про це завдання. Другий елемент вказує, чи виконується
завдання на даний момент. Третій та четвертий елементи відповідають за частку
виконаної роботи та загальний обсяг даних, відповідно.

### Приклади

**Приклад #1 Моніторинг процесу обробки, що довго виконується у фоновому
режимі завдання**

` <?php/* створюємо клієнта */$gmclientu003d new GearmanClient();/* додаємо сервер за мовчанням */$gmclient->addServer();/* запускаємо клієнт */$jo reverse", "this is a test");if ($gmclient->returnCode() !u003d GEARMAN_SUCCESS){ echo "Не удалося виконати завдання
";  exit;}$done u003d false;do{   sleep(3);   $stat u003d $gmclient->jobStatus($job_handle);   if (!$stat[0])| done u003d true;   echo "Виконується: " . ($stat[1] ? "true" : "false") . ", оброблено: " . $stat[2] . ", | "
";}while(!$done);echo "завершено!
";?> `

Результатом виконання цього прикладу буде щось подібне:

Виконується: true, оброблено: 3, всього: 14
Виконується: true, оброблено: 6, всього: 14
Виконується: true, оброблено: 9, всього: 14
Виконується: true, оброблено: 12, всього: 14
Виконується: false, оброблено: 0, всього: 0
завершено!

### Дивіться також

- [GearmanClient::doStatus()](gearmanclient.dostatus.md) - Отримання
статусу завдання, що виконується
