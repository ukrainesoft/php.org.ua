- [«Хешування паролів](faq.passwords.md)
- [PHP та COM »](faq.com.md)

- [PHP Manual](index.md)
- [FAQ.md)
- PHP та HTML

# PHP та HTML

PHP та HTML тісно взаємодіють: PHP може генерувати HTML, а HTML
може передавати інформацію PHP. Перед читанням питань у цьому розділі
важливо щоб ви розуміли як [отримувати змінні ззовні
PHP](language.variables.external.md). Сторінки посібника з цієї
Тема містить багато прикладів.

1. [Яке кодування/декодування я повинен виконувати під час передачі
значення через форму/URL?](#faq.md.encoding)
2. [Я намагаюся використати \<input typeu003d"image"\>, але змінні $foo.x
та $foo.y недоступні. $\_GET\['foo.x'\] також немає. Де
вони?](#faq.md.form-image)
3. [Як створити масиви в HTML \<form\>?](#faq.md.arrays)
4. [Як отримати всі результати з HTML-тегу select з атрибутом
multiple?](#faq.md.select-multiple)
5. [Як я можу передати змінну з JavaScript
PHP?](#faq.md.javascript-variable)

**Яке кодування/декодування я повинен виконувати при передачі значення через форму/URL?**
Тут кілька етапів, на яких кодування є важливим. Припустимо, що у
вас є $data типу string, що містить рядок, який ви хочете
передати без кодування. Ось ці етапи:

- Інтерпретація HTML. Для того, щоб задати довільний рядок, ви
*мають* укласти її в подвійні лапки і використовувати
[htmlspecialchars()](function.mdspecialchars.md) для
кодування.

- URL: URL складається з кількох частин. Якщо ви хочете, щоб ваші
дані були сприйняті як один елемент, ви повинні * закодувати їх
за допомогою [urlencode()](function.urlencode.md).

**Приклад #1 Прихований елемент HTML-форми**

` <?php    echo '<input typeu003d"hidden" valueu003d"' . htmlspecialchars($data) . '" />'."
";?> `

> **Примітка**: Використовувати [urlencode()](function.urlencode.md) для
> `$data` неправильно, тому що кодувати дані в
> [urlencode()](function.urlencode.md) це обов'язок браузера. всі
> популярні браузери роблять це правильно. Зауважте, що це відбувається
> незалежно від методу (наприклад, GET або POST). Ви помітите це
> лише у випадку GET-запиту, оскільки POST-запити зазвичай приховані.

**Приклад #2 Дані, редаговані користувачем**

` <?php    echo "<textarea nameu003d'mydata'>
";   echo htmlspecialchars($data)."
";   echo "</textarea>";?> `

> **Примітка**: Дані показуються браузером як передбачається,
> тому що браузер інтерпретуватиме екрановані HTML-символи.
> При надсиланні через GET або POST дані будуть закодовані (urlencoded)
> браузер для передачі і декодовані (urldecoded) PHP. Тому вам не
> треба виконувати будь-яке кодування/декодування url
> самостійно, все обробляються автоматично.

**Приклад #3 В URL**

` <?php    echo '<a hrefu003d"' . htmlspecialchars("/nextpage.php?stageu003d23&datau003d" .      urlencode($data)) . '">'."
";?> `

> **Примітка**: Насправді ви підробляєте HTML GET-запитом,
> тому необхідно вручну закодувати
> ([urlencode()](function.urlencode.md)) дані.

> **Примітка**: Вам потрібно застосувати
> [htmlspecialchars()](function.mdspecialchars.md) до всього URL,
> оскільки URL з'являється як значення HTML-атрибута. В цьому випадку,
> браузер спочатку розкодує все значення (зворотна операція
> [htmlspecialchars()](function.mdspecialchars.md)) і потім передасть
> URL. PHP зрозуміє URL правильно, так як ви закодували дані з
> [urlencode()](function.urlencode.md). Ви помітите, що `&` в URL
> замінюється на `&`. Хоча більшість браузерів це виправляють, якщо
> ви забудете про це, але все ж таки це не завжди можливо. Тому, навіть
> якщо ваш URL не динамічний, вам потрібно закодувати його за допомогою
> [htmlspecialchars()](function.mdspecialchars.md).



**Я намагаюся використовувати \<input typeu003d"image"\>, але змінні `$foo.x` та `$foo.y` недоступні. `$_GET['foo.x']` також немає. Де вони?**
При відправленні форми замість стандартної кнопки відправлення можливо
використовувати зображення з тегом як:

```htmlcode
<input typeu003d"image" srcu003d"image.gif" nameu003d"foo" />
````

Коли користувач клікає десь на картинці, серверу буде надіслано
супутня форма з двома додатковими змінними: `foo.x` та
`foo.y`.

Оскільки імена `foo.x` та `foo.y` не дозволені в PHP, вони автоматично
перетворюються на `foo_x` та `foo_y`. Тобто точки замінюються на
підкреслення. Таким чином, ви звертаєтеся до цих змінних так само,
як і до будь-яких інших, описаних у розділі про отримання [змінних ззовні
PHP](language.variables.external.md). Наприклад, `$_GET['foo_x']`.

> **Примітка**:
>
> Пробіли в іменах змінних запиту перетворюються на підкреслення.



**Як створити масиви в HTML \<form\>?**
Для того, щоб результати \<form\> були передані вашому PHP скрипту як
[масив](language.types.array.md), називайте елементи \<input\>,
\<select\> або \<textarea\> наступним чином:

```htmlcode
<input nameu003d"MyArray[]" />
<input nameu003d"MyArray[]" />
<input nameu003d"MyArray[]" />
<input nameu003d"MyArray[]" />
````

Зауважте квадратні дужки після імені змінної, це робить її
масивом. Ви можете згрупувати елементи в масив, привласнюючи одне і
те саме ім'я різним елементам:

```htmlcode
<input nameu003d"MyArray[]" />
<input nameu003d"MyArray[]" />
<input nameu003d"MyOtherArray[]" />
<input nameu003d"MyOtherArray[]" />
````

Це створить два масиви, MyArray і MyOtherArray, які будуть передані
PHP-скрипт. Також можна задати певні ключі для ваших
масивів:

```htmlcode
<input nameu003d"AnotherArray[]" />
<input nameu003d"AnotherArray[]" />
<input nameu003d"AnotherArray[email]" />
<input nameu003d"AnotherArray[phone]" />
````

Масив AnotherArray тепер міститиме ключі 0, 1, email та phone.

> **Примітка**:
>
> Визначати ключі масивів HTML необов'язково. Якщо ви не встановите
> ключі, масив заповнюється порядку появи елементів у формі. Наш
> перший приклад міститиме ключі 0, 1, 2 та 3.

Також дивіться [Функції для роботи з масивами](ref.array.md) та
[Змінні ззовні PHP](language.variables.external.md).



**Як отримати всі результати з HTML-тегу select з атрибутом multiple?**
HTML-тег select із зазначеним multiple дозволяє користувачеві вибрати
кілька елементів зі списку. Ці елементи потім передаються обробнику
форми. Проблема в тому, що всі вони передані з одним і тим же ім'ям.
Наприклад:

```htmlcode
<select nameu003d"var" multipleu003d"yes">
````

Кожна обрана опція надійде обробнику форми як:

varu003doption1
varu003doption2
varu003doption3


Кожна опція перезаписуватиме вміст попередньої змінної
`$var`. Рішення - скористатися можливістю PHP - "масив з елемента
форми". Слід використовувати таке:

```htmlcode
<select nameu003d"var[]" multipleu003d"yes">
````

Це вкаже PHP обробляти `$var` як масив та кожне привласнення
значення var\[\] додасть елемент масив. Першим елементом буде
$var[0], наступним - $var[1] і т.д. Функція
[count()](function.count.md) може бути використана для визначення,
скільки елементів було вибрано, а функція [sort()](function.sort.md) -
для сортування масиву опцій, якщо це необхідно.

Зауважте, що якщо ви використовуєте JavaScript, то `[]` в імені елемента
можуть викликати проблеми, якщо ви намагаєтеся звертатися до елемента
імені. Натомість використовуйте числовий ідентифікатор елемента форми
або укласти ім'я змінної в одинарні лапки і використовуйте його як
індекс масиву елементів, наприклад:

variable u003d document.forms[0].elements['var[]'];




**Як я можу передати змінну з JavaScript до PHP?**
Оскільки JavaScript є (зазвичай) клієнтською технологією, а PHP, як
правило, серверне, і оскільки HTML - протокол "без стану", ці два
мови не можуть обмінюватись змінними безпосередньо.

Проте, можна передавати змінні між ними. Один із способів
досягти цього - згенерувати JavaScript-код з PHP та примусово
оновлювати браузер, надсилаючи певні змінні назад PHP-скрипту.
Нижченаведений приклад показує як це зробити - він дозволяє
PHP-коду отримати висоту та ширину екрану, що, зазвичай, можливо тільки
на стороні клієнта.

**Приклад #4 Генерування JavaScript з PHP**

` <?phpif (isset($_GET['width'])|AND| $_GET['width'] ."<br />
";  echo "Висота екрана: ". $_GET['height'] ."<br />
";} else {  // передаємо змінні з розмірами  // (зберігаємо оригінальний рядок запиту  //   -- post змінні потрібно буде пере    
";  echo " location.hrefu003d\"${_SERVER['SCRIPT_NAME']}?${_SERVER['QUERY_STRING']}"             . "&widthu003d\" + screen.width + \"&heightu003d\" + screen.height;
";  echo "</script>
"; exit();}?> `
