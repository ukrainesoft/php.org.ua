{"pageProps":{"page":{"slug":"zookeeper.addauth.md","content":"# Zookeeper::addAuth\n\n(PECL zookeeper >= 0.1.0)\n\nZookeeper::addAuth — Вказує облікові дані програми\n\n### Опис\n\n```methodsynopsis\npublic\n   Zookeeper::addAuth(string $scheme, string $cert, callable $completion_cb = null): bool\n```\n\nПрограма викликає цю функцію, щоб вказати свої облікові дані для цілей автентифікації. Сервер буде використовувати провайдера безпеки, вказаного в параметрі схеми, для автентифікації клієнтського з'єднання. Якщо запит про аутентифікацію не вдався: - з'єднання з сервером буде розірвано. - Спостерігач викликається зі значенням ZOO\\_AUTH\\_FAILED\\_STATE як параметр стану.\n\n### Список параметрів\n\n`scheme`\n\nІдентифікатор схеми автентифікації. Вбудована підтримка: \"digest\" автентифікації на основі пароля\n\n`cert`\n\nОблікові дані програми. Фактичне значення залежить від схеми.\n\n`completion_cb`\n\nПідпрограма, щоб викликати, коли запит завершується. Один із наступних кодів результату може бути переданий в callback-функцію завершення: - Операція ZOK успішно завершена - ZAUTHFAILED автентифікація не вдалася\n\n### Значення, що повертаються\n\nПовертає **`true`** у разі успішного виконання або \\*\\*`false`\\*\\*в случае возникновения ошибки.\n\n### Помилки\n\nМетод видає PHP-повідомлення про помилку/попередження, коли кількість параметрів чи типи неправильні або операція завершується невдало.\n\n**Застереження**\n\nПочинаючи з версії 0.3.0, метод генерує виняток [ZookeeperException](class.zookeeperexception.md) та його похідні.\n\n### Приклади\n\n**Приклад #1 Приклад використання** Zookeeper::addAuth()\\*\\*\\*\\*\n\nДодавання аутентифікації перед запитом вузла.\n\n```php\n<?php\n$zookeeper = new Zookeeper('locahost:2181');\n$path = '/path/to/node';\n$value = 'nodevalue';\n$zookeeper->set($path, $value);\n\n$zookeeper->addAuth('digest', 'user0:passwd0');\n$r = $zookeeper->get($path);\nif ($r)\n  echo $r;\nelse\n  echo 'Ошибка';\n?>\n```\n\nРезультат виконання наведеного прикладу:\n\n```\nnodevalue\n```\n\n### Дивіться також\n\n-   [Zookeeper::create()](zookeeper.create.md) \\- Створює синхронно вузол\n-   [Zookeeper::setAcl()](zookeeper.setacl.md) \\- Встановлює ACL, пов'язаний із вузлом синхронно\n-   [Zookeeper::getAcl()](zookeeper.getacl.md) \\- Синхронно отримує ACL, пов'язаний із вузлом\n-   [Стан ZooKeeper](class.zookeeper.md#zookeeper.class.constants.states)\n-   [ZookeeperException](class.zookeeperexception.md)\n","title":"Zookeeper::addAuth","contentType":2,"navigation":[{"class.zookeeper.md":"« Zookeeper"},{"zookeeper.close.md":"Zookeeper::close »"},{"index.md":"PHP Manual"},{"class.zookeeper.md":"Zookeeper"}]}},"__N_SSG":true}