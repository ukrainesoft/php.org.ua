{"pageProps":{"page":{"slug":"gearmanworker.settimeout.md","content":"# GearmanWorker::setTimeout\n\n(PECL gearman >= 0.6.0)\n\nGearmanWorker::setTimeout — Завдання часу очікування на введення/виведення на сокеті\n\n### Опис\n\n```methodsynopsis\npublic GearmanWorker::setTimeout(int $timeout): true\n```\n\nВстановлює час очікування на активність на сокеті.\n\n### Список параметрів\n\n`timeout`\n\nТимчасовий інтервал у мілісекундах. Негативне значення вказує на відсутність обмежень.\n\n### Значення, що повертаються\n\nФункція завжди повертає **`true`**\n\n### Приклади\n\n**Приклад #1 Простий обробник із п'ятисекундним часом очікування**\n\n```php\n<?php\n\necho \"Запуск\\n\";\n\n# создаём объект обработчика.\n$gmworker= new GearmanWorker();\n\n# добавляем сервер по умолчанию (localhost).\n$gmworker->addServer();\n\n# регистрируем функцию \"reverse\" на сервере\n$gmworker->addFunction(\"reverse\", \"reverse_fn\");\n\n# устанавливаем время ожидания 5 секунд\n$gmworker->setTimeout(5000);\n\necho \"Ожидание задания...\\n\";\nwhile(@$gmworker->work() || $gmworker->returnCode() == GEARMAN_TIMEOUT)\n{\n  if ($gmworker->returnCode() == GEARMAN_TIMEOUT)\n  {\n    # Обычно хотелось бы сделать что-то полезное здесь ...\n    echo \"Время вышло. Ожидание следующего задания...\\n\";\n    continue;\n  }\n\n  if ($gmworker->returnCode() != GEARMAN_SUCCESS)\n  {\n    echo \"Код возврата: \" . $gmworker->returnCode() . \"\\n\";\n    break;\n  }\n}\n\necho \"Готово\\n\";\n\nfunction reverse_fn($job)\n{\n  return strrev($job->workload());\n}\n\n?>\n```\n\nЯкщо запустити цей обробник і не передавати йому завдань, висновок буде таким:\n\n```\nЗапуск\nОжидание задания...\nВремя вышло. Ожидание следующего задания...\nВремя вышло. Ожидание следующего задания...\nВремя вышло. Ожидание следующего задания...\n```\n\n### Дивіться також\n\n-   [GearmanWorker::timeout()](gearmanworker.timeout.md) \\- Отримання значення час очікування запитів на сокеті\n","title":"GearmanWorker::setTimeout","contentType":2,"navigation":[{"gearmanworker.setoptions.md":"« GearmanWorker::setOptions"},{"gearmanworker.timeout.md":"GearmanWorker::timeout »"},{"index.md":"PHP Manual"},{"class.gearmanworker.md":"GearmanWorker"}]}},"__N_SSG":true}