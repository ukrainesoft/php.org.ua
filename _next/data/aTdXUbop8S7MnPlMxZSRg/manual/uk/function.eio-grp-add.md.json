{"pageProps":{"page":{"slug":"function.eio-grp-add.md","content":"# eio\\_grp\\_add\n\n(PECL eio >= 0.0.1dev)\n\neio\\_grp\\_add — Додає запит до групи запитів\n\n### Опис\n\n```methodsynopsis\neio_grp_add(resource $grp, resource $req): void\n```\n\n**eio\\_grp\\_add()** додає запит до групи запитів.\n\n### Список параметрів\n\n`grp`\n\nВказівник на групу запитів, повернутий [eio\\_grp()](function.eio-grp.md)\n\n`req`\n\nПокажчик на ресурс\n\n### Значення, що повертаються\n\nФункція не повертає значення після виконання.\n\n### Приклади\n\n**Приклад #1 Створення групи запитів**\n\n```php\n<?php\n/*\n * Создание группы запросов для открытия, чтения и закрытия файла\n */\n\n//Создание временного файла и запись в него нескольких байт\n$temp_filename = dirname(__FILE__) .\"/eio-file.tmp\";\n$fp = fopen($temp_filename, \"w\");\nfwrite($fp, \"some data\");\nfclose($fp);\n\n/* Вызывается, когда группа запросов будет выполнена */\nfunction my_grp_done($data, $result) {\n var_dump($result == 0);\n @unlink($data);\n}\n\n/* Вызывается после выполнения eio_open() */\nfunction my_grp_file_opened_callback($data, $result) {\n global $grp;\n\n // $result должен содержать дескриптор файла\n var_dump($result > 0);\n\n // Создание запроса eio_read() и добавление в группу\n // Дескриптор файла передаётся в callback-функцию\n $req = eio_read($result, 4, 0,\n   EIO_PRI_DEFAULT, \"my_grp_file_read_callback\", $result);\n eio_grp_add($grp, $req);\n}\n\n/* Вызывается после выполнения eio_read() */\nfunction my_grp_file_read_callback($data, $result) {\n global $grp;\n\n // Чтение байтов\n var_dump($result);\n\n // Создание запроса eio_close() и добавление в группу\n // $data должна содержать дескриптор файла\n $req = eio_close($data);\n eio_grp_add($grp, $req);\n}\n\n// Создание группу запросов\n$grp = eio_grp(\"my_grp_done\", $temp_filename);\nvar_dump($grp);\n\n// Создание запроса eio_open() и добавление в группу\n$req = eio_open($temp_filename, EIO_O_RDWR | EIO_O_APPEND , NULL,\n  EIO_PRI_DEFAULT, \"my_grp_file_opened_callback\", NULL);\neio_grp_add($grp, $req);\n\n// Выполнение запросов\neio_event_loop();\n?>\n```\n\nВисновок наведеного прикладу буде схожим на:\n\n```\nresource(6) of type (EIO Group Descriptor)\nbool(true)\nstring(4) \"some\"\nbool(true)\n```\n\n### Дивіться також\n\n-   [eio\\_grp()](function.eio-grp.md) \\- Створює групу запитів\n-   [eio\\_grp\\_cancel()](function.eio-grp-cancel.md) \\- Скасує групу запитів\n-   [eio\\_grp\\_limit()](function.eio-grp-limit.md) \\- Встановлює граничну кількість запитів у групі\n","title":"eio\\_grp\\_add","contentType":2,"navigation":[{"function.eio-get-last-error.md":"« eio\\_get\\_last\\_error"},{"function.eio-grp-cancel.md":"eio\\_grp\\_cancel »"},{"index.md":"PHP Manual"},{"ref.eio.md":"Eio Функції"}]}},"__N_SSG":true}