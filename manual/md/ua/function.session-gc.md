- [« session_encode](function.session-encode.md)
- [session_get_cookie_params
»](function.session-get-cookie-params.md)

- [PHP Manual](index.md)
- [Функції для роботи з сесіями](ref.session.md)
- Виконує складання сміття даних сесії

# session_gc

(PHP 7 \>u003d 7.1.0, PHP 8)

session_gc — Виконує складання сміття даних сесії

### Опис

**session_gc**(): int\|false

**session_gc()** використовується для виконання складання сміття (garbage
collection) для даних сесії. За промовчанням PHP виконує засновану на
ймовірність складання сміття сміття.

Складання сміття, що базується на ймовірності в цілому працює, але має
кілька проблем. 1) На низькозавантажених сайтах дані сесії можуть
не видалені протягом бажаного часу. 2) На високозавантажених
сайти складання сміття може виконуватися занадто часто. 3) Складання сміття
виконується під час обробки запиту користувача, що призводить до
додаткову затримку для користувача.

Тому рекомендується виконувати складання сміття на робочих системах
періодично, наприклад, використовувати завдання cron у UNIX-подібних
системах. При цьому переконайтесь, що вимкнули складання сміття на основі
ймовірності, встановивши
[session.gc_probability](session.configuration.md#ini.session.gc-probability)
у 0.

### Список параметрів

Ця функція не має параметрів.

### Значення, що повертаються

**session_gc()** повертає кількість віддалених даних сесії за успішного
виконанні та **`false`** у разі невдачі.

Старі обробники сесії не повертають кількість віддалених даних сесії, а
тільки прапор успіху/невдачі. У цьому випадку кількість віддалених даних сесії
завжди буде одно 1, незалежно від фактичної кількості віддалених
даних.

### Приклади

**Приклад #1 Приклад використання **session_gc()** у диспетчерах задач,
таких як cron**

` <?php// Примечание: Данный скрипт должен выполняться под тем же пользователем процесса веб-сервера.// Нужна активная сессия для инициализации доступа к хранилищу данных сессии.session_start();// Принудительное выполнение сборки мусораsession_gc();// Очистка ідентифікатора сесіїsession_destroy();?> `

**Приклад #2 Приклад використання **session_gc()** у скрипті, доступному
користувачу**

` <?php// Примечание: session_gc() рекомендуется использовать через скрипт диспетчера задач,// но можно использовать и следующим образом.// Используется для проверки времени последней сборки мусора$gc_time u003d '/tmp/php_session_last_gc';$gc_period u003d 1800 ;session_start();// Виконувати складання сміття тільки за спливом періоду,// оскільки виклик session_gc() при кожному запиті(і)( c( c) - $gc_period) session_gc (); touch($gc_time); }} else {    touch($gc_time);}?> `

### Дивіться також

- [session_start()](function.session-start.md) - Стартує нову
сесію, або відновлює існуючу
- [session_destroy()](function.session-destroy.md) - Знищує все
дані сесії
- [session.gc_probability](session.configuration.md#ini.session.gc-probability)
