- [«PDO::quote](pdo.quote.md)
- [PDO::setAttribute »](pdo.setattribute.md)

- [PHP Manual](index.md)
- [PDO](class.pdo.md)
- Відкат транзакції

# PDO::rollBack

(PHP 5 u003d 5.1.0, PHP 7, PHP 8, PECL pdo u003d 0.1.0)

PDO::rollBack - Відкат транзакції

### Опис

public **PDO::rollBack**(): bool

Відкочує зміни в базі даних, зроблені в рамках поточної
транзакції, яка була створена методом
[PDO::beginTransaction()](pdo.begintransaction.md).

Якщо СУБД включено режим автофіксації змін, ця функція
відновить цей режим після відкату.

Деякі СУБД, включаючи MySQL, автоматично неявно фіксують зміни,
коли зустрічаються вирази мови визначення бази даних (DDL),
виконувані у межах транзакції. Ця неявна фіксація унеможливлює
відкот інших змін, зроблених у рамках цієї транзакції.

### Список параметрів

Ця функція не має параметрів.

### Значення, що повертаються

Повертає **`true`** у разі успішного виконання або **`false`** у
у разі виникнення помилки.

### Помилки

Якщо активної транзакції немає, буде викинуто виняток
[PDOException](class.pdoexception.md).

> **Примітка**: Виняток буде викликано, навіть якщо атрибут
> **`PDO::ATTR_ERRMODE`** не виставлений у **`PDO::ERRMODE_EXCEPTION`**.

### Приклади

**Приклад #1 Відкат транзакції**

У наступному прикладі створюється транзакція і виконуються два запити,
які модифікують дані в базі, а потім база повертається до
вихідного стану. У MySQL, проте, вираз DROP TABLE
автоматично фіксує зміни, тому їх відкат не відбудеться.

` <?php/* Починаємо транзакцію, відключення автоматичної фіксації */$dbh->beginTransaction();/* Змінюємо схему бази даних і даних в таблицях */$sth >  $sth u003d $dbh->exec("UPDATE dessert    SET name u003d 'hamburger'");/* Усвідомлюємо свою помилку і відкочуємо транзакцію *|$повертається| > `

### Дивіться також

- [PDO::beginTransaction()](pdo.begintransaction.md) - Ініціалізація
транзакції
- [PDO::commit()](pdo.commit.md) - Фіксує транзакцію
- [Транзакції та автофіксація змін](pdo.transactions.md)
