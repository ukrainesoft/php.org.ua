{"pageProps":{"page":{"slug":"function.imap-search.md","content":"# imap\\_search\n\n(PHP 4, PHP 5, PHP 7, PHP 8)\n\nimap\\_search — Отримує повідомлення, які відповідають заданим критеріям\n\n### Опис\n\n```methodsynopsis\nimap_search(    IMAP\\Connection $imap,    string $criteria,    int $flags = SE_FREE,    string $charset = \"\"): array|false\n```\n\nЦя функція здійснює пошук у поточній поштовій скриньці, відкритій у потоці IMAP.\n\nНаприклад, щоб знайти всі невідповідні повідомлення надіслані від мами (Mom), потрібно буде використовувати \"UNANSWERED FROM mom\". Пошук реєстронезалежний. Наведений список критеріїв вилучено із вихідних кодів UW c-client і може бути неповним або не зовсім точним (додатково дивіться [» RFC1176](http://www.faqs.org/rfcs/rfc1176), секція \"tag SEARCH search\\_criteria\").\n\n### Список параметрів\n\n`imap`\n\nЕкземпляр [IMAP\\\\Connection](class.imap-connection.md)\n\n`criteria`\n\nРядок, розділений пробілами, в якому можна використовувати наступні ключові слова. Будь-які аргументи, що складаються з кількох слів, повинні бути поміщені в подвійні лапки (наприклад `FROM \"joey smith\"`). Результат співпадатиме з усіма заданими в параметрі `criteria`критериями.\n\n-   ALL - повертати всі повідомлення, що відповідають іншим критеріям\n-   ANSWERED - повідомлення з виставленим прапором\\\\\\\\ANSWERED\n-   BCC \"string\" - повідомлення в полі Bcc: яких є \"string\"\n-   BEFORE \"date\" - повідомлення з Date: до \"date\"\n-   BODY \"string\" - повідомлення, що містять \"string\" в тілі\n-   CC \"string\" - повідомлення у полі Cc: яких є \"string\"\n-   DELETED - видалені повідомлення\n-   FLAGGED - повідомлення із встановленим прапором\\\\\\\\FLAGGED (іноді називають \"Термінове\" або \"Важливе\")\n-   FROM \"string\" - повідомлення в полі From: яких є \"string\"\n-   KEYWORD \"string\" - повідомлення із ключовим словом \"string\"\n-   NEW - нові повідомлення\n-   OLD - старі повідомлення\n-   ON \"date\" - повідомлення з Date: рівним \"date\"\n-   RECENT означає повідомлення з виставленим прапором\\\\\\\\RECENT\n-   SEEN - прочитані повідомлення (встановлений прапор\\\\\\\\SEEN)\n-   SINCE \"date\" - повідомлення з Date: після \"date\"\n-   SUBJECT \"string\" - повідомлення в полі Subject: яких є \"string\"\n-   TEXT \"string\" - повідомлення з текстом \"string\"\n-   TO \"string\" - повідомлення в полі To: яких є присутнім \"string\"\n-   UNANSWERED - невідповідні повідомлення\n-   UNDELETED - не видалені повідомлення\n-   UNFLAGGED - повідомлення без встановлених прапорів\n-   UNKEYWORD \"string\" - повідомлення, що не мають ключового слова \"string\"\n-   UNSEEN - непрочитані повідомлення\n\n`flags`\n\nКоректні значення `flags` - це **`SE_UID`**, що призведе до того, що у поверненому масиві замість номерів повідомлень будуть міститися їх UID.\n\n`charset`\n\nКодування MIME, у якому відбуватиметься пошук.\n\n### Значення, що повертаються\n\nПовертає номери повідомлень або їх UID.\n\nПовертає **`false`**, якщо повідомлення не знайдені, або критерії зазначені в `criteria` некоректні.\n\n### список змін\n\n| Версия | Опис |\n| --- | --- |\n| 8.1.0 | Параметр`imap` тепер чекає екземпляр [IMAP\\\\Connection](class.imap-connection.md); раніше очікувався ресурс ([resource](language.types.resource.md) `imap` |\n\n### Приклади\n\n**Приклад #1 Приклад використання** imap\\_search()\\*\\*\\*\\*\n\n```php\n<?php\n$imap   = imap_open('{imap.example.com:993/imap/ssl}INBOX', 'foo@example.com', 'pass123', OP_READONLY);\n\n$some   = imap_search($imap, 'SUBJECT \"HOWTO be Awesome\" SINCE \"8 August 2008\"', SE_UID);\n$msgnos = imap_search($imap, 'ALL');\n$uids   = imap_search($imap, 'ALL', SE_UID);\n\nprint_r($some);\nprint_r($msgnos);\nprint_r($uids);\n?>\n```\n\nВисновок наведеного прикладу буде схожим на:\n\n```\nArray\n(\n    [0] => 4\n    [1] => 6\n    [2] => 11\n)\nArray\n(\n    [0] => 1\n    [1] => 2\n    [2] => 3\n    [3] => 4\n    [4] => 5\n    [5] => 6\n)\nArray\n(\n    [0] => 1\n    [1] => 4\n    [2] => 6\n    [3] => 8\n    [4] => 11\n    [5] => 12\n)\n```\n\n### Дивіться також\n\n-   [imap\\_listscan()](function.imap-listscan.md) \\- Отримує список поштових скриньок, імена яких містять заданий рядок\n","title":"imap\\_search","contentType":2,"navigation":[{"function.imap-scanmailbox.md":"« imap\\_scanmailbox"},{"function.imap-set-quota.md":"imap\\_set\\_quota »"},{"index.md":"PHP Manual"},{"ref.imap.md":"Функції IMAP"}]}},"__N_SSG":true}