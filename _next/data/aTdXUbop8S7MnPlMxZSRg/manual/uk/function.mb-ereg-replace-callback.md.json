{"pageProps":{"page":{"slug":"function.mb-ereg-replace-callback.md","content":"# mb\\_ereg\\_replace\\_callback\n\n(PHP 5 >= 5.4.1, PHP 7, PHP 8)\n\nmb\\_ereg\\_replace\\_callback — Виконує пошук та заміну за регулярним виразом за допомогою багатобайтових кодувань, обробляючи збіги callback-функцією\n\n### Опис\n\n```methodsynopsis\nmb_ereg_replace_callback(    string $pattern,    callable $callback,    string $string,    ?string $options = null): string|false|null\n```\n\nПеревіряє рядок `string` на збіг із шаблоном `pattern`потім замінює знайдений текст виведенням функції `callback`\n\nПоведінка цієї функції майже ідентична функції [mb\\_ereg\\_replace()](function.mb-ereg-replace.md), за винятком того, що замість рядка заміни `replacement`необходимо определять функцию`callback`\n\n### Список параметрів\n\n`pattern`\n\nШаблон регулярного виразу.\n\nВ параметре`pattern` можна вказувати багатобайтові символи.\n\n`callback`\n\nCallback-функція, яка буде викликана і отримає масив тих, що збіглися в рядку `string` елементів. Callback-функція має повертати рядок заміни.\n\nПередається до параметра `callback` функції **mb\\_ereg\\_replace\\_callback()** callback-функція часто потрібна лише одному місці. Можна використовувати [анонімні функції](functions.anonymous.md), щоб визначити callback-функцію усередині виклику функції **mb\\_ereg\\_replace\\_callback()**. Вчиняючи так, розробник отримує всю інформацію про виклик в одному місці і не забруднює простір імен функцій ім'ям callback-функції, яка більше ніде не буде потрібна.\n\n`string`\n\nРядок (string) для перевірки.\n\n`options`\n\nВаріант пошуку. Пояснення наведено в описі функції [mb\\_regex\\_set\\_options()](function.mb-regex-set-options.md)\n\n### Значення, що повертаються\n\nПовертає результуючий рядок у разі успішного виконання або **`false`** у разі виникнення помилки. Якщо рядок `string` неприпустима для поточного кодування, повертається значення **`null`**\n\n### список змін\n\n| Версия | Опис |\n| --- | --- |\n| 8.0.0 | Параметр`options` тепер може набувати значення null. |\n| 7.1.0 | Функція перевіряє, чи допустимий рядок `string` для поточного кодування. |\n\n### Приклади\n\n**Приклад #1 Приклад використання функції** mb\\_ereg\\_replace\\_callback()\\*\\*\\*\\*\n\n```php\n<?php\n\n// этот текст был утверждён в 2002\n// мы хотим обновить его для 2003\n$text = \"День смеха — 04/01/2002\\n\";\n$text.= \"Последнее Рождество было 12/24/2001\\n\";\n\n// callback-функция\nfunction next_year($matches)\n{\n  // как обычно: в $matches[0] будет полное совпадение\n  // $matches[1] — совпадение для первого подшаблона,\n  // заключённое в «(...)» и т. д.\n  return $matches[1] . ($matches[2] + 1);\n}\n\necho mb_ereg_replace_callback(\n    \"(\\d{2}/\\d{2}/)(\\d{4})\",\n    \"next_year\",\n    $text,\n);\n\n?>\n```\n\nРезультат виконання наведеного прикладу:\n\n```\nДень смеха - 04/01/2003\nПоследнее Рождество было 12/24/2002\n```\n\n**Приклад #2 Приклад використання функції** mb\\_ereg\\_replace\\_callback()\\*\\* з анонімною функцією\\*\\*\n\n```php\n<?php\n// этот текст был утверждён в 2002\n// мы хотим обновить его для 2003\n$text = \"День смеха — 04/01/2002\\n\";\n$text.= \"Последнее Рождество было 12/24/2001\\n\";\n\necho mb_ereg_replace_callback(\n    \"(\\d{2}/\\d{2}/)(\\d{4})\",\n    function ($matches) {\n        return $matches[1] . ($matches[2] + 1);\n    },\n    $text,\n);\n?>\n```\n\n### Примітки\n\n> **Зауваження** :\n> \n> Для цієї функції буде використано внутрішнє кодування або кодування, встановлене функцією [mb\\_regex\\_encoding()](function.mb-regex-encoding.md)\n\n### Дивіться також\n\n-   [mb\\_regex\\_encoding()](function.mb-regex-encoding.md) \\- Встановлює/отримує кодування символів для однобайтового регулярного виразу\n-   [mb\\_ereg\\_replace()](function.mb-ereg-replace.md) \\- Замінює за регулярним виразом за допомогою багатобайтових кодувань\n-   [Анонімні функції](functions.anonymous.md)\n","title":"mb\\_ereg\\_replace\\_callback","contentType":2,"navigation":[{"function.mb-ereg-match.md":"« mb\\_ereg\\_match"},{"function.mb-ereg-replace.md":"mb\\_ereg\\_replace »"},{"index.md":"PHP Manual"},{"ref.mbstring.md":"Функції для роботи з багатобайтовими рядками"}]}},"__N_SSG":true}