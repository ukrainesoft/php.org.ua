{"pageProps":{"page":{"slug":"mongodb-driver-clientencryption.construct.md","content":"# MongoDB\\\\Driver\\\\ClientEncryption::\\_\\_construct\n\n(mongodb >=1.14.0)\n\nMongoDB\\\\Driver\\\\ClientEncryption::\\_\\_construct — Створює новий об'єкт ClientEncryption\n\n### Опис\n\n```methodsynopsis\nfinal public MongoDB\\Driver\\ClientEncryption::__construct(array $options)\n```\n\nСтворює новий об'єкт [MongoDB\\\\Driver\\\\ClientEncryption](class.mongodb-driver-clientencryption.md) із зазначеними опціями.\n\n### Список параметрів\n\n`options`\n\n**Опції**\n\n| Опция | Тип | Опис |\n| --- | --- | --- |\n| keyVaultClient | [MongoDB\\\\Driver\\\\Manager](class.mongodb-driver-manager.md) | Менеджер, який використовується для маршрутизації запитів ключів даних. Опція є обов'язковою (на відміну функції [MongoDB\\\\Driver\\\\Manager::createClientEncryption()](mongodb-driver-manager.createclientencryption.md) |\n| keyVaultNamespace | string | Повний простір імен (наприклад, `\"databaseName.collectionName\"`), що означає колекцію, яка містить усі ключі даних, що використовуються для шифрування та дешифрування. Обов'язковий параметр. |\n| kmsProviders | array |  |\n| Документ, який містить конфігурацію для одного або кількох провайдерів KMS, які використовуються для шифрування ключів даних. Підтримуються провайдери `\"aws\"` `\"azure\"` `\"gcp\"`и`\"local\"`, і принаймні один з них повинен бути вказаний. |  |  |\n\nЯкщо для `\"aws\"` `\"azure\"`или`\"gcp\"` вказано порожній документ, драйвер спробує налаштувати провайдера, використовуючи [» Автоматичні облікові дані](https://github.com/mongodb/specifications/blob/master/source/client-side-encryption/client-side-encryption.rst#automatic-credentials)\n\nФормат для`\"aws\"` виглядає наступним чином:\n\naws: { accessKeyId:, secretAccessKey:, sessionToken:}\n\nФормат для`\"azure\"` виглядає наступним чином:\n\nazure: { tenantId:, clientId:, clientSecret:, identityPlatformEndpoint: // За замовчуванням \"login.microsoftonline.com\"\n\n}\n\nФормат для`\"gcp\"` виглядає наступним чином:\n\ngcp: { email:, privateKey:|<MongoDB\\\\BSON\\\\Binary>, endpoint: // За замовчуванням \"oauth2.googleapis.com\"\n\n}\n\nФормат для`\"kmip\"` виглядає наступним чином:\n\nkmip: { endpoint:}\n\nФормат для`\"local\"` виглядає наступним чином:\n\nlocal: { // 96-байтовий головний ключ, який використовується для шифрування/дешифрування ключів даних key: |<MongoDB\\\\BSON\\\\Binary> }\n\n| | tlsOptions | array |\n\nДокумент, який містить конфігурацію TLS для одного або кількох KMS провайдерів. Підтримуються провайдери `\"aws\"` `\"azure\"` `\"gcp\"`и`\"kmip\"`. Усі провайдери підтримують такі опції:\n\n: { tlsCaFile:, tlsCertificateKeyFile:, tlsCertificateKeyFilePassword:, tlsDisableOCSPEndpointCheck:}\n\n### Помилки\n\n-   При помилці парсингу аргумент кидає виняток[MongoDB\\\\Driver\\\\Exception\\\\InvalidArgumentException](class.mongodb-driver-exception-invalidargumentexception.md)\n-   Викидає виняток [MongoDB\\\\Driver\\\\Exception\\\\RuntimeException](class.mongodb-driver-exception-runtimeexception.md), якщо модуль був скомпільований без підтримки libmongocrypt.\n\n### список змін\n\n| Версия | Опис |\n| --- | --- |\n| PECL mongodb 1.16.0 |  |\n| Провайдер AWS KMS для шифрування на стороні клієнта тепер приймає параметр `\"sessionToken\"`, який можна вказувати для автентифікації з тимчасовими обліковими даними AWS. |  |\n\nДобавлена поддержка поля`\"tlsDisableOCSPEndpointCheck\"` в опції `\"tlsOptions\"`\n\nЯкщо для KMS-провайдерів `\"azure\"`или`\"gcp\"` вказано порожній документ, драйвер спробує налаштувати провайдера, заповнивши [» Автоматичні облікові дані](https://github.com/mongodb/specifications/blob/master/source/client-side-encryption/client-side-encryption.rst#automatic-credentials)\n\n| | PECL mongodb 1.15.0 |\n\nЯкщо для KMS-провайдера `\"aws\"` вказано порожній документ, драйвер спробує налаштувати провайдера, заповнивши [» Автоматичні облікові дані](https://github.com/mongodb/specifications/blob/master/source/client-side-encryption/client-side-encryption.rst#automatic-credentials)\n\n### Дивіться також\n\n-   [MongoDB\\\\Driver\\\\Manager::createClientEncryption()](mongodb-driver-manager.createclientencryption.md) \\- Створення нового об'єкта ClientEncryption\n-   [» Явне (ручне) шифрування рівня полів на стороні клієнта](https://www.mongodb.com/docs/manual/core/security-explicit-client-side-encryption/)у посібнику з MongoDB\n","title":"MongoDB\\\\Driver\\\\ClientEncryption::\\_\\_construct","contentType":2,"navigation":[{"mongodb-driver-clientencryption.addkeyaltname.md":"« MongoDB\\\\Driver\\\\ClientEncryption::addKeyAltName"},{"mongodb-driver-clientencryption.createdatakey.md":"MongoDB\\\\Driver\\\\ClientEncryption::createDataKey »"},{"index.md":"PHP Manual"},{"class.mongodb-driver-clientencryption.md":"MongoDB\\\\Driver\\\\ClientEncryption"}]}},"__N_SSG":true}