{"pageProps":{"page":{"slug":"mysqli.use-result.md","content":"# mysqli::use\\_result\n\n# mysqli\\_use\\_result\n\n(PHP 5, PHP 7, PHP 8)\n\nmysqli::use\\_result -- mysqli\\_use\\_result — Готує результуючий набір на сервері для використання\n\n### Опис\n\nОб'єктно-орієнтований стиль\n\n```methodsynopsis\npublic mysqli::use_result(): mysqli_result|false\n```\n\nПроцедурний стиль\n\n```methodsynopsis\nmysqli_use_result(mysqli $mysql): mysqli_result|false\n```\n\nИспользуется для подготовки к использованию результирующего набора последнего запроса, запущенного функцией[mysqli\\_real\\_query()](mysqli.real-query.md)\n\nЩоб результати запиту стали доступними, після запиту необхідно викликати або цю функцію, або [mysqli\\_store\\_result()](mysqli.store-result.md). Також виклик будь-якому з них запобігатиме відмову наступних запитів на цьому ж з'єднанні.\n\n> **Зауваження** :\n> \n> **mysqli\\_use\\_result()** не передає весь результуючий набір на клієнта, а отже, неможливо скористатися функцією [mysqli\\_data\\_seek()](mysqli-result.data-seek.md)для переміщення по ньому. Для цього потрібно скористатися функцією [mysqli\\_store\\_result()](mysqli.store-result.md). . **mysqli\\_use\\_result()** не слід використовувати, якщо на стороні клієнта дані результуючого набору довго обробляються, оскільки це затримує роботу сервера і не дає іншим процесам оновлювати таблиці, дані з яких є в результуючому наборі.\n\n### Список параметрів\n\nЦя функція не має параметрів.\n\n### Значення, що повертаються\n\nПовертає небуферизований об'єкт результату запиту або \\*\\*`false`\\*\\*в случае возникновения ошибки.\n\n### Помилки\n\nЯкщо сповіщення про помилки mysqli включено (**`MYSQLI_REPORT_ERROR`**) та запитана операція не вдалася, видається попередження. Якщо, крім того, встановлено режим **`MYSQLI_REPORT_STRICT`**, натомість буде викинуто виняток [mysqli\\_sql\\_exception](class.mysqli-sql-exception.md)\n\n### Приклади\n\n**Приклад #1 Приклад використання** mysqli::use\\_result()\\*\\*\\*\\*\n\nОб'єктно-орієнтований стиль\n\n```php\n<?php\n$mysqli = new mysqli(\"localhost\", \"my_user\", \"my_password\", \"world\");\n\n/* проверка соединения */\nif (mysqli_connect_errno()) {\n    printf(\"Не удалось подключиться: %s\\n\", mysqli_connect_error());\n    exit();\n}\n\n$query  = \"SELECT CURRENT_USER();\";\n$query .= \"SELECT Name FROM City ORDER BY ID LIMIT 20, 5\";\n\n/* выполняем мультизапрос */\nif ($mysqli->multi_query($query)) {\n    do {\n        /* получаем первый результирующий набор */\n        if ($result = $mysqli->use_result()) {\n            while ($row = $result->fetch_row()) {\n                printf(\"%s\\n\", $row[0]);\n            }\n            $result->close();\n        }\n        /* печатаем разделитель */\n        if ($mysqli->more_results()) {\n            printf(\"-----------------\\n\");\n        }\n    } while ($mysqli->next_result());\n}\n\n/* закрываем соединение */\n$mysqli->close();\n?>\n```\n\nПроцедурний стиль\n\n```php\n<?php\n$link = mysqli_connect(\"localhost\", \"my_user\", \"my_password\", \"world\");\n\n/* проверка соединения */\nif (mysqli_connect_errno()) {\n    printf(\"Не удалось подключиться: %s\\n\", mysqli_connect_error());\n    exit();\n}\n\n$query  = \"SELECT CURRENT_USER();\";\n$query .= \"SELECT Name FROM City ORDER BY ID LIMIT 20, 5\";\n\n/* выполняем мультизапрос */\nif (mysqli_multi_query($link, $query)) {\n    do {\n        /* получаем первый результирующий набор */\n        if ($result = mysqli_use_result($link)) {\n            while ($row = mysqli_fetch_row($result)) {\n                printf(\"%s\\n\", $row[0]);\n            }\n            mysqli_free_result($result);\n        }\n        /* печатаем разделитель */\n        if (mysqli_more_results($link)) {\n            printf(\"-----------------\\n\");\n        }\n    } while (mysqli_next_result($link));\n}\n\n/* закрываем соединение */\nmysqli_close($link);\n?>\n```\n\nРезультат виконання наведених прикладів:\n\n```\nmy_user@localhost\n-----------------\nAmersfoort\nMaastricht\nDordrecht\nLeiden\nHaarlemmermeer\n```\n\n### Дивіться також\n\n-   [mysqli\\_real\\_query()](mysqli.real-query.md) \\- Виконання SQL запиту\n-   [mysqli\\_store\\_result()](mysqli.store-result.md) \\- передає на клієнта результуючий набір останнього запиту\n","title":"mysqli::use\\_result","contentType":2,"navigation":[{"mysqli.thread-safe.md":"« mysqli::thread\\_safe"},{"mysqli.warning-count.md":"mysqli::$warning\\_count »"},{"index.md":"PHP Manual"},{"class.mysqli.md":"mysqli"}]}},"__N_SSG":true}