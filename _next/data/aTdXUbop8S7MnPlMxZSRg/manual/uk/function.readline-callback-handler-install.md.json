{"pageProps":{"page":{"slug":"function.readline-callback-handler-install.md","content":"# readline\\_callback\\_handler\\_install\n\n(PHP 5 >= 5.1.0, PHP 7, PHP 8)\n\nreadline\\_callback\\_handler\\_install — Ініціалізує callback-інтерфейс readline та термінал, друкує рядок запрошення та негайно повертає керування\n\n### Опис\n\n```methodsynopsis\nreadline_callback_handler_install(string $prompt, callable $callback): bool\n```\n\nІніціалізує callback-інтерфейс readline, друкує `prompt` та повертає управління. Повторний виклик цієї функції без попереднього видалення старого callback-інтерфейсу призведе до його автоматичного перезапису.\n\nФункціонал callback-функцій особливо зручний у комбінації з [stream\\_select()](function.stream-select.md), оскільки він, на відміну від [readline()](function.readline.md), дозволяє чергувати введення-виведення та введення користувача.\n\n### Список параметрів\n\n`prompt`\n\nРядок запрошення.\n\n`callback`\n\nФункция передаваемая в параметр`callback` повинна приймати один параметр - повернутий введення користувача.\n\n### Значення, що повертаються\n\nПовертає **`true`** у разі успішного виконання або \\*\\*`false`\\*\\*в случае возникновения ошибки.\n\n### Приклади\n\n**Приклад #1 Приклад використання callback-інтерфейсу readline**\n\n```php\n<?php\nfunction rl_callback($ret)\n{\n    global $c, $prompting;\n\n    echo \"Вы ввели: $ret\\n\";\n    $c++;\n\n    if ($c > 10) {\n        $prompting = false;\n        readline_callback_handler_remove();\n    } else {\n        readline_callback_handler_install(\"[$c] Поговори со мной: \", 'rl_callback');\n    }\n}\n\n$c = 1;\n$prompting = true;\n\nreadline_callback_handler_install(\"[$c] Введите что-нибудь: \", 'rl_callback');\n\nwhile ($prompting) {\n    $w = NULL;\n    $e = NULL;\n    $n = stream_select($r = array(STDIN), $w, $e, null);\n    if ($n && in_array(STDIN, $r)) {\n        // читаем символ и вызываем callback-функцию,\n        // если введён символ новой строки\n        readline_callback_read_char();\n    }\n}\n\necho \"Ввод отключён. Спасибо за внимание.\\n\";\n?>\n```\n\n### Дивіться також\n\n-   [readline\\_callback\\_handler\\_remove()](function.readline-callback-handler-remove.md) \\- Видаляє раніше зареєстровану callback-функцію та відновлює термінал\n-   [readline\\_callback\\_read\\_char()](function.readline-callback-read-char.md) \\- Читає символ та інформує callback-функцію readline, що отримано рядок\n-   [stream\\_select()](function.stream-select.md) \\- Запускає еквівалент системного виклику select() на заданих масивах потоків з часом очікування, вказаним параметрами seconds та microseconds\n","title":"readline\\_callback\\_handler\\_install","contentType":2,"navigation":[{"function.readline-add-history.md":"« readline\\_add\\_history"},{"function.readline-callback-handler-remove.md":"readline\\_callback\\_handler\\_remove »"},{"index.md":"PHP Manual"},{"ref.readline.md":"Опції Readline"}]}},"__N_SSG":true}