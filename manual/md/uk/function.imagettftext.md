- [«imagettfbbox](function.imagettfbbox.md)
- [imagetypes »](function.imagetypes.md)

- [PHP Manual](index.md)
- [Функції GD та функції для роботи із зображеннями](ref.image.md)
- Малювання тексту на зображенні шрифтом TrueType

#imagettftext

(PHP 4, PHP 5, PHP 7, PHP 8)

imagettftext — Малювання тексту на зображенні шрифтом TrueType

### Опис

**imagettftext**(
[GdImage](class.gdimage.md) `$image`,
float `$size`,
float `$angle`,
int `$x`,
int `$y`,
int `$color`,
string `$font_filename`,
string `$text`,
array `$options` u003d \[\]
): array\|false

Наносить текст `text` поверх зображення, використовуючи шрифт TrueType.

> **Примітка**:
>
> До PHP 8.0.0 [imagefttext()](function.imagefttext.md) - це
> розширений варіант **imagettftext()**, який додатково
> підтримує `extrainfo`. Починаючи з PHP 8.0.0, **imagettftext()**
> є псевдонімом [imagefttext()](function.imagefttext.md).

### Список параметрів

`image`
Об'єкт [GdImage](class.gdimage.md), який повертається однією з функцій
створення зображень, наприклад, такий як
[imagecreatetruecolor()](function.imagecreatetruecolor.md).

`size`
Розмір шрифту у типографських пунктах.

`angle`
Кут у градусах, 0 градусів означає розташування тексту зліва направо.
Позитивні значення означає поворот тексту проти годинникової стрілки.
Наприклад, текст повернутий на 90 градусів потрібно буде читати знизу
вгору.

`x`
Координати `x` та `y` визначають відправну точку для першого символу
текст (конкретно, лівий нижній кут символу). Тут є відмінність від
функції [imagestring()](function.imagestring.md), в якій `x` та `y`
визначають лівий верхній кут першого символу. Наприклад, "верхній лівий"
має координати 0,0.

`y`
y-координат. Це позиція базової лінії шрифту, у загальному випадку вона не
збігається із нижчою точкою у символі.

`col`
Індекс кольору. Використання негативних індексів створює ефект
вимкненого згладжування. Дивіться
[imagecolorallocate()](function.imagecolorallocate.md).

`fontfile`
Шлях до TrueType шрифту, який ви хочете використовувати.

Залежно від того, яка бібліотека GD використовується в PHP, *якщо
`fontfile` не починається з символу `/`, то до імені файлу буде додано
`.ttf`* та бібліотека намагатиметься шукати це ім'я файлу за
певному бібліотекою шляху шрифтів.

При використанні бібліотеки GD версії нижче 2.0.18, як
розділювача шляхів для різних файлів шрифтів використовується `пробіл`, а не
крапка з комою. Ненавмисне використання цієї особливості
призведе до попередження: `Warning: Could not find/open font`.
Єдиним коректним рішенням для цих версій бібліотек буде
переміщення файлів шрифтів у директорію, що не містить пробілів.

У багатьох випадках, коли шрифт знаходиться в тому ж каталозі, що і скрипт
PHP допоможе наступний трюк.

` <?php// Установка змінної оточення для GDputenv('GDFONTPATHu003d' . realpath('.'));// Ім'я шрифту для використання (зверніть указ, f| > `

> **Примітка**:
>
> Зверніть увагу, що [open_basedir](ini.core.md#ini.open-basedir)
> *не* застосовується до `fontfile`.

`text`
Текстовий рядок у кодуванні UTF-8.

Для доступу до символів після 127го можна використовувати числові посилання (у
форматі: €). Також підтримується шістнадцятковий формат
(©). Рядки кодування UTF-8 можна передавати безпосередньо.

Іменовані сутності, як ©, не підтримуються. Використовуйте
функцію [html_entity_decode()](function.md-entity-decode.md), щоб
декодувати їх у UTF-8 рядки.

Якщо символ не підтримується шрифтом, замість нього буде намальовано
незафарбований прямокутник.

### Значення, що повертаються

Повертає масив із 8 елементів, що представляють 4 точки - координати
кутів рамки кадру тексту. Крапки представлені в такому порядку: лівий
нижній кут, правий нижній, верхній правий, верхній лівий. Кути вказані
щодо тексту, тобто "верхній лівий" означає верхній лівий кут
тексту, якщо розташувати його горизонтально. У разі виникнення
помилки функція поверне **`false`**.

### Список змін

| Версія | Опис |
|--------|------------------------------|
| 8.0.0 | Доданий параметр `options`. |

### Приклади

**Приклад #1 Приклад використання **imagettftext()****

У цьому прикладі буде створено зображення PNG з білим розміром фоном
400x30 пікселів та написом "Тест..." чорним кольором (з сірою тінню)
шрифт Arial.

`<?php//Тип вмістуheader('Content-Type: image/png');// Створення зображення$im u003d imagecreatetruecolor(400, 30);// Створення квітів$white u003d imagecoloralloca 255);$greyu003du003dimagecolorallocate($im, 128, 128, 128); // Текст написи$text u003d 'Тест...';// Заміна шляху до шрифту на пользовательский$font u003d 'arial.ttf';// Тіньimagettftext($im, 20, 0, 11,$2 font, $text);// Текстimagettftext($im, 20, 0, 10, 20, $black, $font, $text);imagepng($im);imagedestroy($im);?> `

Результатом виконання цього прикладу буде щось подібне:

![Висновок прикладу:
imagettftext()](images/21009b70229598c6a80eef8b45bf282b-imagettftext.png)

### Примітки

> **Примітка**: Ця функція доступна лише у випадку, якщо PHP був
> скомпільований за допомогою freetype (**--with-freetype-diru003dDIR**)

### Дивіться також

- [imagettfbbox()](function.imagettfbbox.md) - Отримання параметрів
рамки, що обрамляє текст написаний TrueType шрифтом
- [imagefttext()](function.imagefttext.md) - Нанесення тексту на
зображення, використовуючи шрифти FreeType 2
