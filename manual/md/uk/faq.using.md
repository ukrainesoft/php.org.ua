- [« Проблеми складання](faq.build.md)
- [Хешування паролів »](faq.passwords.md)

- [PHP Manual](index.md)
- [FAQ.md)
- Використання PHP

# Використання PHP

У цьому розділі зібрано багато спільних помилок, які можуть вам
зустрітися під час написання PHP-скриптів.

1. [Я не можу запам'ятати порядок аргументів PHP-функцій, вони що,
випадкові?](#faq.using.parameterorder)
2. [Я хочу написати загальний PHP-скрипт, який може обробляти
дані, що надходять з будь-якої форми. Як дізнатися які змінні
методу POST доступні?](#faq.using.anyform)
3. [Мені треба перетворити всі одиночні лапки (') у зворотний слєш з
наступною одиночною лапкою (\'). Як я можу зробити це з
допомогою регулярного вираження? Я також хотів би перетворити "
\" та \ в \\.](#faq.using.addslashes)
4. [Коли я роблю таке, висновок друкується не в тому порядку:
\<?php function myfunc($argument) { echo $argument + 10; } $variable
u003d 10; echo "myfunc($variable) u003d ". myfunc($variable); ?\> Що
відбувається?](#faq.using.wrong-order)
5. [Гей, що сталося з моїми рядками? \<pre\> \<?php echo "Це повинно
бути на першому рядку."; ?\> \<?php echo "А це має бути на
наступному рядку."; ?\> \</pre\>](#faq.using.newlines)
6. [Я отримую повідомлення 'Warning: Cannot send session cookie - headers
already sent...' або 'Cannot add header information - headers
already sent...'.](#faq.using.headers-sent)
7. [Мені потрібний прямий доступ до інформації в заголовку запиту. Як я
можу це зробити?](#faq.using.header)
8. [Коли я намагаюся використовувати автентифікацію з IIS, я отримую 'No
Input file specified'.](#faq.using.authentication)
9. [Windows: У мене немає доступу до файлів, що поділяються з іншим
комп'ютером, IIS.](#faq.using.iis.sharing)
10. [Як я повинен поєднувати XML та PHP? Він скаржиться на мої \<?xml
теги!](#faq.using.mixml)
11. [Де я можу знайти повний список змінних, доступних мені у
PHP?](#faq.using.variables)
12. [Як я можу генерувати PDF файли без використання платних або
комерційних бібліотек, як PDFLib? Я хотів би щось безкоштовне
і не потребує зовнішніх бібліотек PDF.] (#faq.using.freepdf)
13. [Декілька PHP директив можуть приймати скорочення для байтових
значень на відміну лише від int байтових значень. Які всі
доступні скорочення?](#faq.using.shorthandbytes)

**Я не можу запам'ятати порядок аргументів PHP-функцій, вони що випадкові?**
PHP - це клей, який скріплює разом сотні різних зовнішніх
бібліотек, тому іноді це здається досить заплутаним. Проте, загальне
правило таке:

Параметри [функцій роботи з масивами](book.array.md) упорядковані в
вигляді "*голка (needle), сіно (haystack)*", тоді як порядок
[рядкових функціях](book.strings.md) зворотний, тобто аналогічний
"*сіно, голка".



**Я хочу написати загальний PHP-скрипт, який може обробляти дані, що надходять з будь-якої форми. Як дізнатися, які змінні методи POST доступні?**
PHP пропонує безліч [визначених
змінних](language.variables.predefined.md), таких як
суперглобальна `$_POST`. Ви можете пройтись по `$_POST` так як
це асоціативний масив усіх значень, які з POST. Для прикладу,
давайте просто пройдемося по них з
[foreach](control-structures.foreach.md), перевіримо на порожні
([empty()](function.empty.md)) значення та роздрукуємо.

` <?php$empty u003d $post u003d array();foreach ($_POST as $varname u003d> $varvalue) {    if (empty($varvalue)) { {         } else {        $post[$varname] u003d $varvalue; }}print "<pre>";if (empty($empty)) {    print "В POST не було порожніх значень, ось що там було:
";   var_dump($post);} else {    print "Прийшло " . count($empty) . " пустих значень
";    print "Всього відправлено:
"; var_dump($post);    print "Порожніх:
"; var_dump($empty);   exit;}?> `



**Мені треба перетворити всі одиночні лапки (') у зворотний сліш з наступною одиночною лапкою (\'). Як я можу це зробити за допомогою регулярного виразу? Я також хотів би перетворити " на \" і \ на \\.**
Маючи на увазі, що ви хочете використовувати результат перетворення в
роботі з базою даних, використовуйте відповідний механізм
екранування, що йде з вашою базою даних. Наприклад,
використовуйте
[mysql_real_escape_string()](function.mysql-real-escape-string.md) з
MySQL і [pg_escape_string()](function.pg-escape-string.md) з
PostgreSQL. Є також загальніші функції
[addslashes()](function.addslashes.md) та
[stripslashes()](function.stripslashes.md), вони часто зустрічаються в
старий PHP-код.

**Коли я роблю таке, висновок друкується не в тому порядку:**

`<?phpfunction myfunc($argument){    echo $argument + 10;}$variable u003d 10;echo "myfunc($variable) u003d " . myfunc($variable);?> `

Що відбувається?

Для того, щоб використовувати результат вашої функції у виразі (так
як з'єднання з іншими рядками, як у наведеному прикладі), вам
необхідно повернути значення за допомогою [return](function.return.md), а
не виводити його за допомогою [echo](function.echo.md).

**Гей, що сталося з моїми рядками?**

`<pre><?php echo "Це мусить бути на першому рядку."; ?><?php echo "А це повинно бути на наступному рядку."; ?></pre>`

У PHP блок коду завершується або з "?\>", або з "?\>
(де
означає "новий рядок"). У наведеному вище прикладі пропозиції
виведуть на одному рядку, тому що PHP опускає символ нового рядка
після завершення блоку. Це означає, що вам потрібно вставити
додатковий символ нового рядка після кожного блоку PHP-коду, для
щоб висновок продовжувався з нового рядка.

Чому це робить PHP? Тому що при форматуванні звичайного HTML це,
зазвичай, спрощує ваше життя коли вам не потрібний цей новий рядок і вам не
треба створювати неймовірно довгі рядки для того, щоб зробити
вихідник сторінки читаним.

**Я отримую повідомлення 'Warning: Cannot send session cookie - headers already sent...' або 'Cannot add header information - headers already sent...'.**
функцій [header()](function.header.md),
[setcookie()](function.setcookie.md), та [функціям
сесії](ref.session.md) потрібно додати заголовки до вихідного потоку,
але заголовки можуть бути надіслані тільки перед усім іншим вмістом.
Перед використанням цих функцій не можна нічого виводити, зокрема
HTML. Функція [headers_sent()](function.headers-sent.md) перевірить,
якщо ваш скрипт уже надіслав заголовки; також дивіться [функції управління
виведенням] (ref.outcontrol.md).



**Мені потрібний прямий доступ до інформації в заголовку запиту. Як я можу це зробити?**
Це робить функцію [getallheaders()](function.getallheaders.md), якщо
ви запускаєте PHP як модуль Apache. Так, наступний шматок коду покаже
вам усі заголовки запиту:

` <?php$headers u003d getallheaders();foreach ($headers as $name u003d> $content) {    echo "headers[$name] u003d $content<br />
";}?> `

Також дивіться [apache_lookup_uri()](function.apache-lookup-uri.md),
[apache_response_headers()](function.apache-response-headers.md) та
[fsockopen()](function.fsockopen.md)



**Коли я намагаюся використовувати автентифікацію з IIS, я отримую 'No Input file specified'.**
Це нестача моделі безпеки IIS. Проблема загальна для всіх CGI
програм, що виконуються під IIS. Щоб уникнути проблеми, створіть простий
HTML файл (необроблюваний PHP) як вхідну сторінку в
автентифікованої директорії. Потім використовуйте META тег для
перенаправлення на PHP сторінку або помістіть посилання, що вказує на PHP
сторінку. Після цього PHP розпізнає автентифікацію правильно. Це не
має впливати на інші веб-сервери NT. Для додаткової інформації
дивіться:
[»http://support.microsoft.com/kb/q160422/](http://support.microsoft.com/kb/q160422/)
та розділ посібника [HTTP Аутентифікація](features.http-auth.md).



**Windows: У мене немає доступу до файлів, що поділяються з іншим комп'ютером, за IIS.**
Вам потрібно зробити зміни. Ідіть у
`Internet Information Services`. Знайдіть ваш PHP файл і перейдіть
у його властивості. Ідіть у закладку `File Security`,
`Edit -> Anonymous access and authentication control`.

Ви можете виправити проблему або знявши позначку з
`Anonymous Access` та залишивши зазначеним
`Integrated Window Authentication`, або відзначивши
`Anonymous Access` та відредагувати права користувача, так як у
нього може бути правий.



**Як я повинен поєднувати XML та PHP? Він скаржиться на мої теги!**
Для того, щоб вбудувати \<?xml безпосередньо у ваш PHP-код, вам потрібно
відключити короткі теги, встановивши PHP директиву
[short_open_tags](ini.core.md#ini.short-open-tag) в `0`. Ви можете
встановити цю директиву за допомогою [ini_set()](function.ini-set.md).
Незалежно від того, чи включена
[short_open_tags](ini.core.md#ini.short-open-tag) чи ні, ви можете
робити щось типу: `<?php echo '<?xml'; ?>`. За умовчанням ця директива
включена (`On`).



**Де я можу знайти повний список змінних, доступних мені в PHP?**
Читайте сторінку посібника з [визначених
змінним](language.variables.predefined.md), оскільки вона містить
частковий перелік визначених змінних, доступних вашому скрипту.
Повний список доступних змінних (і багато іншої інформації) можна
побачити, викликавши функцію [phpinfo()](function.phpinfo.md). Не забудьте
прочитати розділ керівництва по [змінним, що лежать поза
PHP](language.variables.external.md) оскільки він описує загальні
сценарії для зовнішніх змінних, таких як HTML форма, Cookie та URL.



**Як я можу генерувати PDF-файли без використання платних або комерційних бібліотек, як PDFLib? Я хотів би щось безкоштовне і не потребує зовнішніх бібліотек PDF.**
Є кілька альтернатив, написаних на PHP, таких як
[» FPDF](http://www.fpdf.org/) та [» TCPDF](http://www.tcpdf.org/).



**Кілька PHP директив можуть приймати скорочення для байтових значень на відміну від тільки int байтових значень. Якими є всі доступні скорочення?**
Доступні опції: K (для кілобайт), M (для мегабайт) та G (для гігабайт);
вони реєстронезалежні. Решта вважається байтами. `1M` одно
одному мегабайту або `1048576` байтам. `1K` дорівнює одному кілобайту або
`1024` байтам. Ці скорочення ви можете використовувати в `php.ini` та в
функції [ini_set()](function.ini-set.md). Зверніть увагу, що
числове значення наводиться типу int; наприклад, `0.5M`
інтерпретується як `0`.

> **Примітка**: **кілобайт та кібібайт**
>
> У нотації PHP один кілобайт дорівнює 1024 байтам, тоді як стандарт IEC
> вважає це кібібайтом. Через війну: k і K u003d 1024 байта.
